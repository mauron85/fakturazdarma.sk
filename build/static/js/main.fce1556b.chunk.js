(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{117:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(17),i=function e(t){Object(n.a)(this,e),this.id=void 0,this.entity="",this.name=void 0,this.street=void 0,this.city=void 0,this.zipCode=void 0,this.country=void 0,this.legalId=void 0,this.taxId=void 0,this.taxLegalId=void 0,this.iban=void 0,this.bankAccount=void 0,this.bankName=void 0,this.bankCode=void 0,this.swift=void 0,this.email=void 0,this.phoneNr=void 0,this.isOwn=!1,Object.assign(this,t)}},141:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(17),i=a(20),r=function(){function e(t){Object(n.a)(this,e),this.name="",this.unit="kus",this.pricePerUnit=0,this.amount=0,this.taxRate=0,Object.assign(this,t)}return Object(i.a)(e,[{key:"netPrice",get:function(){return this.pricePerUnit*this.amount}},{key:"grossPrice",get:function(){return this.netPrice+this.taxPrice}},{key:"taxPrice",get:function(){return this.netPrice/100*this.taxRate}}]),e}()},197:function(e,t){},257:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(17),i=a(20),r=(a(297),function(){function e(t){Object(n.a)(this,e),this.baseUrl=t}return Object(i.a)(e,[{key:"doLogin",value:function(e,t){return fetch("".concat(this.baseUrl,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})})}},{key:"getContacts",value:function(){throw new Error("Not implemented")}},{key:"getInvoices",value:function(){throw new Error("Not implemented")}},{key:"saveContact",value:function(e){throw new Error("Not implemented")}},{key:"saveContacts",value:function(e){throw new Error("Not implemented")}},{key:"saveInvoice",value:function(e){throw new Error("Not implemented")}},{key:"saveInvoices",value:function(e){throw new Error("Not implemented")}},{key:"deleteContacts",value:function(e){throw new Error("Not implemented")}},{key:"deleteInvoices",value:function(e){throw new Error("Not implemented")}}]),e}())},258:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(17),i=a(20),r=a(31),o=function(){function e(){Object(n.a)(this,e)}return Object(i.a)(e,[{key:"setContact",value:function(t){var a=this.getContactSync();if(t.id){var n=a.findIndex(function(e){return e.id===t.id});n>-1?a[n]=t:a.push(t)}else t.id=String(Object.keys(a).length+1),a.push(t);return localStorage.setItem(e.CONTACTS_KEY,JSON.stringify(a)),Promise.resolve(t)}},{key:"setContacts",value:function(t){return localStorage.setItem(e.CONTACTS_KEY,JSON.stringify(t)),Promise.resolve(t)}},{key:"getContacts",value:function(){return Promise.resolve(this.getContactSync())}},{key:"deleteContacts",value:function(t){var a=this.getContactSync().filter(function(e){return!t.includes(e.id)});return localStorage.setItem(e.CONTACTS_KEY,JSON.stringify(a)),Promise.resolve(Object.values(a))}},{key:"setInvoice",value:function(t){var a=this.getInvoiceSync();if(t.id){var n=a.findIndex(function(e){return e.id===t.id});n>-1?a[n]=t:a.push(t)}else t.id=String(Object.keys(a).length+1),a.push(t);return localStorage.setItem(e.INVOICES_KEY,JSON.stringify(a)),Promise.resolve(t)}},{key:"setInvoices",value:function(t){return localStorage.setItem(e.INVOICES_KEY,JSON.stringify(t)),Promise.resolve(t)}},{key:"getInvoices",value:function(){return Promise.resolve(this.getInvoiceSync())}},{key:"deleteInvoices",value:function(t){var a=this.getInvoiceSync().filter(function(e){return!t.includes(e.id)});return localStorage.setItem(e.INVOICES_KEY,JSON.stringify(a)),Promise.resolve(Object.values(a))}},{key:"getInvoiceSync",value:function(){var t=localStorage.getItem(e.INVOICES_KEY);return t?JSON.parse(t):[]}},{key:"getContactSync",value:function(){var t=localStorage.getItem(e.CONTACTS_KEY);return t?JSON.parse(t):[]}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new e,localStorage.getItem(e.CONTACTS_KEY)||localStorage.setItem(e.CONTACTS_KEY,JSON.stringify(c)),localStorage.getItem(e.INVOICES_KEY)||localStorage.setItem(e.INVOICES_KEY,JSON.stringify(l))),this.instance}}]),e}();o.instance=void 0,o.CONTACTS_KEY="contacts",o.INVOICES_KEY="invoices";var c=[{id:"1",entity:"GP Slovakia",name:"Katar\xedna Slobodov\xe1",email:"invoice@gp.svk",phoneNr:"0970234654",street:"Michalsk\xe1 13",city:"Bratislava",zipCode:"811 03",country:"Slovensko",legalId:"45 923 09A",taxId:"162743597A",iban:"SK 31 1100 000019 8742637541",bankAccount:"8742637541",bankName:"Tatra Banka",bankCode:"1100",swift:"TATRSKBX",isOwn:!0},{id:"2",entity:"Etrix Slovakia",name:"Jozef Kov\xe1\u010d",email:"invoice@etrix.svk",phoneNr:"0989447329",street:"Antona Pr\xeddavka 26",city:"Pre\u0161ov",zipCode:"080 0+",country:"Slovensko",legalId:"25 537 35A",taxId:"062753621A",iban:"SK 31 1111 000011 1712331541",bankAccount:"8742637541",bankName:"UniCredit Bank",bankCode:"1111",swift:"UNCRSKBX",isOwn:!0}],l=[{id:"2019001",paymentType:r.c.WireTransfer,description:"Fakt\xfara za slu\u017eby",emitent:c[0],recipient:c[1],discount:5,items:[{name:"Notebook HP Elite",pricePerUnit:1399,unit:"kus",amount:1}],variableSymbol:"2019001",constantSymbol:"0308",issueDate:new Date(2019,4,1),dueDate:new Date(2019,4,15),paymentDate:new Date(2019,4,13),finalText:"\u010eakujeme za d\xf4veru."},{id:"2019002",paymentType:r.c.Card,description:"Fakt\xfara za slu\u017eby",emitent:c[1],recipient:c[0],items:[{name:"Eset Smart Security",pricePerUnit:66,unit:"kus",amount:12}],variableSymbol:"2019002",constantSymbol:"0308",issueDate:new Date(2019,4,3),dueDate:new Date(2019,4,18),finalText:"Softv\xe9rov\xe1 licencia je neprenosn\xe1."}]},259:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(17),i=a(20),r=function(e){return(t=1e3,new Promise(function(e){return setTimeout(e,t)})).then(function(){return e});var t},o=function(){function e(t){Object(n.a)(this,e),this.db=t}return Object(i.a)(e,[{key:"doLogin",value:function(e,t){return r(Promise.resolve(!0))}},{key:"getContacts",value:function(){return r(this.db.getContacts())}},{key:"getInvoices",value:function(){return r(this.db.getInvoices())}},{key:"saveContact",value:function(e){return r(this.db.setContact(e))}},{key:"saveContacts",value:function(e){return r(this.db.setContacts(e))}},{key:"saveInvoice",value:function(e){return r(this.db.setInvoice(e))}},{key:"saveInvoices",value:function(e){return r(this.db.setInvoices(e))}},{key:"deleteContacts",value:function(e){return r(this.db.deleteContacts(e))}},{key:"deleteInvoices",value:function(e){return r(this.db.deleteInvoices(e))}}]),e}()},283:function(e,t,a){e.exports=a(576)},31:function(e,t,a){"use strict";a.d(t,"c",function(){return n}),a.d(t,"b",function(){return i}),a.d(t,"a",function(){return m});var n,i,r=a(42),o=a(17),c=a(20),l=a(117),s=a(141),u=864e5;!function(e){e[e.WireTransfer=1]="WireTransfer",e[e.Card=2]="Card",e[e.Cash=3]="Cash",e[e.CashOnDelivery=4]="CashOnDelivery"}(n||(n={})),function(e){e[e.NonTax=0]="NonTax",e[e.Taxable=1]="Taxable"}(i||(i={}));var m=function(){function e(t){Object(o.a)(this,e),this.id=void 0,this.type=i.NonTax,this.description=void 0,this.paymentType=n.WireTransfer,this.recipient=void 0,this.emitent=void 0,this.items=[],this.discount=0,this.variableSymbol="",this.constantSymbol="0308",this.orderNr=void 0,this.issueDate=void 0,this.dueDate=void 0,this.paymentDate=void 0,this.finalText=void 0;var a=Date.now();this.issueDate=new Date(a),this.dueDate=new Date(a+15*u),this.recipient=new l.a,this.emitent=new l.a,Object.assign(this,t),this.items=t&&t.items?t.items.map(function(e){return new s.a(e)}):[]}return Object(c.a)(e,[{key:"grossPrice",get:function(){if(this.type===i.NonTax)return this.items.reduce(function(e,t){return e+t.netPrice},0);if(this.type===i.Taxable){var e=this.items.reduce(function(e,t){var a=t.taxRate,n=t.netPrice;return e[a]=(e[a]||0)+n,e},{});return Object.entries(e).reduce(function(e,t){var a=Object(r.a)(t,2),n=a[0],i=a[1];return e+=i+i/100*Number(n)},0)}return Number.NaN}},{key:"discountPrice",get:function(){return-this.grossPrice/100*this.discount}},{key:"netPrice",get:function(){return this.grossPrice+this.discountPrice}}]),e}()},47:function(e,t,a){"use strict";a(257);var n,i=a(258),r=a(259);a(197);n=new r.a(i.a.getInstance()),t.default=n},511:function(e,t,a){},524:function(e,t,a){},568:function(e,t,a){},569:function(e,t,a){},570:function(e,t,a){},571:function(e,t,a){},573:function(e,t,a){},576:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"LOG_IN",function(){return C}),a.d(n,"LOG_IN_SUCCESS",function(){return I}),a.d(n,"LOG_IN_FAILURE",function(){return O}),a.d(n,"LOG_OUT",function(){return N}),a.d(n,"CONTACT_CREATE",function(){return P}),a.d(n,"CONTACTS_FETCH",function(){return T}),a.d(n,"CONTACTS_FETCH_SUCCESS",function(){return x}),a.d(n,"CONTACTS_FETCH_FAILURE",function(){return z}),a.d(n,"CONTACT_SAVE",function(){return w}),a.d(n,"CONTACT_SAVE_SUCCESS",function(){return j}),a.d(n,"CONTACT_SAVE_FAILURE",function(){return A}),a.d(n,"CONTACTS_DELETE",function(){return _}),a.d(n,"CONTACTS_DELETE_SUCCESS",function(){return F}),a.d(n,"CONTACTS_DELETE_FAILURE",function(){return D}),a.d(n,"INVOICES_FETCH",function(){return R}),a.d(n,"INVOICES_FETCH_SUCCESS",function(){return V}),a.d(n,"INVOICES_FETCH_FAILURE",function(){return U}),a.d(n,"INVOICE_SAVE",function(){return L}),a.d(n,"INVOICE_SAVE_SUCCESS",function(){return B}),a.d(n,"INVOICE_SAVE_FAILURE",function(){return K}),a.d(n,"INVOICES_DELETE",function(){return M}),a.d(n,"INVOICES_DELETE_SUCCESS",function(){return H}),a.d(n,"INVOICES_DELETE_FAILURE",function(){return W}),a.d(n,"ARCHIVE_IMPORT",function(){return q}),a.d(n,"ARCHIVE_IMPORT_SUCCESS",function(){return Y}),a.d(n,"ARCHIVE_IMPORT_FAILURE",function(){return X}),a.d(n,"ARCHIVE_EXPORT",function(){return Z}),a.d(n,"ARCHIVE_EXPORT_SUCCESS",function(){return J}),a.d(n,"ARCHIVE_EXPORT_FAILURE",function(){return G}),a.d(n,"SET_VISIBILITY_FILTER",function(){return $});a(284);var i=a(279),r=a(0),o=a.n(r),c=a(10),l=a.n(c),s=a(68),u=a(89),m=a(88),d=a(39),p=a(256),v=a(276),f=a.n(v),h=(a(195),a(59)),y=a(17),E=a(20),g=a(30),b=a(28),S=a(29),k=(a(196),a(75)),C="LOG_IN",I="LOG_IN_SUCCESS",O="LOG_IN_FAILURE",N="LOG_OUT",P="CONTACT_CREATE",T="CONTACTS_FETCH",x="CONTACTS_FETCH_SUCCESS",z="CONTACTS_FETCH_FAILURE",w="CONTACT_SAVE",j="CONTACT_SAVE_SUCCESS",A="CONTACT_SAVE_FAILURE",_="CONTACTS_DELETE",F="CONTACTS_DELETE_SUCCESS",D="CONTACTS_DELETE_FAILURE",R="INVOICES_FETCH",V="INVOICES_FETCH_SUCCESS",U="INVOICES_FETCH_FAILURE",L="INVOICE_SAVE",B="INVOICE_SAVE_SUCCESS",K="INVOICE_SAVE_FAILURE",M="INVOICES_DELETE",H="INVOICES_DELETE_SUCCESS",W="INVOICES_DELETE_FAILURE",q="ARCHIVE_IMPORT",Y="ARCHIVE_IMPORT_SUCCESS",X="ARCHIVE_IMPORT_FAILURE",Z="ARCHIVE_EXPORT",J="ARCHIVE_EXPORT_SUCCESS",G="ARCHIVE_EXPORT_FAILURE",$="SET_VISIBILITY_FILTER",Q=a(47),ee=function(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(a,n){return-1==t?n[e].localeCompare(a[e]):a[e].localeCompare(n[e])}},te=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(a,n){var i=1,r=n().contacts.sort(ee("-id"));r[0]&&(i=Number(r[0].id)+1),e.push("/contacts/".concat(i).concat(t?"?isOwn=".concat(t):""))}},ae=function(){return function(e){return e({type:T,payload:{}}),Q.default.getContacts().then(function(t){return e({type:x,payload:t}),t}).catch(function(t){throw e({type:z,payload:t}),t})}},ne=a(189),ie=a.n(ne),re=a(260),oe=a.n(re),ce=a(31),le=new Intl.NumberFormat("sk-SK",{style:"currency",currency:"EUR"}),se=Intl.DateTimeFormat("sk-SK"),ue=a(261),me=a.n(ue);ie.a.vfs=oe.a.pdfMake.vfs;var de=function(e){var t=document.createElement("canvas");return me()(t,e,{format:"CODE128",width:3,height:80,displayValue:!1}),t.toDataURL("image/png")},pe=function(){function e(){Object(y.a)(this,e)}return Object(E.a)(e,[{key:"getItemTable",value:function(e){if(1===e.type){var t=[[{text:"Ozna\u010denie dod\xe1vky",bold:!0},{text:"Po\u010det m. j.",bold:!0,alignment:"right"},{text:"Cena za m.j.",bold:!0,alignment:"right"},{text:"DPH %",bold:!0,alignment:"right"},{text:"bez DPH",bold:!0,alignment:"right"},{text:"DPH",bold:!0,alignment:"right"},{text:"s DPH",bold:!0,alignment:"right"}]];return e.items.forEach(function(e){t.push([{text:e.name},{text:"".concat(e.amount),alignment:"right"},{text:"".concat(e.pricePerUnit),alignment:"right"},{text:"".concat(e.taxRate),alignment:"right"},{text:"".concat(le.format(e.netPrice)),alignment:"right"},{text:"".concat(le.format(e.taxPrice)),alignment:"right"},{text:"".concat(le.format(e.grossPrice)),alignment:"right"}])}),{layout:"lightHorizontalLines",margin:[0,10,0,0],fontSize:9,table:{headerRows:1,widths:["*",45,50,30,60,60,60],body:t}}}var a=[[{text:"Ozna\u010denie dod\xe1vky",bold:!0},{text:"Po\u010det m. j.",bold:!0,alignment:"right"},{text:"Cena za m.j.",bold:!0,alignment:"right"},{text:"Spolu",bold:!0,alignment:"right"}]];return e.items.forEach(function(e){a.push([{text:e.name},{text:"".concat(e.amount),alignment:"right"},{text:"".concat(le.format(e.pricePerUnit)),alignment:"right"},{text:"".concat(le.format(e.grossPrice)),alignment:"right"}])}),{layout:"lightHorizontalLines",margin:[0,10,0,0],fontSize:9,table:{headerRows:1,widths:["*",50,50,80],body:a}}}},{key:"getPriceTableBody",value:function(e){var t=le.format(e.grossPrice),a=le.format(e.netPrice),n=le.format(e.discountPrice),i=[[{text:"Spolu pred z\u013eavou:",fontSize:14,bold:!0},{text:"".concat(t),fontSize:14,bold:!0}],[{text:"Z\u013eava   ".concat(e.discount," %:"),fontSize:13},{text:"".concat(n),fontSize:13}],[{text:"Spolu na \xfahradu:",fontSize:15,bold:!0},{text:"".concat(a),fontSize:15,bold:!0}]];return e.discount||i.splice(0,2),i}},{key:"makeInvoicePdf",value:function(e){var t=se.format(new Date(e.issueDate)),a=se.format(new Date(e.dueDate)),n="";switch(e.paymentType){case ce.c.WireTransfer:n="Prevodom";break;case ce.c.Card:n="Kartou";break;case ce.c.Cash:n="V hotovosti";break;case ce.c.CashOnDelivery:n="Dobierka"}var i={pageSize:"A4",pageOrientation:"portrait",pageMargins:[50,20,25,30],defaultStyle:{font:"Roboto"},content:[{columns:[{stack:[{text:"".concat(e.emitent.entity),fontSize:11,bold:!0,margin:[0,0,0,5]}],width:"*",margin:[0,0,0,0]},{image:"".concat(de(e.id)),width:100,margin:[0,0,0,9]}],fontSize:8},{columns:[{stack:[{text:"".concat(e.emitent.street)},{text:"".concat(e.emitent.zipCode," ").concat(e.emitent.city)},{text:"".concat(e.emitent.country)}],width:180,margin:[0,5,0,0]},{margin:[0,-5,0,0],width:100,table:{headerRows:0,widths:[40,100],body:[[{text:"I\u010cO:",alignment:"right"},"".concat(e.emitent.legalId)],[{text:"DI\u010c:",alignment:"right"},"".concat(e.emitent.taxId)],[{text:"".concat(e.emitent.taxLegalId?"I\u010c DPH:":"Nie sme platcovia DPH"),alignment:e.emitent.taxLegalId?"right":"left",colSpan:e.emitent.taxLegalId?1:2},"".concat(e.emitent.taxLegalId||"")]]},layout:{hLineWidth:function(e){return 0},vLineWidth:function(e){return 0},paddingLeft:function(e,t){return 0},paddingRight:function(e,t){return 3},paddingTop:function(e,t){return 0},paddingBottom:function(e,t){return 0}}}],fontSize:8,margin:[0,-25,0,0]},{text:"".concat(e.emitent.email?"email: ".concat(e.emitent.email):""),fontSize:8,margin:[300,e.emitent.email?-10:0,0,0]},{canvas:[{type:"line",x1:0,y1:5,x2:524,y2:5,lineWidth:.5}]},{columns:[{text:"Fakt\xfara",bold:!0,width:"*",margin:[0,5,0,0]},{table:{body:[[{text:"".concat(e.id),margin:[20,0,20,0]}]]},layout:{hLineWidth:function(e,t){return.5},vLineWidth:function(e,t){return.5}},margin:[0,0,0,0],width:"100",aligment:"right"}],margin:[0,0,0,0],fontSize:14},{columns:[{text:"",width:"*"},{stack:[{text:"Odberate\u013e",bold:!0},{canvas:[{type:"line",x1:-2,y1:5,x2:250,y2:5,lineWidth:.5}]},{text:"".concat(e.recipient.entity),bold:!0,margin:[0,3,0,0]},{text:"".concat(e.recipient.street)},{text:"".concat(e.recipient.zipCode," ").concat(e.recipient.city)},{text:"".concat(e.recipient.country)},{canvas:[{type:"line",x1:-2,y1:5,x2:250,y2:5,lineWidth:.5}]}],width:250,margin:[0,20,0,0]}]},{columns:[{width:150,margin:[0,20,0,0],stack:[{text:"D\xe1tum",bold:!0},{canvas:[{type:"line",x1:-2,y1:5,x2:120,y2:5,lineWidth:.5}]}]},{width:150,margin:[0,20,0,0],stack:[{text:"Symbol",bold:!0},{canvas:[{type:"line",x1:-2,y1:5,x2:100,y2:5,lineWidth:.5}]}]},{margin:[100,5,0,0],fontSize:10,table:{headerRows:0,widths:[50,100],body:[[{text:"I\u010cO:",alignment:"right"},"".concat(e.recipient.legalId)],[{text:"DI\u010c:",alignment:"right"},"".concat(e.recipient.taxId)],[{text:"".concat(e.recipient.taxLegalId?"I\u010c DPH:":""),alignment:"right"},"".concat(e.recipient.taxLegalId||"")]]},layout:{hLineWidth:function(e){return 0},vLineWidth:function(e){return 0},paddingLeft:function(e,t){return 0},paddingRight:function(e,t){return 3},paddingTop:function(e,t){return 0},paddingBottom:function(e,t){return 0}}}],fontSize:10},{columns:[{margin:[10,0,0,0],width:150,table:{headerRows:0,widths:[50,"*"],body:[[{text:"vystavenia:"},"".concat(t)],[{text:"splatnosti:",bold:!0},{text:"".concat(a),bold:!0}]]},layout:{hLineWidth:function(e){return 0},vLineWidth:function(e){return 0},paddingLeft:function(e,t){return 0},paddingRight:function(e,t){return 3},paddingTop:function(e,t){return 0},paddingBottom:function(e,t){return 0}}},{margin:[10,0,0,0],width:158,table:{headerRows:0,widths:[60,"*"],body:[[{text:"kon\u0161tantn\xfd:"},"".concat(e.constantSymbol)],[{text:"variabiln\xfd:",bold:!0},{text:"".concat(e.variableSymbol),bold:!0}]]},layout:{hLineWidth:function(e){return 0},vLineWidth:function(e){return 0},paddingLeft:function(e,t){return 0},paddingRight:function(e,t){return 3},paddingTop:function(e,t){return 0},paddingBottom:function(e,t){return 0}}},{margin:[0,0,0,0],table:{headerRows:0,widths:[80,"*"],body:[[{text:"Platba:",bold:!0},"".concat(n||"")],[{text:"\u010c\xedslo objedn\xe1vky:",bold:!0},{text:"".concat(e.orderNr||""),bold:!0}]]},layout:{hLineWidth:function(e){return 0},vLineWidth:function(e){return 0},paddingLeft:function(e,t){return 0},paddingRight:function(e,t){return 3},paddingTop:function(e,t){return 0},paddingBottom:function(e,t){return 0}}}],fontSize:9,margin:[0,10,0,0]},{columns:[{stack:[{text:"IBAN:",bold:!0},{table:{body:[[{text:"".concat(e.emitent.iban),bold:!0,margin:[20,1,20,1]}]]},layout:{hLineWidth:function(e,t){return.5},vLineWidth:function(e,t){return.5}},margin:[0,0,0,0],width:"100",aligment:"right"},{margin:[0,5,0,0],table:{headerRows:0,widths:[70,"*"],body:[[{text:"Bankov\xfd \xfa\u010det:",bold:!0},{text:"".concat(e.emitent.bankAccount),bold:!1}]]},layout:{hLineWidth:function(e){return 0},vLineWidth:function(e){return 0},paddingLeft:function(e,t){return 0},paddingRight:function(e,t){return 3},paddingTop:function(e,t){return 0},paddingBottom:function(e,t){return 0}}}]},{stack:[{text:"SWIFT:",bold:!0},{table:{body:[[{text:"".concat(e.emitent.swift),bold:!0,margin:[20,0,20,0],fontSize:11}]]},layout:{hLineWidth:function(e,t){return.5},vLineWidth:function(e,t){return.5}},margin:[0,0,0,0],width:"100",aligment:"right"},{margin:[0,5,0,0],table:{headerRows:0,widths:[60,"*"],body:[[{text:"K\xf3d banky:",bold:!0},{text:"".concat(e.emitent.bankCode),bold:!1}]]},layout:{hLineWidth:function(e){return 0},vLineWidth:function(e){return 0},paddingLeft:function(e,t){return 0},paddingRight:function(e,t){return 3},paddingTop:function(e,t){return 0},paddingBottom:function(e,t){return 0}}}]}],margin:[0,20,0,0],fontSize:10},{text:"".concat(e.description||""),margin:[0,10,0,0],fontSize:10},this.getItemTable(e),{text:"".concat(e.finalText),margin:[0,10,0,0],fontSize:10},{margin:[200,20,0,0],alignment:"right",table:{headerRows:0,widths:[150,"*"],heights:[10,20,10],body:this.getPriceTableBody(e)},layout:{defaultBorder:!1,fillColor:function(e){return 1===e?"#aaa":null}}}],footer:{stack:[{canvas:[{type:"line",x1:50,y1:5,x2:560,y2:5,lineWidth:.5}]},{columns:[{text:"",width:"25%"},{text:"vygenerovala fakturazdarma.sk",width:"*",alignment:"center"},{text:"Strana 1/1",width:"25%",alignment:"right"}],margin:[50,5,50,50],color:"#A9A9A9",italics:!0}],fontSize:8},styles:{}};ie.a.createPdf(i).download("Fakt\xfara_".concat(e.id,".pdf"))}}]),e}(),ve=function(){return function(e){return e({type:R,payload:{}}),Q.default.getInvoices().then(function(t){return e({type:V,payload:t}),t}).catch(function(t){throw e({type:U,payload:t}),t})}},fe=function(e,t){return function(t){return t({type:L,payload:e}),Q.default.saveInvoice(e).then(function(e){t({type:B,payload:e})}).catch(function(e){throw t({type:K,payload:e}),e})}},he="SHOW_ALL",ye="SHOW_COMPLETED",Ee="SHOW_ACTIVE",ge=a(42),be=a(15),Se=a.n(be),ke=function(){var e=document.createElement("a");return e.style.display="none",document.body.appendChild(e),function(t,a){var n=window.URL.createObjectURL(t);e.href=n,e.download=a,e.click(),window.URL.revokeObjectURL(n)}}(),Ce=(a(253),a(149)),Ie=(a(62),a(27)),Oe=(a(112),a(43)),Ne=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(i)))).hideSavingProgressMessage=null,a.state={selectedRowKeys:[]},a.onSelectChange=function(e){a.setState({selectedRowKeys:e})},a.onDelete=function(){var e=a.state.selectedRowKeys;a.props.onDelete(e)},a}return Object(S.a)(t,e),Object(E.a)(t,[{key:"componentWillUpdate",value:function(e){var t=this.props.ui.isSaving,a=e.ui.isSaving;!a&&t?(this.hideMessage(),Oe.a.success("Zmeny boli ulo\u017een\xe9",1),this.setState({selectedRowKeys:[]})):a&&(this.hideMessage(),this.hideSavingProgressMessage=Oe.a.loading("Prebieha ukladanie...",0))}},{key:"componentWillUnmount",value:function(){this.hideMessage()}},{key:"hideMessage",value:function(){this.hideSavingProgressMessage&&this.hideSavingProgressMessage(),this.hideSavingProgressMessage=null}},{key:"render",value:function(){var e=this.props,t=e.invoices,a=e.ui,n=e.history,i=this.state.selectedRowKeys,r={selectedRowKeys:i,onChange:this.onSelectChange},c=i.length>0;return o.a.createElement("div",{className:"fz-page-list"},o.a.createElement("div",{className:"fz-btn-group"},o.a.createElement(Ie.a,{type:"primary",icon:"form",size:"large",onClick:function(){var e=1,a=t.sort(ee("-id"));a[0]&&(e=Number(a[0].id)+1),n.push("/invoices/".concat(e))}},"Vystavi\u0165"),o.a.createElement(Ie.a,{icon:"delete",size:"large",disabled:!c,onClick:this.onDelete},"Vymaza\u0165")),o.a.createElement("div",{style:{background:"#fff",padding:24,marginTop:50,minHeight:280}},o.a.createElement(Ce.a,{rowKey:"id",dataSource:t,columns:Pe,rowSelection:r,loading:a.isFetching})))}}]),t}(r.Component),Pe=[{title:"Id fakt\xfary",dataIndex:"id",key:"id",render:function(e){return o.a.createElement("a",{href:"#/invoices/".concat(e)},e)}},{title:"Popis",dataIndex:"description",key:"description"},{title:"Odberate\u013e",dataIndex:"recipient.entity",key:"recipient"},{title:"Suma",dataIndex:"netPrice",key:"netPrice",render:function(e){return le.format(e)}},{title:"D\xe1tum vystavenia",dataIndex:"issueDate",key:"issueDate",render:function(e){return se.format(new Date(e))}},{title:"Splatnos\u0165",dataIndex:"dueDate",key:"dueDate",render:function(e){return se.format(new Date(e))}}],Te=Object(u.f)(Object(d.b)(function(e){return{invoices:function(e,t){switch(t){case he:return e;case ye:return e.filter(function(e){return e.completed});case Ee:return e.filter(function(e){return!e.completed})}}(e.invoices,e.visibilityFilter).map(function(e){return new ce.a(e)}),ui:e.invoiceUI}},function(e){return{onDelete:function(t){e(function(e){return function(t){return t({type:M,payload:e}),Q.default.deleteInvoices(e).then(function(e){t({type:H,payload:e})}).catch(function(e){throw t({type:W,payload:e}),e})}}(t))}}})(Ne)),xe=a(65),ze=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(i)))).hideSavingProgressMessage=null,a.state={selectedRowKeys:[]},a.onSelectChange=function(e){a.setState({selectedRowKeys:e})},a.onCreate=function(){a.props.onCreate(a.props.history)},a.onDelete=function(){var e=a.state.selectedRowKeys;a.props.onDelete(e)},a}return Object(S.a)(t,e),Object(E.a)(t,[{key:"componentWillUpdate",value:function(e){var t=this.props.ui.isSaving,a=e.ui.isSaving;!a&&t?(this.hideMessage(),Oe.a.success("Zmeny boli ulo\u017een\xe9",1),this.setState({selectedRowKeys:[]})):a&&(this.hideMessage(),this.hideSavingProgressMessage=Oe.a.loading("Prebieha ukladanie...",0))}},{key:"componentWillUnmount",value:function(){this.hideMessage()}},{key:"hideMessage",value:function(){this.hideSavingProgressMessage&&this.hideSavingProgressMessage(),this.hideSavingProgressMessage=null}},{key:"render",value:function(){var e=this.props,t=e.contacts,a=e.ui,n=this.state.selectedRowKeys,i={selectedRowKeys:n,onChange:this.onSelectChange},r=n.length>0;return o.a.createElement("div",{className:"fz-page-list"},o.a.createElement("div",{className:"fz-btn-group"},o.a.createElement(Ie.a,{type:"primary",icon:"form",size:"large",onClick:this.onCreate},"Prida\u0165"),o.a.createElement(Ie.a,{icon:"delete",size:"large",disabled:!r,onClick:this.onDelete},"Vymaza\u0165")),o.a.createElement("div",{style:{background:"#fff",padding:24,marginTop:50,minHeight:280}},o.a.createElement(Ce.a,{rowKey:"id",dataSource:t,columns:we,rowSelection:i,loading:a.isFetching})))}}]),t}(r.Component),we=[{title:"N\xe1zov",dataIndex:"entity",key:"entity",render:function(e,t){return o.a.createElement("a",{href:"#/contacts/".concat(t.id)},e)}},{title:"Meno",dataIndex:"name",key:"name"},{title:"E-mail",dataIndex:"email",key:"email"},{title:"Telef\xf3n",dataIndex:"phoneNr",key:"phoneNr"}],je=Object(d.b)(function(e){var t=function(e,t){switch(t){case he:return e;case ye:return e.filter(function(e){return e.completed});case Ee:return e.filter(function(e){return!e.completed})}}(e.contacts,e.visibilityFilter);return{contacts:Object(xe.a)(t),ui:e.contactUI}},function(e){return{onCreate:function(t){e(te(t))},onDelete:function(t){e(function(e){return function(t){return t({type:_,payload:e}),Q.default.deleteContacts(e).then(function(e){t({type:F,payload:e})}).catch(function(e){throw t({type:D,payload:e}),e})}}(t))}}})(ze),Ae=(a(479),a(278)),_e=(a(96),a(7)),Fe=(a(254),a(150)),De=a(21),Re=a(140),Ve=a(147),Ue=a.n(Ve),Le=(a(126),a(52)),Be=(a(577),a(153)),Ke=(a(235),a(106)),Me=(a(83),a(25)),He=(a(84),a(18)),We=(a(85),a(9)),qe=(a(156),a(44)),Ye=(a(82),a(26)),Xe=a(101),Ze=a.n(Xe),Je=(a(239),a(107)),Ge=function(e){function t(){return Object(y.a)(this,t),Object(g.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return o.a.createElement("span",null,this.props.value)}}]),t}(r.Component),$e=function(e){var t=e.keys,a=e.type,n=e.onItemAdd,i=e.onItemRemove,r=e.getFieldDecorator;return o.a.createElement(Me.a,{className:"fz-invoice-row"},o.a.createElement(He.a,{span:24},o.a.createElement("h4",{className:"fz-invoice-header"},"Polo\u017eky fakt\xfary"),o.a.createElement("table",{className:"fz-invoice-items-table"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("td",null,"Polo\u017eka"),o.a.createElement("td",null,"Cena"),o.a.createElement("td",null,"Jednotka"),o.a.createElement("td",null,"Mno\u017estvo"),a===ce.b.Taxable?o.a.createElement(o.a.Fragment,null,o.a.createElement("td",null,"DPH %"),o.a.createElement("td",null,"bez DPH"),o.a.createElement("td",null,"DPH"),o.a.createElement("td",null,"s DPH")):o.a.createElement("td",null,"Suma"),o.a.createElement("td",null))),o.a.createElement("tbody",null,t.map(function(e,n){return o.a.createElement("tr",{key:e},o.a.createElement("td",{className:"fz-invoice-items-table-col fz-invoice-items-table-col--big"},o.a.createElement(We.a.Item,null,r("itemsNames[".concat(e,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Vypl\u0148te n\xe1zov polo\u017eky!"}]})(o.a.createElement(Ye.a,null)))),o.a.createElement("td",{className:"fz-invoice-items-table-col"},o.a.createElement(We.a.Item,null,r("pricesPU[".concat(e,"]"),{validateTrigger:["onChange"],rules:[{type:"number",min:0,required:!0,whitespace:!0,message:"Vypl\u0148te cenu!"}]})(o.a.createElement(Je.a,{min:0,decimalSeparator:","})))),o.a.createElement("td",{className:"fz-invoice-items-table-col"},o.a.createElement(We.a.Item,null,r("units[".concat(e,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Vypl\u0148te jednotku!"}]})(o.a.createElement(Ye.a,null)))),o.a.createElement("td",{className:"fz-invoice-items-table-col"},o.a.createElement(We.a.Item,null,r("amounts[".concat(e,"]"),{validateTrigger:["onChange"],rules:[{type:"number",min:0,required:!0,whitespace:!0,message:"Vypl\u0148te mno\u017estvo!"}]})(o.a.createElement(Je.a,{min:0,decimalSeparator:","})))),a===ce.b.Taxable?o.a.createElement(o.a.Fragment,null,o.a.createElement("td",{className:"fz-invoice-items-table-col"},o.a.createElement(We.a.Item,null,r("taxRates[".concat(e,"]"),{validateTrigger:["onChange"],rules:[{type:"number",min:0,max:100,required:!0,whitespace:!0,message:"Vypl\u0148te DPH!"}]})(o.a.createElement(Je.a,{min:0,max:100,decimalSeparator:","})))),o.a.createElement("td",{className:"fz-invoice-items-table-col"},o.a.createElement(We.a.Item,null,r("netPrices[".concat(e,"]"),{})(o.a.createElement(Ge,null)))),o.a.createElement("td",{className:"fz-invoice-items-table-col"},o.a.createElement(We.a.Item,null,r("taxPrices[".concat(e,"]"),{})(o.a.createElement(Ge,null)))),o.a.createElement("td",{className:"fz-invoice-items-table-col"},o.a.createElement(We.a.Item,null,r("grossPrices[".concat(e,"]"),{})(o.a.createElement(Ge,null))))):o.a.createElement("td",null,o.a.createElement(We.a.Item,Qe,r("netPrices[".concat(e,"]"),{})(o.a.createElement(Ge,null)))),o.a.createElement("td",{className:"fz-invoice-items-table-col"},o.a.createElement(We.a.Item,Qe,t.length>1?o.a.createElement(_e.a,{className:"fz-dynamic-delete-button",type:"minus-circle-o",onClick:function(){return i(e)}}):null)))})),o.a.createElement("tfoot",null,o.a.createElement("tr",null,o.a.createElement("td",{colSpan:5},o.a.createElement(We.a.Item,Qe,o.a.createElement(Ie.a,{type:"dashed",onClick:n,style:{width:"60%"}},o.a.createElement(_e.a,{type:"plus"})," Pridaj polo\u017eku"))))))))},Qe={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:0}}},et=function(e){var t=e.getFieldDecorator;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Me.a,{className:"fz-invoice-row"},o.a.createElement(He.a,{sm:{span:6,offset:12}},o.a.createElement("span",null,"Pred z\u013eavou:")),o.a.createElement(He.a,{span:6},t("grossPrice",{})(o.a.createElement(Ge,null)))),o.a.createElement(Me.a,{className:"fz-invoice-row"},o.a.createElement(He.a,{sm:{span:6,offset:12}},o.a.createElement(We.a.Item,{label:"Z\u013eava"},t("discount",{rules:[{type:"number",required:!1,min:0,max:100,message:"Ch\xfdba \xfadaj o z\u013eave!"}]})(o.a.createElement(Je.a,{min:0,max:100})))),o.a.createElement(He.a,{span:6},o.a.createElement(We.a.Item,tt,t("discountPrice",{})(o.a.createElement(Ge,null))))),o.a.createElement(Me.a,{className:"fz-invoice-row"},o.a.createElement(He.a,{sm:{span:6,offset:12},className:"fz-invoice-sum"},o.a.createElement("span",null,"Kone\u010dn\xe1 suma:")),o.a.createElement(He.a,{span:6,className:"fz-invoice-sum"},t("netPrice",{})(o.a.createElement(Ge,null)))))},tt={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:0}}},at=(a(511),Ye.a.TextArea),nt=qe.a.Option,it={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},rt={xs:8,sm:12},ot=function(e){function t(){return Object(y.a)(this,t),Object(g.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.itemKeys,a=e.contacts,n=e.constantSymbols,i=e.isPayed,r=e.isSaving,c=e.type,l=e.onSubmit,s=e.onItemAdd,u=e.onItemRemove,m=e.onEntityCreate,d=e.onPdfClick,p=this.props.form.getFieldDecorator;return o.a.createElement(We.a,Object.assign({},it,{className:"fz-invoice-form",onSubmit:l}),o.a.createElement(Me.a,{gutter:24,className:"fz-invoice-row fz-invoice-row--slim"},o.a.createElement(He.a,rt,o.a.createElement(We.a.Item,{label:"Odberate\u013e"},p("recipient",{rules:[{required:!0,message:"Vyberte odberate\u013ea!"}]})(o.a.createElement(qe.a,null,a.map(function(e,t){return o.a.createElement(nt,{key:"rcpt_".concat(e.id),value:t},e.entity)}))))),o.a.createElement(He.a,rt,o.a.createElement("a",{"data-type":"recipient",style:{lineHeight:"40px"},onClick:m},o.a.createElement(_e.a,{type:"plus"}),"\xa0Nov\xfd odberate\u013e"))),o.a.createElement(Ke.a,null),o.a.createElement(Me.a,{className:"fz-invoice-row fz-invoice-row--slim"},o.a.createElement(He.a,rt,o.a.createElement(We.a.Item,{label:"Dod\xe1vate\u013e"},p("emitent",{rules:[{required:!0,message:"Vyberte dod\xe1vate\u013ea!"}]})(o.a.createElement(qe.a,null,a.reduce(function(e,t,a){if(t.isOwn){var n=o.a.createElement(nt,{key:"emt_".concat(t.id),value:a},t.entity);e.push(n)}return e},[]))))),o.a.createElement(He.a,rt,o.a.createElement("a",{"data-type":"emitent",style:{lineHeight:"40px",paddingLeft:12},onClick:m},o.a.createElement(_e.a,{type:"plus"}),"\xa0Nov\xfd dod\xe1vate\u013e"))),o.a.createElement(Ke.a,null),o.a.createElement(Me.a,{gutter:48,className:"fz-invoice-row"},o.a.createElement(He.a,rt,o.a.createElement(We.a.Item,{label:"Sp\xf4sob \xfahrady"},p("paymentType",{rules:[{required:!0,message:"Ch\xfdbaj\xfaci sp\xf4sob \xfahrady!"}]})(o.a.createElement(qe.a,null,o.a.createElement(nt,{value:ce.c.WireTransfer},"Prevodom"),o.a.createElement(nt,{value:ce.c.Card},"Kartou"),o.a.createElement(nt,{value:ce.c.Cash},"V hotovosti"),o.a.createElement(nt,{value:ce.c.CashOnDelivery},"Dobierka")))),o.a.createElement(We.a.Item,{label:"D\xe1tum splatnosti"},p("dueDate",{rules:[{required:!0,message:"Ch\xfdbaj\xfaci d\xe1tum splatnosti!"}]})(o.a.createElement(Be.a,{locale:Ze.a,format:"DD.MM.YYYY"}))),o.a.createElement(We.a.Item,{label:"D\xe1tum vystavenia"},p("issueDate",{rules:[{required:!0,message:"Vypl\u0148te d\xe1tum vystavenia!"}]})(o.a.createElement(Be.a,{locale:Ze.a,format:"DD.MM.YYYY"}))),o.a.createElement(We.a.Item,{label:"D\xe1tum \xfahrady"},p("paymentDate",{rules:[{required:!1,message:"Vypl\u0148te d\xe1tum \xfahrady!"}]})(o.a.createElement(Be.a,{locale:Ze.a,format:"DD.MM.YYYY"})))),o.a.createElement(He.a,rt,o.a.createElement(We.a.Item,{label:"Variabiln\xfd symbol"},p("variableSymbol",{rules:[{required:!0,message:"Vypl\u0148te variabiln\xfd symbol!"}]})(o.a.createElement(Ye.a,null))),o.a.createElement(We.a.Item,{label:"Kon\u0161tantn\xfd symbol"},p("constantSymbol",{rules:[{required:!0,message:"Vypl\u0148te kon\u0161tantn\xfd symbol!"}]})(o.a.createElement(qe.a,null,n.map(function(e){var t=Object(ge.a)(e,2),a=t[0],n=t[1];return o.a.createElement(nt,{key:a,value:a},a," - ",n)})))),o.a.createElement(We.a.Item,{label:"\u010c\xedslo objedn\xe1vky"},p("orderNr",{rules:[{required:!1,message:"Vypl\u0148te \u010d\xedslo objedn\xe1vky!"}]})(o.a.createElement(Ye.a,null))))),o.a.createElement(Me.a,{className:"fz-invoice-row"},o.a.createElement(He.a,{span:24},o.a.createElement(We.a.Item,{label:"Uhraden\xe1 (na z\xe1klade d\xe1tumu platby)"},o.a.createElement(Le.a,{checked:i})))),o.a.createElement(Me.a,{className:"fz-invoice-row"},o.a.createElement(He.a,{span:24},o.a.createElement(We.a.Item,{label:"Popis"},p("description",{rules:[{required:!1,message:"Vypl\u0148te popis!"}]})(o.a.createElement(Ye.a,{placeholder:"Popis objedn\xe1vky"}))))),o.a.createElement(Ke.a,null),o.a.createElement($e,{keys:t,type:c,getFieldDecorator:p,onItemAdd:s,onItemRemove:u}),o.a.createElement(et,{getFieldDecorator:p}),o.a.createElement(Me.a,{className:"fz-invoice-row"},o.a.createElement(He.a,null,o.a.createElement(We.a.Item,{label:"Text na konci fakt\xfary"},p("finalText",{rules:[{required:!1,message:"Ch\xfdba text!"}]})(o.a.createElement(at,{autosize:{minRows:4,maxRows:4}}))))),o.a.createElement(Me.a,{className:"fz-invoice-row"},o.a.createElement(He.a,{span:24,style:{textAlign:"right",margin:15}},o.a.createElement("div",{className:"fz-btn-group"},o.a.createElement(Ie.a,{icon:"file-pdf",size:"large",onClick:d},"PDF"),o.a.createElement(Ie.a,{type:"primary",icon:"save",size:"large",htmlType:"submit",loading:r},"Ulo\u017ei\u0165")))))}}]),t}(r.Component),ct=We.a.create({name:"invoice",onFieldsChange:function(e,t,a){e.onFieldsChange(t,a)},mapPropsToFields:function(e){var t=e.fields;return{recipient:We.a.createFormField(t.recipient),emitent:We.a.createFormField(t.emitent),paymentType:We.a.createFormField(t.paymentType),dueDate:We.a.createFormField(t.dueDate),issueDate:We.a.createFormField(t.issueDate),paymentDate:We.a.createFormField(t.paymentDate),variableSymbol:We.a.createFormField(t.variableSymbol),constantSymbol:We.a.createFormField(t.constantSymbol),orderNr:We.a.createFormField(t.orderNr),description:We.a.createFormField(t.description),finalText:We.a.createFormField(t.finalText),itemsNames:t.itemsNames.map(function(e){return We.a.createFormField(e)}),pricesPU:t.pricesPU.map(function(e){return We.a.createFormField(e)}),units:t.units.map(function(e){return We.a.createFormField(e)}),amounts:t.amounts.map(function(e){return We.a.createFormField(e)}),taxRates:t.taxRates&&t.taxRates.map(function(e){return We.a.createFormField(e)}),grossPrices:t.grossPrices.map(function(e){return We.a.createFormField(e)}),taxPrices:t.taxPrices.map(function(e){return We.a.createFormField(e)}),netPrices:t.netPrices.map(function(e){return We.a.createFormField(e)}),discount:We.a.createFormField(t.discount),grossPrice:We.a.createFormField(t.grossPrice),discountPrice:We.a.createFormField(t.discountPrice),netPrice:We.a.createFormField(t.netPrice)}},onValuesChange:function(e,t){e.onValuesChange&&e.onValuesChange(t)}})(ot),lt=(a(207),a(145)),st=function(){return o.a.createElement("div",null,o.a.createElement(lt.a,{size:"large"}),o.a.createElement("br",null))},ut=a(141),mt=function(){function e(){Object(y.a)(this,e)}return Object(E.a)(e,[{key:"toItemFields",value:function(e){return e.reduce(function(e,t,a){return e.itemsNames[a]={value:t.name},e.pricesPU[a]={value:t.pricePerUnit},e.units[a]={value:t.unit},e.amounts[a]={value:t.amount},e.taxRates[a]={value:t.taxRate},e.grossPrices[a]={value:le.format(t.grossPrice)},e.taxPrices[a]={value:le.format(t.taxPrice)},e.netPrices[a]={value:le.format(t.netPrice)},e},{itemsNames:[],pricesPU:[],units:[],amounts:[],taxRates:[],grossPrices:[],taxPrices:[],netPrices:[]})}},{key:"toFields",value:function(e){var t=e.recipient,a=e.emitent,n=e.items;return Object(De.a)({recipient:{value:t.entity},emitent:{value:a.entity},paymentType:{value:e.paymentType},dueDate:{value:e.dueDate&&Se()(e.dueDate)},issueDate:{value:e.issueDate&&Se()(e.issueDate)},paymentDate:{value:e.paymentDate&&Se()(e.paymentDate)},variableSymbol:{value:e.variableSymbol||e.id},constantSymbol:{value:e.constantSymbol},orderNr:{value:e.orderNr},description:{value:e.description||"Fakturujeme V\xe1m za dodan\xfd tovar alebo slu\u017eby:"},finalText:{value:e.finalText||"Tovar zost\xe1va a\u017e do \xfapln\xe9ho uhradenia majetkom dod\xe1vate\u013ea. Pri oneskorenej \xfahrade V\xe1m budeme \xfa\u010dtova\u0165 pen\xe1le vo v\xfd\u0161ke 0,05% za ka\u017ed\xfd za\u010dat\xfd de\u0148 ome\u0161kania."},discount:{value:e.discount},grossPrice:{value:le.format(e.grossPrice)},discountPrice:{value:le.format(e.discountPrice)},netPrice:{value:le.format(e.netPrice)}},this.toItemFields(n))}},{key:"toInvoiceItems",value:function(e,t){var a=t.itemsNames,n=t.pricesPU,i=t.units,r=t.amounts,o=t.taxRates,c=[];return e.forEach(function(e){c[e]=new ut.a({name:a[e].value,unit:i[e].value,pricePerUnit:n[e].value,amount:r[e].value,taxRate:o&&o[e].value})}),c}},{key:"toInvoice",value:function(e,t){return new ce.a({paymentType:t.paymentType.value,dueDate:t.dueDate.value&&t.dueDate.value.toDate(),issueDate:t.issueDate.value&&t.issueDate.value.toDate(),paymentDate:t.paymentDate.value&&t.paymentDate.value.toDate(),variableSymbol:t.variableSymbol.value,constantSymbol:t.constantSymbol.value,orderNr:t.orderNr.value,description:t.description.value,finalText:t.finalText.value,discount:t.discount.value,items:this.toInvoiceItems(e,t)})}}]),e}(),dt=[["0008","Platby za tovar (okrem platieb pod symbolmi 010x)"],["0028","Platby za dod\xe1vky investi\u010dnej povahy"],["0038","Prostriedky na mzdy"],["0058","Pen\xe1le, poplatky z ome\u0161kania, in\xe9 majetkov\xe9 sankcie, n\xe1hrady \u0161k\xf4d"],["0068","Prevody prostriedkov na mzdy a ostatn\xe9 osobn\xe9 n\xe1klady"],["0078","Tr\u017eby za predan\xfd tovar a poskytnut\xe9 stravovanie"],["0108","Platby za po\u013enohospod\xe1rske v\xfdrobky"],["0138","Zr\xe1\u017eky z miezd"],["0158","Hospod\xe1rsko operat\xedvne v\xfddavky"],["0168","Spl\xe1tky \xfaverov a p\xf4\u017ei\u010diek"],["0178","Tr\u017eby za poskytnut\xe9 slu\u017eby"],["0308","Platby za slu\u017eby"],["0358","Platby ur\u010den\xe9 na v\xfdplaty v hotovosti prostredn\xedctvom p\xf4\u0161t"],["0558","Finan\u010dn\xe9 platby ostatn\xe9"],["0858","Prechodne poskytnut\xe9 p\xf4\u017ei\u010dky"],["0938","D\xe1vky soci\xe1lneho zabezpe\u010denia"],["0968","Ostatn\xe9 prevody medzi \xfa\u010dtami toho ist\xe9ho klienta"],["1018","Pr\xedjmy z podnikania a vlastn\xedctva majetku - vo vz\u0165ahu k \u0160R"],["1118","Administrat\xedvne a in\xe9 poplatky a platby - vo vz\u0165ahu k \u0160R"],["1144","Be\u017en\xe1 z\xe1loha dane"],["1144","Platba be\u017en\xe1, preddavok na da\u0148"],["1148","Be\u017en\xe1 z\xe1loha dane"],["1318","Pr\xedjmy zo spl\xe1c. p\xf4\u017ei\u010d. poskytnut\xfdch zo \u0160R a z predaja \xfa\u010das. majetku \u0161t\xe1tu"],["1344","Do\xfa\u010dtovanie dan\xed za predch\xe1dzaj\xface zda\u0148ovacie obdobie"],["1348","Do\xfa\u010dtovanie dan\xed za predch\xe1dzaj\xface zda\u0148ovacie obdobie"],["1548","Dodato\u010dn\xe9 da\u0148ov\xe9 priznanie"],["1744","Vy\xfa\u010dtovanie dane za posledn\xe9 zda\u0148ovacie obdobie DPFO a DPPO"],["1748","Vy\xfa\u010dtovanie dane za posledn\xe9 zda\u0148ovacie obdobie (DPFO, DPPO)"],["1944","Z\xfa\u010dtovanie rozdielov preddavkov dane z pr\xedjmu zo z\xe1vislej \u010dinnosti, dane vyberanej zr\xe1\u017ekou a zabezpe\u010den\xed dane"],["1948","Z\xfa\u010dt. rozdielov predd. na da\u0148 z pr\xedjmov zo z\xe1v. \u010dinnosti, zr\xe1\u017eky dan\xed"],["2018","Ostatn\xe9 pr\xedjmy vo vz\u0165ahu k \u0160R"],["2058","N\xe1kup cenn\xfdch papierov (akcie, dlhopisy, zmenky)"],["2144","Dodato\u010dne vyruben\xe1 da\u0148"],["2148","Dodato\u010dne vyruben\xe1 da\u0148"],["2558","\xdahrady poistn\xfdch plnen\xed pois\u0165ov\u0148ami"],["2848","Pau\u0161. da\u0148 pod\u013ea \xa715Z.\u010d. 366/1999 Z.z. o dan. z pr\xedjmov"],["3058","Predaj cenn\xfdch papierov"],["3118","Poistn\xe9 a pr\xedspevok zamestn\xe1vate\u013ea do pois\u0165ovn\xed a N\xdaP"],["3148","Pen\xe1le z kontroly"],["3344","Sank\u010dn\xfd \xfarok, pen\xe1le"],["3348","Pen\xe1le zo spr\xe1vy"],["3548","Pen\xe1le vyruben\xe9 da\u0148ov\xfdmi organmi z kontroly"],["3558","Platby poistn\xe9ho pois\u0165ovniam"],["3718","N\xe1jomn\xe9 za pren\xe1jom - vo vz\u0165ahu k \u0160R"],["3748","Pen\xe1le vyruben\xe9 da\u0148ov\xfdmi org\xe1nmi zo spr\xe1vy"],["4058","Vypl\xe1canie v\xfdnosov z cenn. papierov, splatnos\u0165 menovitej hodnoty"],["4948","Vr\xe1tenie dane - nepriame dane"],["5058","Ostatn\xe9 obchody s cenn\xfdmi papiermi"],["5118","Spl\xe1canie \xfarokov a ostatn\xe9 platby s\xfavisiace s \xfavermi - vo vz\u0165ahu k \u0160R"],["5144","Zv\xfd\u0161enie dane"],["5148","Zv\xfd\u0161enie dane"],["5344","Nadmern\xfd odpo\u010det"],["5348","N\xe1rok na odpo\u010det dane"],["5748","Dodato\u010dn\xe9 da\u0148ov\xe9 priznanie"],["5918","Spl\xe1canie dom. istiny, spl\xe1c. v\xfdnosy z cenn\xfdch papierov - vo vz\u0165ahu k \u0160R"],["5944","Zv\xfd\u0161enie dane - da\u0148ov\xe1 in\u0161pekcia"],["5948","Zv\xfd\u0161enie dane - da\u0148ov\xe1 in\u0161pekcia"],["6144","Dodato\u010dn\xe1 platba z da\u0148ovej in\u0161pekcie"],["6148","Dodato\u010dn\xe1 platba z da\u0148ovej in\u0161pekcie"],["6344","Pokuta z kontroly"],["6348","Pokuta z kontroly"],["6544","Pokuta zo spr\xe1vy"],["6548","Pokuta zo spr\xe1vy"],["6744","Pokuty vyruben\xe9 da\u0148ovou in\u0161pekciou"],["6748","Pokuty vyruben\xe9 da\u0148ovou in\u0161pekciou"],["6948","Pokuty vyruben\xe9 da\u0148ov\xfdm org\xe1nom, kt. nie s\xfa pr\xedjmom osobn\xe9ho \xfa\u010dtu \u0160R"],["7144","Sank\u010dn\xfd \xfarok z da\u0148ovej in\u0161pekcie"],["7148","Pen\xe1le z da\u0148ovej in\u0161pekcie"],["7344","\xdarok pri odklade platenia"],["7348","\xdarok pri odklade platenia"],["7544","Exeku\u010dn\xe9 n\xe1klady"],["7548","Exeku\u010dn\xe9 n\xe1klady"],["7748","\xdarok platen\xfd da\u0148ov\xe9mu subjektu za oneskorenie vr\xe1tenia preplatku"],["7944","Blokov\xe9 pokuty vyruben\xe9 da\u0148ov\xfdm \xfaradom"],["7948","Blokov\xe9 pokuty vyruben\xe9 da\u0148ov\xfdm \xfaradom"],["8144","Platba (\xfa\u010dtovan\xe1 s\xfa\u010dasne s predpisom)"],["8148","Platba (\xfa\u010dtovan\xe1 s\xfa\u010dasne s predpisom)"],["8748","Platba na vyrovnanie preplatku"]],pt=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).fieldsMapper=new mt,a.formRef=void 0,a.hideSavingMessage=null,a.state={itemKeys:[],fields:{},type:ce.b.NonTax},a.handleFieldsChange=function(e,t){var n=Object(Re.a)(a),i=n.fieldsMapper,r=n.state,o=a.props.contacts[t.emitent.value];a.setState(function(e){e.fields;var a=o?o.taxLegalId?ce.b.Taxable:ce.b.NonTax:r.type,n=i.toInvoice(r.itemKeys,t);n.type=a;var c=i.toFields(n),l=c.grossPrice,s=c.discountPrice,u=c.netPrice,m=c.grossPrices,d=c.taxPrices,p=c.netPrices;return{type:a,fields:Object(De.a)({},t,{grossPrice:l,discountPrice:s,netPrice:u,grossPrices:m,taxPrices:d,netPrices:p})}})},a.handleSubmit=function(e){e.preventDefault();var t=a.getInvoiceFromFields();a.props.onInvoiceSave(t,a.props.history)},a.handleItemAdd=function(){var e=a.state,t=e.itemKeys,n=e.fields;(t=[].concat(Object(xe.a)(t),[0===t.length?0:t[t.length-1]+1])).forEach(function(e){["itemsNames","pricesPU","units","amounts","taxRates","grossPrices","taxPrices","netPrices"].forEach(function(t){n[t][e]||(n[t][e]={value:null})})}),a.setState({itemKeys:t,fields:n})},a.handleItemRemove=function(e){var t=a.state.itemKeys;1!==t.length&&a.setState({itemKeys:t.filter(function(t){return t!==e})})},a.handleEntityCreate=function(e){e.preventDefault();var t=!1,n=a.getInvoiceFromFields();e.target instanceof HTMLElement&&("emitent"===e.target.dataset.type&&(t=!0));a.props.onCreateEntity(n,t,a.props.history)},a.getInvoiceFromFields=function(){var e=a.state,t=e.itemKeys,n=e.fields,i=e.type,r=a.props.contacts,o=a.fieldsMapper.toInvoice(t,n),c=[];return o.type=i,o.emitent=r[n.emitent.value],o.recipient=r[n.recipient.value],o.items.forEach(function(e){c.push(e)}),o.items=c,Object.entries(a.props.invoice).forEach(function(e){var t=Object(ge.a)(e,2),a=t[0],n=t[1];"undefined"===typeof o[a]&&(o[a]=n)}),o},a.makePdf=function(){a.formRef.props.form.validateFieldsAndScroll(function(e,t){if(!e){var n=a.getInvoiceFromFields();a.props.onPdfMake(n,a.props.history)}})},a}return Object(S.a)(t,e),Object(E.a)(t,[{key:"componentWillUpdate",value:function(e){var t=this.props.ui.isSaving,a=e.ui.isSaving;!a&&t?this.hideMessage():a&&(this.hideMessage(),this.hideSavingMessage=Oe.a.loading("Uklad\xe1m fakt\xfaru...",0))}},{key:"componentWillUnmount",value:function(){this.hideMessage()}},{key:"hideMessage",value:function(){this.hideSavingMessage&&this.hideSavingMessage(),this.hideSavingMessage=null}},{key:"componentWillMount",value:function(){this.handlePropsChange(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.handlePropsChange(e)}},{key:"handlePropsChange",value:function(e){var t,a=this,n=e.invoice,i=(t=n.items.length,Array.from({length:Math.max(0,t)},function(e,t){return t})),r=this.fieldsMapper.toFields(n);this.setState({itemKeys:i,fields:r,type:n.type},function(){0===i.length&&a.handleItemAdd()})}},{key:"render",value:function(){var e=this,t=this.state,a=t.itemKeys,n=t.fields,i=t.type,r=this.props,c=r.contacts,l=r.invoice,s=r.ui,u=r.history;return o.a.createElement("div",null,o.a.createElement(Fe.a,{onBack:function(){return u.goBack()},title:"Fakt\xfara ".concat(l.id),subTitle:""}),o.a.createElement(Ue.a,{classNamePrefix:"fz-loading-overlay_",active:s.isFetching,spinner:o.a.createElement(st,null),text:"Nahr\xe1vam fakt\xfaru..."},o.a.createElement(ct,{wrappedComponentRef:function(t){e.formRef=t},fields:n,itemKeys:a,type:i,contacts:c,constantSymbols:dt,isPayed:null!=l.paymentDate,isSaving:s.isSaving,onSubmit:this.handleSubmit,onPdfClick:this.makePdf,onItemAdd:this.handleItemAdd,onItemRemove:this.handleItemRemove,onEntityCreate:this.handleEntityCreate,onFieldsChange:this.handleFieldsChange}),o.a.createElement(Ae.a,{className:"fz-back-top"},o.a.createElement("div",{className:"fz-back-top-inner"},o.a.createElement(_e.a,{type:"up"})))))}}]),t}(r.Component),vt=Object(u.f)(Object(d.b)(function(e,t){var a=null,n=t.match;if(n){var i=n.params.id;a=(a=e.invoices.find(function(e){return e.id===i}))||{id:i}}return{invoice:new ce.a(a),contacts:Object(xe.a)(e.contacts),ui:e.invoiceUI}},function(e){return{onInvoiceSave:function(t,a){e(fe(t))},onPdfMake:function(t,a){e(function(e,t){return function(t){return t(fe(e)).then(function(){return(new pe).makeInvoicePdf(e)})}}(t))},onCreateEntity:function(t,a,n){e(function(e,t,a){return function(n){return n(fe(e)).then(function(){return n(te(a,t))})}}(t,a,n))}}})(pt)),ft=a(271),ht=a.n(ft),yt=(a(154),a(102)),Et=[["365.bank (Po\u0161tov\xe1 banka, a.s. od\u0161tepn\xfd z\xe1vod)","6500","POBNSKBA"],["BANCO COFIDIS, S.A., pobo\u010dka zahr. banky","8400",""],["BKS BANK AG, pobo\u010dka zahr. banky","8420","BFKKSKBB"],["\u010ceskoslovensk\xe1 obchodn\xe1 banka, a.s.","7500","CEKOSKBX"],["Citibank Europe plc, pobo\u010dka zahr. banky","8130","CITISKBA"],["COMMERZBANK Aktiengesellschaft, pobo\u010dka zahr. banky","8050","COBASKBX"],["\u010cSOB stavebn\xe1 sporite\u013e\u0148a, a.s.","8170","KBSPSKBX"],["EXIMBANKA SR","8160","EXSKSKBX"],["Fio banka, a.s., pobo\u010dka zahr. banky","8330","FIOZSKBA"],["ING Bank N.V., pobo\u010dka zahr. banky","7300","INGBSKBX"],["J&T BANKA, a.s., pobo\u010dka zahr. banky","8320","JTBPSKBA"],["KDB Bank Europe Ltd, pobo\u010dka zahran. banky","8430","KODBSKBX"],["Komer\u010dn\xed banka, a.s., pobo\u010dka zahr. banky","8100","KOMBSKBA"],["mBank S.A., pobo\u010dka zahr. banky","8360","BREXSKBX"],["N\xe1rodn\xe1 banka Slovenska","0720","NBSBSKBX"],["Oberbank AG, pobo\u010dka zahr. banky v SR","8370","OBKLSKBA"],["OTP banka Slovensko, a.s.","5200","OTPVSKBX"],["Po\u0161tov\xe1 banka, a.s.","6500","POBNSKBA"],["Prima\xa0banka Slovensko, a.s. (DEXIA)","5600","KOMASK2X"],["Privatbanka, a.s.","8120","BSLOSK22"],["Prv\xe1 stavebn\xe1 sporite\u013e\u0148a, a.s.","5900","PRVASKBA"],["Raiffeisen BANK (Tatra banka a.s., od\u0161tepn\xfd z\xe1vod)","1100","TATRSKBX"],["Slovensk\xe1 sporite\u013e\u0148a, a.s.","0900","GIBASKBX"],["Slovensk\xe1 z\xe1ru\u010dn\xe1 a rozvojov\xe1 banka, a.s.","3000","SLZBSKBA"],["\u0160t\xe1tna pokladnica","8180","SPSRSKBA"],["Tatra banka, a.s.","1100","TATRSKBX"],["UniCredit Bank Slovakia, a.s.","1111","UNCRSKBX"],["V\xdaB banka, a.s.","0200","SUBASKBX"],["W\u0171stenrot stavebn\xe1 sporite\u013e\u0148a, a.s.","7930","WUSTSKBA"]],gt=(a(524),a(105)),bt={xs:8,sm:12},St=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(i)))).onBankChange=function(e){var t,n=a.props.fieldPrefix,i=void 0===n?"":n,r=Object(ge.a)(Et[e],3),o=r[0],c=r[1],l=r[2];a.props.form.setFieldsValue((t={},Object(gt.a)(t,"".concat(i,"bankName"),o),Object(gt.a)(t,"".concat(i,"bankCode"),c),Object(gt.a)(t,"".concat(i,"swift"),l),t))},a}return Object(S.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.contact,n=e.isOwn,i=e.fieldPrefix,r=void 0===i?"":i,c=t.getFieldDecorator,l=Et.findIndex(function(e){return e[1]===a.bankCode});return o.a.createElement(Me.a,{className:"fz-contact-row"},o.a.createElement(He.a,bt,o.a.createElement(We.a.Item,{label:"Zoznam b\xe1nk"},o.a.createElement(qe.a,{onChange:this.onBankChange,defaultValue:l>-1?l:void 0},Et.map(function(e,t){var a=Object(ge.a)(e,2),n=a[0],i=a[1];return o.a.createElement(qe.a.Option,{key:i,value:t},i," - ",n)}))),o.a.createElement(We.a.Item,{label:"N\xe1zov banky"},c("".concat(r,"bankName"),{rules:[{required:n,message:"Uve\u010fte n\xe1zov banky!"}],initialValue:a.bankName})(o.a.createElement(Ye.a,null))),o.a.createElement(We.a.Item,{label:"K\xf3d banky"},c("".concat(r,"bankCode"),{rules:[{required:n,message:"Uve\u010fte k\xf3d banky!"}],initialValue:a.bankCode})(o.a.createElement(Ye.a,null))),o.a.createElement(We.a.Item,{label:"SWIFT"},c("".concat(r,"swift"),{rules:[{required:n,message:"Uve\u010fte SWIFT!"}],initialValue:a.swift})(o.a.createElement(Ye.a,null))),o.a.createElement(We.a.Item,{label:"IBAN"},c("".concat(r,"iban"),{rules:[{required:n,message:"Uve\u010fte IBAN!"}],initialValue:a.iban})(o.a.createElement(Ye.a,null))),o.a.createElement(We.a.Item,{label:"\u010c\xedslo \xfa\u010dtu"},c("".concat(r,"bankAccount"),{rules:[{required:n,message:"Uve\u010fte \u010d\xedslo \xfa\u010dtu!"}],initialValue:a.bankAccount})(o.a.createElement(Ye.a,null)))))}}]),t}(r.Component),kt={xs:8,sm:12},Ct=function(e){function t(){return Object(y.a)(this,t),Object(g.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.contact,n=e.fieldPrefix,i=void 0===n?"":n,r=t.getFieldDecorator;return o.a.createElement(Me.a,{gutter:24,className:"fz-contact-row"},o.a.createElement(He.a,kt,o.a.createElement(We.a.Item,{label:"Firma"},r("".concat(i,"entity"),{rules:[{required:!0,message:"Uve\u010fte n\xe1zov firmy!"}],initialValue:a.entity})(o.a.createElement(Ye.a,null))),o.a.createElement(We.a.Item,{label:"Ulica"},r("".concat(i,"street"),{rules:[{required:!0,message:"Uve\u010fte ulicu!"}],initialValue:a.street})(o.a.createElement(Ye.a,null))),o.a.createElement(We.a.Item,{label:"PS\u010c"},r("".concat(i,"zipCode"),{rules:[{required:!0,message:"Uve\u010fte PS\u010c!"}],initialValue:a.zipCode})(o.a.createElement(Ye.a,null))),o.a.createElement(We.a.Item,{label:"Mesto"},r("".concat(i,"city"),{rules:[{required:!0,message:"Uve\u010fte mesto!"}],initialValue:a.city})(o.a.createElement(Ye.a,null))),o.a.createElement(We.a.Item,{label:"Krajina"},r("".concat(i,"country"),{rules:[{required:!0,message:"Uve\u010fte krajinu!"}],initialValue:a.country||"Slovensko"})(o.a.createElement(Ye.a,null)))),o.a.createElement(He.a,kt,o.a.createElement(We.a.Item,{label:"I\u010cO"},r("".concat(i,"legalId"),{rules:[{required:!0,message:"Uve\u010fte I\u010cO!"}],initialValue:a.legalId})(o.a.createElement(Ye.a,null))),o.a.createElement(We.a.Item,{label:"DI\u010c"},r("".concat(i,"taxId"),{rules:[{required:!0,message:"Uve\u010fte DI\u010c!"}],initialValue:a.taxId})(o.a.createElement(Ye.a,null))),o.a.createElement(We.a.Item,{label:"I\u010c DPH"},r("".concat(i,"taxLegalId"),{rules:[{required:!1,message:"Uve\u010fte I\u010c DPH!"}],initialValue:a.taxLegalId})(o.a.createElement(Ye.a,null)))))}}]),t}(r.Component),It={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},Ot={xs:8,sm:12},Nt=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).state={isOwn:!1,expandBankSection:!1,expandContactSection:!1},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){if(e)return Oe.a.error("Formul\xe1r obsahuje chyby!"),!1;a.props.onContactSave(Object(De.a)({},a.props.contact,t),a.props.history)})},a.onBankChange=function(e){var t=Object(ge.a)(Et[e],3),n=t[0],i=t[1],r=t[2];a.props.form.setFieldsValue({bankName:n,bankCode:i,swift:r})},a.onIsOwnedChange=function(e){var t=e.target.checked;a.setState({isOwn:t,expandBankSection:!0})},a.toggleBankSection=function(){var e=a.state,t=e.isOwn,n=e.expandBankSection;t||a.setState({expandBankSection:!n})},a.toggleContactSection=function(){var e=a.state.expandContactSection;a.setState({expandContactSection:!e})},a.state.isOwn=!!e.contact.isOwn,a}return Object(S.a)(t,e),Object(E.a)(t,[{key:"componentDidUpdate",value:function(e){e.contact.isOwn!==this.props.contact.isOwn&&this.setState({isOwn:this.props.contact.isOwn})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isOwn,n=t.expandBankSection,i=t.expandContactSection,r=this.props,c=r.form,l=r.contact,s=r.ui,u=c.getFieldDecorator;return o.a.createElement("div",null,o.a.createElement(Fe.a,{onBack:function(){return e.props.history.goBack()},title:"Kontakt #".concat(l.id),subTitle:""}),o.a.createElement(Ue.a,{classNamePrefix:"fz-loading-overlay_",active:s.isFetching,spinner:o.a.createElement(st,null),text:"Nahr\xe1vam kontakt..."},o.a.createElement(We.a,Object.assign({},It,{className:"fz-contact-form",onSubmit:this.handleSubmit}),o.a.createElement(Ct,{form:this.props.form,contact:l}),o.a.createElement(Me.a,{className:"fz-contact-row"},o.a.createElement(He.a,Ot,o.a.createElement(We.a.Item,{label:o.a.createElement("span",null,"Moja firma (Dod\xe1vate\u013e)\xa0",o.a.createElement(yt.a,{title:"Za\u0161krtnite, ak chcete vystavova\u0165 fakt\xfary na t\xfato firmu."},o.a.createElement(_e.a,{type:"question-circle-o"})))},u("isOwn",{rules:[{type:"boolean",required:!1,message:"Ch\xfdbaj\xfaci \xfadaj!"}],initialValue:a,valuePropName:"checked"})(o.a.createElement(Le.a,{onChange:this.onIsOwnedChange}))))),o.a.createElement(Me.a,{className:"fz-contact-row"},o.a.createElement(He.a,Ot,o.a.createElement("a",{className:"fz-contact-row-expander",onClick:this.toggleBankSection},"Bankov\xe9 spojenie"," ",o.a.createElement(_e.a,{type:n?"up":"down"})))),(a||n)&&o.a.createElement("div",{className:"fz-contact-row fz-contact-row--expanded"},o.a.createElement("h4",{className:"fz-contact-header fz-contact-header--expanded"},"Bankov\xe9 spojenie"),o.a.createElement(St,{form:this.props.form,isOwn:a,contact:l})),o.a.createElement(Me.a,{className:"fz-contact-row"},o.a.createElement(He.a,Ot,o.a.createElement("a",{className:"fz-contact-row-expander",onClick:this.toggleContactSection},"Kontaktn\xe1 osoba"," ",o.a.createElement(_e.a,{type:i?"up":"down"})))),i&&o.a.createElement("div",{className:"fz-contact-row fz-contact-row--expanded"},o.a.createElement("h4",{className:"fz-contact-header fz-contact-header--expanded"},"Kontaktn\xe1 osoba"),o.a.createElement(Me.a,null,o.a.createElement("div",{className:"fz-contact-row"},o.a.createElement(He.a,Ot,o.a.createElement(We.a.Item,{label:"Meno"},u("name",{rules:[{required:!1,message:"Uve\u010fte meno!"}],initialValue:l.name})(o.a.createElement(Ye.a,null))),o.a.createElement(We.a.Item,{label:"Email"},u("email",{rules:[{type:"email",message:"Zadan\xfd text nie je platn\xfd email!"}],initialValue:l.email})(o.a.createElement(Ye.a,null))),o.a.createElement(We.a.Item,{label:"Tel. \u010d\xedslo"},u("phoneNr",{rules:[{required:!1,message:"Uve\u010fte tel. \u010d\xedslo!"}],initialValue:l.phoneNr})(o.a.createElement(Ye.a,null))))))),o.a.createElement(Me.a,{className:"fz-contact-row"},o.a.createElement(He.a,{span:24,style:{textAlign:"right",margin:15}},o.a.createElement("div",{className:"fz-btn-group"},o.a.createElement(Ie.a,{type:"primary",icon:"save",size:"large",htmlType:"submit",loading:s.isSaving},"Ulo\u017ei\u0165")))))))}}]),t}(r.Component),Pt=We.a.create({name:"new_contact"})(Nt),Tt=a(117),xt=Object(u.f)(Object(d.b)(function(e,t){var a=null,n=t.match,i=t.location;if(n){var r=n.params.id,o=ht.a.parse(i.search);(a=e.contacts.find(function(e){return e.id===r}))||(a={id:r,isOwn:!!o.isOwn})}return{contact:new Tt.a(a),ui:e.contactUI}},function(e){return{onContactSave:function(t,a){e(function(e,t){return function(a){return a({type:w,payload:{}}),Q.default.saveContact(e).then(function(e){a({type:j,payload:e}),t.length?t.goBack():t.replace("/contacts")}).catch(function(e){throw a({type:A,payload:e}),e})}}(t,a))}}})(Pt)),zt=(a(579),a(277)),wt=(a(578),a(193)),jt=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(i)))).hideProgressMessage=null,a.handleExport=function(){a.props.onArchiveExport()},a.handleImport=function(e){var t=new FileReader;return t.onload=function(e){a.props.onArchiveImport(t.result)},t.readAsText(e),!1},a}return Object(S.a)(t,e),Object(E.a)(t,[{key:"componentWillUpdate",value:function(e){var t=e.ui;t.isFetching?(this.hideMessage(),this.hideProgressMessage=Oe.a.loading("Vykon\xe1vam z\xe1lohu...",0)):t.isSaving?(this.hideMessage(),this.hideProgressMessage=Oe.a.loading("Obnovujem zo z\xe1lohy...",0)):t.lastError?(this.hideMessage(),Oe.a.error(t.lastError.message)):this.hideMessage()}},{key:"componentWillUnmount",value:function(){this.hideMessage()}},{key:"hideMessage",value:function(){this.hideProgressMessage&&this.hideProgressMessage(),this.hideProgressMessage=null}},{key:"render",value:function(){return o.a.createElement("div",{className:"fz-page-list"},o.a.createElement(wt.a,{style:{marginBottom:20}},o.a.createElement("p",null,"Archiv\xe1cia datab\xe1zy do s\xfaboru. Odpor\xfa\u010da sa vykon\xe1va\u0165 t\xfato \u010dinnos\u0165 pravidelne."),o.a.createElement("div",null,o.a.createElement(Ie.a,{onClick:this.handleExport},o.a.createElement(_e.a,{type:"download"})," Archivuj do s\xfaboru"))),o.a.createElement(wt.a,null,o.a.createElement("p",null,"Na\u010d\xedtanie datab\xe1zy z arch\xedvu."),o.a.createElement("p",null,"Upozornenie: Va\u0161e d\xe1ta m\xf4\u017eu by\u0165 prep\xedsan\xe9 d\xe1tami z arch\xedvu."),o.a.createElement("div",null,o.a.createElement(zt.a,{accept:".json",beforeUpload:this.handleImport,showUploadList:!1},o.a.createElement(Ie.a,null,o.a.createElement(_e.a,{type:"upload"})," Na\u010d\xedtaj z arch\xedvu")))))}}]),t}(r.Component),At=Object(u.f)(Object(d.b)(function(e){return{ui:e.ui}},function(e){return{onArchiveExport:function(){e(function(e){return e({type:Z,payload:{}}),Promise.all([e(ae()),e(ve())]).then(function(t){var a=Object(ge.a)(t,2),n=a[0],i=a[1];e({type:J,payload:{}});var r=new Blob([JSON.stringify({contacts:n,invoices:i})],{type:"application/json"});ke(r,"fz_".concat(Se()().format("YYYY-MM-DD_HH-mm-ss"),".json"))}).catch(function(t){throw e({type:G,payload:t}),t})})},onArchiveImport:function(t){e(function(e){return function(t){t({type:q,payload:{}});try{var a=JSON.parse(e);if(!Array.isArray(a.contacts)||!Array.isArray(a.invoices))throw new Error("Neplatn\xfd typ arch\xedvu");return Promise.all([Q.default.saveContacts(a.contacts),Q.default.saveInvoices(a.invoices)]).then(function(e){var a=Object(ge.a)(e,2),n=a[0],i=a[1];return t({type:Y,payload:{contacts:n,invoices:i}})}).catch(function(e){throw console.log(e),t({type:X,payload:new Error("Nastala chyba pri importe arch\xedvu!")}),e})}catch(n){return console.log(n),t({type:X,payload:new Error("Nastala chyba pri importe arch\xedvu!")}),Promise.reject(n)}}}(t))}}})(jt)),_t=(a(568),k.a.Header),Ft=k.a.Content,Dt=k.a.Footer,Rt=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(i)))).onMenuClicked=function(e){var t=e.key;a.props.history.replace("/".concat(t))},a}return Object(S.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props.location.pathname,t="";return e.includes("invoice")?t="invoices":e.includes("contact")?t="contacts":e.includes("archive")&&(t="archive"),o.a.createElement(k.a,{className:"fz-layout"},o.a.createElement(_t,null,o.a.createElement("div",{className:"fz-logo"}),o.a.createElement(h.b,{theme:"dark",mode:"horizontal",defaultSelectedKeys:[t],selectedKeys:[t],onClick:this.onMenuClicked,style:{lineHeight:"64px"}},o.a.createElement(h.b.Item,{key:"invoices"},"Fakt\xfary"),o.a.createElement(h.b.Item,{key:"contacts"},"Kontakty"),o.a.createElement(h.b.Item,{key:"archive"},"Arch\xedv"))),o.a.createElement(Ft,{className:"fz-layout-content"},o.a.createElement(u.d,null,o.a.createElement(u.b,{exact:!0,path:"/invoices/:id",component:vt}),o.a.createElement(u.b,{exact:!0,path:"/invoices",component:Te}),o.a.createElement(u.b,{exact:!0,path:"/contacts/:id",component:xt}),o.a.createElement(u.b,{exact:!0,path:"/contacts",component:je}),o.a.createElement(u.b,{exact:!0,path:"/archive",component:At}))),o.a.createElement(Dt,{className:"fz-layout-footer"},o.a.createElement("div",{className:"fz-footer-brand"},o.a.createElement("span",null,"\xa92019 FakturaZdarma.sk")),o.a.createElement("div",null,o.a.createElement("a",{href:"https://www.facebook.com/FakturaZdarma/",className:"fcb-find-us"}))))}}]),t}(r.Component),Vt=Object(u.f)(Rt),Ut=(a(569),function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(i)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||a.props.onLogIn(t.email,t.password,a.props.history)})},a}return Object(S.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return o.a.createElement(We.a,{onSubmit:this.handleSubmit,className:"fz-login-form"},o.a.createElement(We.a.Item,null,e("email",{rules:[{required:!0,message:"Please input your email!"}]})(o.a.createElement(Ye.a,{prefix:o.a.createElement(_e.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email"}))),o.a.createElement(We.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(o.a.createElement(Ye.a,{prefix:o.a.createElement(_e.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),o.a.createElement(We.a.Item,null,e("remember",{valuePropName:"checked",initialValue:!0})(o.a.createElement(Le.a,null,"Remember me")),o.a.createElement("a",{className:"fz-login-form-forgot",href:""},"Forgot password"),o.a.createElement(Ie.a,{type:"primary",htmlType:"submit",className:"fz-login-form-button"},"Log in"),"Or ",o.a.createElement("a",{href:""},"register now!")))}}]),t}(r.Component)),Lt=We.a.create({name:"normal_login"})(Ut),Bt=(a(570),function(e){function t(){return Object(y.a)(this,t),Object(g.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"fz-login-page"},o.a.createElement(Lt,this.props))}}]),t}(r.Component)),Kt=Object(u.f)(Object(d.b)(function(e){return Object(De.a)({},e.login)},function(e){return{onLogIn:function(t,a,n){e(function(e,t,a){return function(a){return a({type:C,payload:{}}),Q.default.doLogin(e,t).then(function(){a({type:I,payload:{}}),ae()}).catch(function(e){throw a({type:O,payload:e}),e})}}(t,a))}}})(Bt)),Mt=a(280),Ht=-1,Wt=1,qt=2,Yt={loginState:qt},Xt=function(e){function t(){return Object(y.a)(this,t),Object(g.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.component,a=e.loginState,n=Object(Mt.a)(e,["component","loginState"]);return o.a.createElement(u.b,Object.assign({},n,{render:function(e){return a===qt?o.a.createElement(t,e):o.a.createElement(u.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}}]),t}(r.Component),Zt=Object(d.b)(function(e){return Object(De.a)({},e.login)},{})(Xt),Jt={lastError:null,isFetching:!1,isSaving:!1},Gt={isFetching:!1,isSaving:!1},$t={isFetching:!1,isSaving:!1},Qt=Object(m.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt;switch((arguments.length>1?arguments[1]:void 0).type){case n.LOG_IN:return{loginState:Wt};case n.LOG_IN_SUCCESS:return{loginState:qt};case n.LOG_IN_FAILURE:case n.LOG_OUT:return{loginState:Ht};default:return e}},invoices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.ARCHIVE_IMPORT_SUCCESS:return t.payload.invoices;case n.INVOICES_DELETE_SUCCESS:case n.INVOICES_FETCH_SUCCESS:return t.payload;case n.INVOICE_SAVE:case n.INVOICE_SAVE_SUCCESS:var a=Object(xe.a)(e),i=t.payload,r=a.findIndex(function(e){return e.id===i.id});return r>-1?a[r]=i:a.push(i),a;case n.INVOICE_SAVE_FAILURE:default:return e}},contacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.ARCHIVE_IMPORT_SUCCESS:return t.payload.contacts;case n.CONTACTS_DELETE_SUCCESS:case n.CONTACTS_FETCH_SUCCESS:return t.payload;case n.CONTACT_SAVE_SUCCESS:var a=Object(xe.a)(e),i=t.payload,r=a.findIndex(function(e){return e.id===i.id});return r>-1?a[r]=i:a.push(i),a;default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.ARCHIVE_IMPORT:return Object(De.a)({},e,{isSaving:!0,lastError:null});case n.ARCHIVE_IMPORT_SUCCESS:return Object(De.a)({},e,{isSaving:!1});case n.ARCHIVE_IMPORT_FAILURE:return Object(De.a)({},e,{isSaving:!1,lastError:t.payload});case n.ARCHIVE_EXPORT:return Object(De.a)({},e,{isFetching:!0,lastError:null});case n.ARCHIVE_EXPORT_SUCCESS:return Object(De.a)({},e,{isFetching:!1});case n.ARCHIVE_EXPORT_FAILURE:return Object(De.a)({},e,{isFetching:!1,lastError:t.payload});default:return e}},invoiceUI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt;switch((arguments.length>1?arguments[1]:void 0).type){case n.INVOICES_FETCH:return Object(De.a)({},e,{isFetching:!0});case n.INVOICES_FETCH_SUCCESS:case n.INVOICES_FETCH_FAILURE:return Object(De.a)({},e,{isFetching:!1});case n.INVOICE_SAVE:case n.INVOICES_DELETE:return Object(De.a)({},e,{isSaving:!0});case n.INVOICE_SAVE_SUCCESS:case n.INVOICES_DELETE_SUCCESS:return Object(De.a)({},e,{isSaving:!1});case n.INVOICE_SAVE_FAILURE:case n.INVOICES_DELETE_FAILURE:return Object(De.a)({},e,{isSaving:!1});default:return e}},contactUI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t;switch((arguments.length>1?arguments[1]:void 0).type){case n.CONTACTS_FETCH:return Object(De.a)({},e,{isFetching:!0});case n.CONTACTS_FETCH_SUCCESS:case n.CONTACTS_FETCH_FAILURE:return Object(De.a)({},e,{isFetching:!1});case n.CONTACT_SAVE:case n.CONTACTS_DELETE:return Object(De.a)({},e,{isSaving:!0});case n.CONTACT_SAVE_SUCCESS:case n.CONTACTS_DELETE_SUCCESS:return Object(De.a)({},e,{isSaving:!1});case n.CONTACT_SAVE_FAILURE:case n.CONTACTS_DELETE_FAILURE:return Object(De.a)({},e,{isSaving:!1});default:return e}},visibilityFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SET_VISIBILITY_FILTER:return t.filter;default:return e}}}),ea=(a(571),k.a.Content);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(572),a(573);var ta=Object(m.d)(Qt,{},Object(m.a)(p.a));ta.dispatch(ae()),ta.dispatch(ve()),l.a.render(o.a.createElement(d.a,{store:ta},o.a.createElement(i.a,{locale:f.a},o.a.createElement(s.a,null,o.a.createElement(u.d,null,o.a.createElement(u.a,{exact:!0,from:"/",to:"/invoices"}),o.a.createElement(u.b,{exact:!0,path:"/login",component:Kt}),o.a.createElement(Zt,{path:"/invoices/:id",component:Vt}),o.a.createElement(Zt,{path:"/invoices",component:Vt}),o.a.createElement(Zt,{path:"/contacts/:id",component:Vt}),o.a.createElement(Zt,{path:"/contacts",component:Vt}),o.a.createElement(Zt,{path:"/archive",component:Vt}),o.a.createElement(u.b,{component:function(){return o.a.createElement(k.a,{className:"fz-layout"},o.a.createElement(ea,{className:"fz-layout-content"},o.a.createElement("div",{className:"antd-pro-components-exception-index-exception"},o.a.createElement("div",{className:"antd-pro-components-exception-index-imgBlock"},o.a.createElement("div",{className:"antd-pro-components-exception-index-imgEle",style:{backgroundImage:'url("/static/img/undraw_page_not_found_su7k.svg")'}})),o.a.createElement("div",{className:"antd-pro-components-exception-index-content"},o.a.createElement("div",{className:"antd-pro-components-exception-index-desc"},"Prep\xe1\u010dte n\xe1m, ale t\xe1to str\xe1nka neexistuje."),o.a.createElement("div",{className:"antd-pro-components-exception-index-actions"},o.a.createElement("a",{href:"#/"},o.a.createElement(Ie.a,{className:"ant-btn ant-btn-primary"},"Sp\xe4\u0165 na \xfavodn\xfa")))))))}}))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[283,1,2]]]);
//# sourceMappingURL=main.fce1556b.chunk.js.map