(this["webpackJsonpfakturazdarma.sk"]=this["webpackJsonpfakturazdarma.sk"]||[]).push([[0],{191:function(e,t,a){"use strict";a.r(t);var n=a(215),r=a.n(n);a.d(t,"DownOutline",(function(){return r.a}));var i=a(216),o=a.n(i);a.d(t,"UpOutline",(function(){return o.a}));var c=a(217),l=a.n(c);a.d(t,"ArrowLeftOutline",(function(){return l.a}));var s=a(218),u=a.n(s);a.d(t,"LeftOutline",(function(){return u.a}));var d=a(219),m=a.n(d);a.d(t,"RightOutline",(function(){return m.a}));var v=a(220),p=a.n(v);a.d(t,"DoubleLeftOutline",(function(){return p.a}));var f=a(221),h=a.n(f);a.d(t,"DoubleRightOutline",(function(){return h.a}));var y=a(222),E=a.n(y);a.d(t,"PlusOutline",(function(){return E.a}));var b=a(223),C=a.n(b);a.d(t,"DownloadOutline",(function(){return C.a}));var g=a(224),k=a.n(g);a.d(t,"UploadOutline",(function(){return k.a}));var O=a(225),S=a.n(O);a.d(t,"EditOutline",(function(){return S.a}));var _=a(226),I=a.n(_);a.d(t,"FilePdfOutline",(function(){return I.a}));var w=a(227),T=a.n(w);a.d(t,"SaveOutline",(function(){return T.a}));var N=a(228),P=a.n(N);a.d(t,"FormOutline",(function(){return P.a}));var z=a(229),F=a.n(z);a.d(t,"DeleteOutline",(function(){return F.a}));var j=a(230),A=a.n(j);a.d(t,"MinusCircleOutline",(function(){return A.a}));var x=a(231),D=a.n(x);a.d(t,"CalendarOutline",(function(){return D.a}));var R=a(232),U=a.n(R);a.d(t,"CloseCircleFill",(function(){return U.a}));var V=a(233),L=a.n(V);a.d(t,"InfoCircleOutline",(function(){return L.a}));var B=a(234),M=a.n(B);a.d(t,"CloseCircleOutline",(function(){return M.a}));var K=a(235),H=a.n(K);a.d(t,"CheckCircleOutline",(function(){return H.a}));var q=a(236),G=a.n(q);a.d(t,"CheckCircleFill",(function(){return G.a}));var Z=a(237),X=a.n(Z);a.d(t,"ExclamationCircleOutline",(function(){return X.a}));var Y=a(238),W=a.n(Y);a.d(t,"ExclamationCircleFill",(function(){return W.a}));var J=a(239),$=a.n(J);a.d(t,"StopOutline",(function(){return $.a}));var Q=a(240),ee=a.n(Q);a.d(t,"LoadingOutline",(function(){return ee.a}))},299:function(e,t,a){e.exports=a(561)},325:function(e,t,a){},496:function(e,t,a){},508:function(e,t,a){},513:function(e,t,a){},552:function(e,t,a){},553:function(e,t,a){},554:function(e,t,a){},555:function(e,t,a){},557:function(e,t,a){},561:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"LOG_IN",(function(){return O})),a.d(n,"LOG_IN_SUCCESS",(function(){return S})),a.d(n,"LOG_IN_FAILURE",(function(){return _})),a.d(n,"LOG_OUT",(function(){return I})),a.d(n,"CONTACT_CREATE",(function(){return w})),a.d(n,"CONTACT_FETCH",(function(){return T})),a.d(n,"CONTACT_FETCH_SUCCESS",(function(){return N})),a.d(n,"CONTACT_FETCH_FAILURE",(function(){return P})),a.d(n,"CONTACTS_FETCH",(function(){return z})),a.d(n,"CONTACTS_FETCH_SUCCESS",(function(){return F})),a.d(n,"CONTACTS_FETCH_FAILURE",(function(){return j})),a.d(n,"CONTACT_FORM_REPLACE",(function(){return A})),a.d(n,"CONTACT_FORM_TOGGLE",(function(){return x})),a.d(n,"CONTACT_SAVE",(function(){return D})),a.d(n,"CONTACT_SAVE_SUCCESS",(function(){return R})),a.d(n,"CONTACT_SAVE_FAILURE",(function(){return U})),a.d(n,"CONTACTS_DELETE",(function(){return V})),a.d(n,"CONTACTS_DELETE_SUCCESS",(function(){return L})),a.d(n,"CONTACTS_DELETE_FAILURE",(function(){return B})),a.d(n,"INVOICE_FETCH",(function(){return M})),a.d(n,"INVOICE_FETCH_SUCCESS",(function(){return K})),a.d(n,"INVOICE_FETCH_FAILURE",(function(){return H})),a.d(n,"INVOICES_FETCH",(function(){return q})),a.d(n,"INVOICES_FETCH_SUCCESS",(function(){return G})),a.d(n,"INVOICES_FETCH_FAILURE",(function(){return Z})),a.d(n,"INVOICE_FORM_REPLACE",(function(){return X})),a.d(n,"INVOICE_SAVE",(function(){return Y})),a.d(n,"INVOICE_SAVE_SUCCESS",(function(){return W})),a.d(n,"INVOICE_SAVE_FAILURE",(function(){return J})),a.d(n,"INVOICES_DELETE",(function(){return $})),a.d(n,"INVOICES_DELETE_SUCCESS",(function(){return Q})),a.d(n,"INVOICES_DELETE_FAILURE",(function(){return ee})),a.d(n,"ARCHIVE_IMPORT",(function(){return te})),a.d(n,"ARCHIVE_IMPORT_SUCCESS",(function(){return ae})),a.d(n,"ARCHIVE_IMPORT_FAILURE",(function(){return ne})),a.d(n,"ARCHIVE_EXPORT",(function(){return re})),a.d(n,"ARCHIVE_EXPORT_SUCCESS",(function(){return ie})),a.d(n,"ARCHIVE_EXPORT_FAILURE",(function(){return oe})),a.d(n,"SET_VISIBILITY_FILTER",(function(){return ce}));a(300);var r=a(292),i=a(0),o=a.n(i),c=a(10),l=a.n(c),s=a(89),u=a(48),d=a(74),m=a(39),v=a(279),p=a(92),f=a(293),h=a.n(f),y=(a(197),a(67)),E=a(16),b=a(18),C=a(24),g=a(25),k=(a(199),a(78)),O="LOG_IN",S="LOG_IN_SUCCESS",_="LOG_IN_FAILURE",I="LOG_OUT",w="CONTACT_CREATE",T="CONTACT_FETCH",N="CONTACT_FETCH_SUCCESS",P="CONTACT_FETCH_FAILURE",z="CONTACTS_FETCH",F="CONTACTS_FETCH_SUCCESS",j="CONTACTS_FETCH_FAILURE",A="CONTACT_FORM_UPDATE",x="CONTACT_FORM_TOGGLE",D="CONTACT_SAVE",R="CONTACT_SAVE_SUCCESS",U="CONTACT_SAVE_FAILURE",V="CONTACTS_DELETE",L="CONTACTS_DELETE_SUCCESS",B="CONTACTS_DELETE_FAILURE",M="INVOICE_FETCH",K="INVOICE_FETCH_SUCCESS",H="INVOICE_FETCH_FAILURE",q="INVOICES_FETCH",G="INVOICES_FETCH_SUCCESS",Z="INVOICES_FETCH_FAILURE",X="INVOICE_FORM_REPLACE",Y="INVOICE_SAVE",W="INVOICE_SAVE_SUCCESS",J="INVOICE_SAVE_FAILURE",$="INVOICES_DELETE",Q="INVOICES_DELETE_SUCCESS",ee="INVOICES_DELETE_FAILURE",te="ARCHIVE_IMPORT",ae="ARCHIVE_IMPORT_SUCCESS",ne="ARCHIVE_IMPORT_FAILURE",re="ARCHIVE_EXPORT",ie="ARCHIVE_EXPORT_SUCCESS",oe="ARCHIVE_EXPORT_FAILURE",ce="SET_VISIBILITY_FILTER",le=a(11),se=a(34),ue=a(55),de=a(64),me=a.n(de),ve=a(100),pe=function(e,t){var a=[];return e.forEach((function(e){var n=t.findIndex((function(t){var a=t.id;return e.id===a}));if(-1===n)return t.push(e),!1;var r=t[n];return(r.revision||0)>(e.revision||0)||new Date(r.updatedAt||0)>new Date(e.updatedAt||0)?(a.push(e),!1):void(t[n]=e)})),a},fe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:localStorage;Object(E.a)(this,e),this.storage=t}return Object(b.a)(e,[{key:"doLogin",value:function(e,t){return Promise.resolve(!0)}},{key:"saveContact",value:function(t){if(!t||!t.id)return Promise.reject(new Error("Ch\xfdba id. kontaktu!"));var a=this.getContactsSync(),n=a.findIndex((function(e){return e.id===t.id}));return t.updatedAt=new Date,t.revision=n>-1?(a[n].revision||0)+1:1,n>-1?a[n]=t:a.push(t),this.storage.setItem(e.CONTACTS_KEY,JSON.stringify(a)),Promise.resolve(t)}},{key:"mergeContacts",value:function(t){var a=this.getContactsSync(),n=pe(t,a);return this.storage.setItem(e.CONTACTS_KEY,JSON.stringify(a)),Promise.resolve({items:a,conflicts:n})}},{key:"fetchContact",value:function(e){return this.fetchContacts().then((function(t){return t.find((function(t){return t.id===e}))||null}))}},{key:"fetchContacts",value:function(){return Promise.resolve(this.getContactsSync())}},{key:"deleteContacts",value:function(t){var a=this.getContactsSync().filter((function(e){return!t.includes(e.id)}));return this.storage.setItem(e.CONTACTS_KEY,JSON.stringify(a)),Promise.resolve(Object.values(a))}},{key:"saveInvoice",value:function(t){if(!t||!t.id)return Promise.reject(new Error("Ch\xfdba id. fakt\xfary!"));var a=this.getInvoicesSync(),n=a.findIndex((function(e){return e.id===t.id}));return t.updatedAt=new Date,t.revision=n>-1?(a[n].revision||0)+1:1,n>-1?a[n]=t:a.push(t),this.storage.setItem(e.INVOICES_KEY,JSON.stringify(a)),Promise.resolve(t)}},{key:"mergeInvoices",value:function(t){var a=this.getInvoicesSync(),n=pe(t,a);return this.storage.setItem(e.INVOICES_KEY,JSON.stringify(a)),Promise.resolve({items:a,conflicts:n})}},{key:"fetchInvoice",value:function(e){return this.fetchInvoices().then((function(t){return t.find((function(t){return t.id===e}))||null}))}},{key:"fetchInvoices",value:function(){return Promise.resolve(this.getInvoicesSync())}},{key:"deleteInvoices",value:function(t){var a=this.getInvoicesSync().filter((function(e){return!t.includes(e.id)}));return this.storage.setItem(e.INVOICES_KEY,JSON.stringify(a)),Promise.resolve(Object.values(a))}},{key:"getInvoicesSync",value:function(){var t=this.storage.getItem(e.INVOICES_KEY);return t?JSON.parse(t):[]}},{key:"getContactsSync",value:function(){var t=this.storage.getItem(e.CONTACTS_KEY);return t?JSON.parse(t):[]}}]),e}();fe.CONTACTS_KEY="contacts",fe.INVOICES_KEY="invoices";var he=function(){function e(){Object(E.a)(this,e)}return Object(b.a)(e,[{key:"getClient",value:function(t){switch(t){case e.LOCAL_STORAGE_CLIENT:return new fe;default:throw new Error("Client type ".concat(t," is not supported"))}}}]),e}();he.LOCAL_STORAGE_CLIENT=1;var ye,Ee,be=function(e){return new Promise((function(t){return setTimeout(t,e)}))},Ce=function(e,t){var a=Object.getOwnPropertyDescriptor(e,t);return!!a&&"function"===typeof a.value},ge=function(e,t){for(var a=[],n=Object.getPrototypeOf(e);n&&n!==t;)Object.getOwnPropertyNames(n).forEach((function(e){"constructor"!==e&&Ce(n,e)&&a.push(e)})),n=Object.getPrototypeOf(n);return a},ke=function(){function e(){Object(E.a)(this,e),this.client=void 0,this.delay=0,this._skipMethods=[],this.initCallback=null}return Object(b.a)(e,[{key:"setClient",value:function(e){return this.client=e,this}},{key:"setDelay",value:function(e){return this.delay=e,this}},{key:"onInit",value:function(e){return this.initCallback=e,this}},{key:"skipMethods",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return this._skipMethods=e,this}))},{key:"build",value:function(){return new Oe(this.client,this.delay,this._skipMethods,this.initCallback)}}]),e}(),Oe=function(){function e(t){var a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0;Object(E.a)(this,e),this.client=t,this.delayInMillis=n,this.skipMethods=r,this.initCallback=i,a=i?i(this.client):Promise.resolve();var o=this,c=ge(t,Object.prototype);c.forEach((function(e){r.some((function(t){return t instanceof RegExp?t.test(e):e===t}))||(o[e]=function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return a.then((function(){return be(n)})).then((function(){return t[e].apply(t,i)}))})}))}return Object(b.a)(e,[{key:"setDelay",value:function(e){var t=this.client;return(new ke).setClient(t).setDelay(e).skipMethods(this.skipMethods).build()}}]),e}();!function(e){e[e.WireTransfer=1]="WireTransfer",e[e.Card=2]="Card",e[e.Cash=3]="Cash",e[e.CashOnDelivery=4]="CashOnDelivery"}(ye||(ye={})),function(e){e[e.NonTax=1]="NonTax",e[e.Taxable=2]="Taxable"}(Ee||(Ee={}));var Se=[{id:"1",entity:"GP Slovakia",name:"Katar\xedna Slobodov\xe1",email:"invoice@gp.svk",phoneNr:"0970234654",street:"Michalsk\xe1 13",city:"Bratislava",zipCode:"81103",country:"Slovensko",legalId:"45923099",taxId:"1627435979",iban:"SK7548161192967983361238",bankAccount:"1192967983361238",bankName:"Tatra Banka",bankCode:"1100",swift:"TATRSKBX",isOwn:!0},{id:"2",entity:"Etrix Slovakia",name:"Jozef Kov\xe1\u010d",email:"invoice@etrix.svk",phoneNr:"0989447329",street:"Antona Pr\xeddavka 26",city:"Pre\u0161ov",zipCode:"08001",country:"Slovensko",legalId:"25537359",taxId:"0627536219",taxLegalId:"SK379324241",iban:"SK8949968412396661421327",bankAccount:"8412396661421327",bankName:"UniCredit Bank",bankCode:"1111",swift:"UNCRSKBX",isOwn:!0}],_e=[{id:"2021001",type:2,paymentType:ye.WireTransfer,description:"Uk\xe1\u017eka fakt\xfary s DPH",emitent:Se[1],recipient:Se[0],items:[{name:"Notebook HP Elite",pricePerUnit:1399,unit:"kus",amount:1,taxRate:20}],variableSymbol:"2021001",constantSymbol:"0008",issueDate:new Date(2021,4,1),dueDate:new Date(2021,4,15),paymentDate:new Date(2021,4,13),finalText:"\u010eakujeme za d\xf4veru."},{id:"2021002",type:1,paymentType:ye.Card,description:"Uk\xe1\u017eka fakt\xfary bez DPH",emitent:Se[0],recipient:Se[1],items:[{name:"Eset Smart Security",pricePerUnit:66,unit:"kus",amount:12}],variableSymbol:"2021002",constantSymbol:"0308",issueDate:new Date(2021,4,3),dueDate:new Date(2021,4,18),finalText:"Softv\xe9rov\xe1 licencia je neprenosn\xe1."},{id:"2021003",type:2,description:"Uk\xe1\u017eka fakt\xfary bez DPH s uplatnen\xedm z\u013eavy",paymentType:ye.CashOnDelivery,emitent:Se[1],recipient:Se[0],items:[{name:"Innovate X-Talon G255",unit:"ks",pricePerUnit:103.92,amount:1,taxRate:20},{name:"Osobn\xe1 z\u013eava",unit:"ks",pricePerUnit:-4.17,amount:1,taxRate:20},{name:"Z\xe1sielkov\u0148a (doru\u010denie na adresu)",unit:"ks",pricePerUnit:2.99,amount:1,taxRate:20},{name:"Z\xe1sielkov\u0148a (doru\u010denie na adresu) z\u013eava",unit:"ks",pricePerUnit:-2.99,amount:1,taxRate:20}],variableSymbol:"2021003",constantSymbol:"0008",issueDate:"2021-07-04T18:14:37.521Z",dueDate:"2021-07-19T18:14:37.521Z",finalText:"Fakt\xfara bola uhraden\xe1 dobierkou.",revision:3,updatedAt:"2021-07-04T18:25:10.796Z"}];var Ie,we=function(){var e=(new he).getClient(he.LOCAL_STORAGE_CLIENT);return(new ke).setClient(e).setDelay(500).skipMethods([/.*Sync/]).onInit(function(){var e=Object(ve.a)(me.a.mark((function e(t){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchContacts();case 2:if(e.t0=e.sent.length,0!==e.t0){e.next=5;break}t.mergeContacts(Se);case 5:return e.next=7,t.fetchInvoices();case 7:if(e.t1=e.sent.length,0!==e.t1){e.next=10;break}t.mergeInvoices(_e);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).build()}(),Te=function(){function e(t){Object(E.a)(this,e),this.id=void 0,this.entity="",this.name=void 0,this.street=void 0,this.city=void 0,this.zipCode=void 0,this.country=void 0,this.legalId=void 0,this.taxId=void 0,this.taxLegalId=void 0,this.iban=void 0,this.bankAccount=void 0,this.bankName=void 0,this.bankCode=void 0,this.swift=void 0,this.email=void 0,this.phoneNr=void 0,this.isOwn=!1,this.revision=void 0,this.updatedAt=void 0,Object.assign(this,t)}return Object(b.a)(e,[{key:"isTaxable",get:function(){return!!this.taxLegalId}}]),e}(),Ne=a(295),Pe=function(e){Object(C.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).name=n.constructor.name,n}return a}(Object(Ne.a)(Error)),ze=function(){function e(){Object(E.a)(this,e)}return Object(b.a)(e,[{key:"toFields",value:function(e){return{id:{value:e.id},entity:{value:e.entity},street:{value:e.street},zipCode:{value:e.zipCode},city:{value:e.city},country:{value:e.country},legalId:{value:e.legalId},taxId:{value:e.taxId},taxLegalId:{value:e.taxLegalId},bankName:{value:e.bankName},bankCode:{value:e.bankCode},swift:{value:e.swift},iban:{value:e.iban},bankAccount:{value:e.bankAccount},name:{value:e.name},email:{value:e.email},phoneNr:{value:e.phoneNr},isOwn:{value:!!e.isOwn}}}},{key:"fromFields",value:function(e){var t=Object.entries(e).reduce((function(e,t){var a=Object(se.a)(t,2),n=a[0],r=a[1];return r&&r.value&&(e[n]=r.value),e}),{});return new Te(t)}}]),e}(),Fe=function(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(a,n){return-1===t?n[e].localeCompare(a[e],"en",{numeric:!0}):a[e].localeCompare(n[e],"en",{numeric:!0})}},je=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(a,n){var r=n().contacts,i=1,o=Object(ue.a)(r).sort(Fe("-id"));return o[0]&&(i=Number(o[0].id)+1),e.push("/contacts/".concat(i).concat(t?"?isOwn=".concat(t):"")),Promise.resolve(i)}},Ae=function(){return function(e){return e({type:z,payload:{}}),we.fetchContacts().then((function(t){return e({type:F,payload:t}),t}),(function(t){throw e({type:j,payload:t}),t}))}},xe=function(e,t){return function(a,n){var r=n().bankList;if(e.bankIndex){var i=Object(se.a)(r[e.bankIndex.value],3),o=i[0],c=i[1],l=i[2];t=Object(le.a)(Object(le.a)({},t),{},{bankName:{value:o},bankCode:{value:c},swift:{value:l}})}a({type:A,payload:t})}},De=function(e){return function(t,a){var n=a().contacts.find((function(t){return t.id===e}));if(!n)return t(function(e){return function(t){return t({type:T,payload:{}}),we.fetchContact(e).then((function(a){if(!a)throw new Pe("Kontakt `".concat(e,"` sa nena\u0161iel!"));return t({type:N,payload:a}),a})).catch((function(e){throw t({type:P,payload:e}),e}))}}(e)).then((function(e){var a=(new ze).toFields(e);t(xe({},a))}),(function(a){if(a instanceof Pe){var n=new Te({id:e,country:"Slovensko"}),r=(new ze).toFields(n);return t(xe({},r))}throw a}));var r=(new ze).toFields(n);return t(xe({},r))}},Re=function(){function e(t){Object(E.a)(this,e),this.name="",this.unit="kus",this.pricePerUnit=0,this.amount=0,this.taxRate=20,Object.assign(this,t)}return Object(b.a)(e,[{key:"netPrice",get:function(){return this.pricePerUnit*this.amount}},{key:"grossPrice",get:function(){return this.netPrice+this.taxPrice}},{key:"taxPrice",get:function(){return this.netPrice/100*this.taxRate}}]),e}(),Ue=function(){function e(t){Object(E.a)(this,e),this.id=void 0,this.type=Ee.NonTax,this.description=void 0,this.paymentType=ye.WireTransfer,this.recipient=void 0,this.emitent=void 0,this.items=[],this.discount=0,this.variableSymbol="",this.constantSymbol="0308",this.orderNr=void 0,this.issueDate=void 0,this.dueDate=void 0,this.deliveryDate=void 0,this.paymentDate=void 0,this.finalText=void 0,this.revision=void 0,this.updatedAt=void 0;var a=Date.now();Object.assign(this,t),this.issueDate=new Date(this.issueDate||a),this.dueDate=new Date(this.dueDate||a+1296e6),this.paymentDate=this.paymentDate?new Date(this.paymentDate):void 0,this.deliveryDate=this.deliveryDate?new Date(this.deliveryDate):void 0,this.items=t&&t.items?t.items.map((function(e){return new Re(e)})):[],this.discount=t&&null!=t.discount?t.discount:0}return Object(b.a)(e,[{key:"grossPrice",get:function(){if(this.type===Ee.NonTax)return this.items.reduce((function(e,t){return e+t.netPrice}),0);if(this.type===Ee.Taxable){var e=this.items.reduce((function(e,t){var a=t.taxRate,n=t.netPrice;return e[a]=(e[a]||0)+n,e}),{});return Object.entries(e).reduce((function(e,t){var a=Object(se.a)(t,2),n=a[0],r=a[1];return e+=r+r/100*Number(n)}),0)}return Number.NaN}},{key:"discountPrice",get:function(){return-this.grossPrice/100*this.discount}},{key:"netPrice",get:function(){return this.grossPrice+this.discountPrice}}]),e}(),Ve=a(17),Le=a.n(Ve),Be=a(91),Me=(Ie={},Object(Be.a)(Ie,ye.WireTransfer,"Prevodom"),Object(Be.a)(Ie,ye.Card,"Kartou"),Object(Be.a)(Ie,ye.Cash,"V hotovosti"),Object(Be.a)(Ie,ye.CashOnDelivery,"Dobierka"),Ie),Ke=function(){function e(){Object(E.a)(this,e)}return Object(b.a)(e,[{key:"toItemFields",value:function(e){return e.reduce((function(e,t,a){return e.itemsNames[a]={value:t.name},e.pricesPU[a]={value:t.pricePerUnit},e.units[a]={value:t.unit},e.amounts[a]={value:t.amount},e.taxRates[a]={value:t.taxRate},e}),{itemsNames:[],pricesPU:[],units:[],amounts:[],taxRates:[]})}},{key:"toFields",value:function(e){var t=e.recipient,a=e.emitent,n=e.items;return Object(le.a)({id:{value:e.id},type:{value:e.type},recipient:{value:t&&t.entity||null},emitent:{value:a&&a.entity||null},paymentType:{value:e.paymentType},dueDate:{value:e.dueDate&&Le()(e.dueDate)},issueDate:{value:e.issueDate&&Le()(e.issueDate)},deliveryDate:{value:e.deliveryDate&&Le()(e.deliveryDate)},paymentDate:{value:e.paymentDate&&Le()(e.paymentDate)},variableSymbol:{value:e.variableSymbol||e.id},constantSymbol:{value:e.constantSymbol},orderNr:{value:e.orderNr},description:{value:null!=e.description?e.description:"Fakturujeme V\xe1m za dodan\xfd tovar alebo slu\u017eby:"},finalText:{value:null!=e.finalText?e.finalText:"Tovar zost\xe1va a\u017e do \xfapln\xe9ho uhradenia majetkom dod\xe1vate\u013ea. Pri oneskorenej \xfahrade V\xe1m budeme \xfa\u010dtova\u0165 pen\xe1le vo v\xfd\u0161ke 0,05% za ka\u017ed\xfd za\u010dat\xfd de\u0148 ome\u0161kania."},discount:{value:e.discount}},this.toItemFields(n))}},{key:"toInvoiceItems",value:function(e,t){var a=e.itemsNames,n=void 0===a?[]:a,r=e.pricesPU,i=void 0===r?[]:r,o=e.units,c=void 0===o?[]:o,l=e.amounts,s=void 0===l?[]:l,u=e.taxRates,d=void 0===u?[]:u,m=[];return t.forEach((function(e){m[e]=new Re({name:n[e]&&n[e].value,unit:c[e]&&c[e].value,pricePerUnit:i[e]&&i[e].value,amount:s[e]&&s[e].value,taxRate:d[e]&&d[e].value})})),m}},{key:"fromFields",value:function(e,t){var a=e.id,n=void 0===a?{}:a,r=e.type,i=void 0===r?{}:r,o=e.paymentType,c=void 0===o?{}:o,l=e.dueDate,s=void 0===l?{}:l,u=e.issueDate,d=void 0===u?{}:u,m=e.deliveryDate,v=void 0===m?{}:m,p=e.paymentDate,f=void 0===p?{}:p,h=e.variableSymbol,y=void 0===h?{}:h,E=e.constantSymbol,b=void 0===E?{}:E,C=e.orderNr,g=void 0===C?{}:C,k=e.description,O=void 0===k?{}:k,S=e.finalText,_=void 0===S?{}:S,I=e.discount,w=void 0===I?{}:I;return new Ue({id:n.value,type:Number(i.value),paymentType:c.value,dueDate:s.value&&s.value.toDate(),issueDate:d.value&&d.value.toDate(),deliveryDate:v.value&&v.value.toDate(),paymentDate:f.value&&f.value.toDate(),variableSymbol:y.value,constantSymbol:b.value,orderNr:g.value,description:O.value,finalText:_.value,discount:w.value,items:this.toInvoiceItems(e,t)})}},{key:"fromValues",value:function(e,t){var a=e.itemsNames,n=e.pricesPU,r=e.units,i=e.amounts,o=e.taxRates,c=t.map((function(e){return new Re({name:a[e],unit:r[e],pricePerUnit:n[e],amount:i[e],taxRate:o&&o[e]||0})}));return new Ue({id:e.id,type:Number(e.type),paymentType:e.paymentType,dueDate:e.dueDate&&e.dueDate.toDate(),issueDate:e.issueDate&&e.issueDate.toDate(),deliveryDate:e.deliveryDate&&e.deliveryDate.toDate(),paymentDate:e.paymentDate&&e.paymentDate.toDate(),variableSymbol:e.variableSymbol,constantSymbol:e.constantSymbol,orderNr:e.orderNr,description:e.description,finalText:e.finalText,discount:e.discount,items:c})}}]),e}();function He(e,t,a){return Array(t-String(e).length+1).join(a||"0")+e}var qe=function(){return function(e){return e({type:q,payload:{}}),we.fetchInvoices().then((function(t){return e({type:G,payload:t}),t}),(function(t){throw e({type:Z,payload:t}),t}))}},Ge=function(e,t,a){return function(n,r){var i={fields:t};if(e.emitent){var o=r().contacts.find((function(t){return e.emitent.value===t.id}));o&&(i.fields.type={value:new Te(o).isTaxable?Ee.Taxable:Ee.NonTax})}a&&(i.itemKeys=a),n({type:X,payload:i})}},Ze=function(e){return function(t,a){var n=a(),r=n.invoices,i=n.invoiceUI,o=i.fields;i.isDraft&&o.id&&o.id.value===e?console.log("Skip form fetch"):Promise.resolve(r.find((function(t){return t.id===e}))).then((function(a){return a||t(function(e){return function(t){return t({type:M,payload:{}}),we.fetchInvoice(e).then((function(a){if(!a)throw new Pe("Fakt\xfara `".concat(e,"` sa nena\u0161la!"));return t({type:K,payload:a}),a})).catch((function(e){throw t({type:H,payload:e}),e}))}}(e)).catch((function(t){if(t instanceof Pe)return{id:e};throw t}))})).then((function(e){e=new Ue(e);var a,n=(new Ke).toFields(e),r=(a=Math.max(1,e.items.length),Array.from({length:Math.max(0,a)},(function(e,t){return t})));return t(Ge({},n,r))}))}},Xe=function(e,t,a){var n=a.contacts,r=a.invoices,i=(new Ke).fromValues(e,t),o=n.find((function(t){return e.emitent===t.id})),c=n.find((function(t){return e.recipient===t.id}));if(!o||!c){var l=r.find((function(e){return e.id===i.id}));l&&(o=o||l.emitent,c=c||l.recipient)}return new Ue(Object(le.a)(Object(le.a)({},i),{},{emitent:o,recipient:c}))},Ye=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(n,r){var i=Xe(e,t,r());return n({type:Y,payload:{isDraft:a}}),we.saveInvoice(i).then((function(e){return e=new Ue(e),n({type:W,payload:e}),e}),(function(e){throw n({type:J,payload:e}),e}))}},We=function(e){return function(t){return t({type:$,payload:e}),we.deleteInvoices(e).then((function(e){t({type:Q,payload:e})}),(function(e){throw t({type:ee,payload:e}),e}))}},Je="SHOW_ALL",$e="SHOW_COMPLETED",Qe="SHOW_ACTIVE",et=function(){var e=document.createElement("a");return e.style.display="none",document.body.appendChild(e),function(t,a){var n=window.URL.createObjectURL(t);e.href=n,e.download=a,e.click(),window.URL.revokeObjectURL(n)}}(),tt=(a(120),a(65)),at=(a(276),a(149)),nt=(a(52),a(22)),rt=(a(108),a(35)),it=a(43),ot=a(190),ct=a.n(ot);function lt(e){var t=String(e).toUpperCase().replace(/[^A-Z0-9]/g,""),a=t.match(/^([A-Z]{2})(\d{2})([A-Z\d]+)$/);return!(!a||t.length!=={AD:24,AE:23,AT:20,AZ:28,BA:20,BE:16,BG:22,BH:22,BR:29,CH:21,CR:21,CY:28,CZ:24,DE:22,DK:18,DO:28,EE:20,ES:24,FI:18,FO:18,FR:27,GB:22,GI:23,GL:18,GR:27,GT:28,HR:21,HU:28,IE:22,IL:23,IS:26,IT:27,JO:30,KW:30,KZ:20,LB:28,LI:21,LT:20,LU:20,LV:21,MC:27,MD:24,ME:22,MK:19,MR:27,MT:31,MU:30,NL:18,NO:15,PK:24,PL:28,PS:29,PT:25,QA:29,RO:24,RS:22,SA:24,SE:24,SI:19,SK:24,SM:27,TN:24,TR:26}[a[1]])&&function(e){for(var t=parseInt(e.slice(0,2)),a=2;a<e.length;a+=7){var n=String(t)+e.substring(a,a+7);t=parseInt(n,10)%97}return t}((a[3]+a[1]+a[2]).replace(/[A-Z]/g,(function(e){return String(e.charCodeAt(0)-55)})))}var st=new Intl.NumberFormat("sk-SK"),ut=new Intl.NumberFormat("sk-SK",{style:"currency",currency:"EUR"}),dt=Intl.DateTimeFormat("sk-SK"),mt=function(e){if(1===lt(e)){var t=new ct.a("UUAA AAAA AAAA AAAA AAAA AAAA").process(e),a=t.result;return t.valid?a:e}return e},vt=function(e){if("string"!==typeof e)return e;var t=e.toUpperCase().replace(/[^A-Z0-9]/g,"");if(5!==t.length)return e;var a=new ct.a("000 00").process(t),n=a.result;return a.valid?n:e},pt=(a(325),function(e){Object(C.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).hideSavingProgressMessage=null,e.state={isConfirmationModalVisible:!1,selectedRowKeys:[]},e.onSelectChange=function(t){e.setState({selectedRowKeys:t})},e.handleDelete=function(){e.setState({isConfirmationModalVisible:!0})},e.handleOk=function(){var t=e.state.selectedRowKeys;e.props.onDelete(t),e.setState({isConfirmationModalVisible:!1})},e.handleCancel=function(){e.setState({isConfirmationModalVisible:!1})},e.handleCreateNewInvoice=function(){e.props.onCreate(e.props.history)},e}return Object(b.a)(a,[{key:"componentWillUpdate",value:function(e){var t=this.props.ui.isSaving,a=e.ui.isSaving;!a&&t?(this.hideMessage(),rt.a.success("Zmeny boli ulo\u017een\xe9",1),this.setState({selectedRowKeys:[]})):a&&(this.hideMessage(),this.hideSavingProgressMessage=rt.a.loading("Prebieha ukladanie...",0))}},{key:"componentWillUnmount",value:function(){this.hideMessage()}},{key:"hideMessage",value:function(){this.hideSavingProgressMessage&&this.hideSavingProgressMessage(),this.hideSavingProgressMessage=null}},{key:"render",value:function(){var e=this.props,t=e.invoices,a=e.ui,n=this.state,r=n.selectedRowKeys,i=n.isConfirmationModalVisible,c={selectedRowKeys:r,onChange:this.onSelectChange},l=r.length>0;return o.a.createElement("div",{className:"fz-list-page"},o.a.createElement("div",{className:"fz-btn-group"},o.a.createElement(nt.a,{type:"primary",icon:"form",size:"large",onClick:this.handleCreateNewInvoice},"Vystavi\u0165"),o.a.createElement(nt.a,{icon:"delete",size:"large",disabled:!l,onClick:this.handleDelete},"Vymaza\u0165")),o.a.createElement("div",{className:"fz-table-wrapper"},o.a.createElement(at.a,{className:"fz-table fz-invoice-table",rowKey:"id",dataSource:t,columns:ft,rowSelection:c,loading:a.isFetching})),o.a.createElement(tt.a,{title:"Potvrdenie",visible:i,onOk:this.handleOk,onCancel:this.handleCancel},o.a.createElement("p",null,"Prajete si vymaza\u0165 ozna\u010den\xe9 z\xe1znamy?")))}}]),a}(i.Component)),ft=[{title:"Id. dokladu",dataIndex:"id",key:"id",render:function(e){return o.a.createElement(it.a,{to:"/invoices/".concat(e)},e)}},{title:"Popis",className:"fz-invoice-table__item fz-invoice-table__item--wide",dataIndex:"description",key:"description"},{title:"Odberate\u013e",className:"fz-invoice-table__item fz-invoice-table__item--wide",dataIndex:"recipient.entity",key:"recipient"},{title:"Suma",dataIndex:"netPrice",key:"netPrice",render:function(e){return ut.format(e)}},{title:"D\xe1tum vystavenia",dataIndex:"issueDate",key:"issueDate",render:function(e){return dt.format(new Date(e))}},{title:"Splatnos\u0165",dataIndex:"dueDate",key:"dueDate",render:function(e){return dt.format(new Date(e))}}],ht=Object(s.f)(Object(m.b)((function(e){return{invoices:function(e,t){switch(t){case Je:return e;case $e:return e.filter((function(e){return e.completed}));case Qe:return e.filter((function(e){return!e.completed}));default:return e}}(e.invoices,e.visibilityFilter).map((function(e){return new Ue(e)})).sort((function(e,t){return t.issueDate.getTime()-e.issueDate.getTime()})),ui:e.ui}}),(function(e){return{onCreate:function(t){e(function(e){return function(t,a){var n=a().invoices,r=(new Date).getFullYear(),i=String(r),o=n.reduce((function(e,t){var a=Object(se.a)(e,2),n=a[0],r=a[1],o=t.id;if(o&&o.startsWith(i)){r++;var c=parseInt(o.slice(i.length),10);c>n&&(n=c)}return[n,r]}),[0,0]),c=String(Math.max.apply(Math,Object(ue.a)(o))+1);c.length<3&&(c=He(c,3)),e.push("/invoices/".concat(r).concat(c))}}(t))},onDelete:function(t){e(We(t))}}}))(pt)),yt=function(e){Object(C.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).hideSavingProgressMessage=null,e.state={isConfirmationModalVisible:!1,selectedRowKeys:[]},e.onSelectChange=function(t){e.setState({selectedRowKeys:t})},e.onCreate=function(){e.props.onCreate(e.props.history)},e.handleDelete=function(){e.setState({isConfirmationModalVisible:!0})},e.handleOk=function(){var t=e.state.selectedRowKeys;e.props.onDelete(t),e.setState({isConfirmationModalVisible:!1})},e.handleCancel=function(){e.setState({isConfirmationModalVisible:!1})},e}return Object(b.a)(a,[{key:"componentWillUpdate",value:function(e){var t=this.props.ui.isSaving,a=e.ui.isSaving;!a&&t?(this.hideMessage(),rt.a.success("Zmeny boli ulo\u017een\xe9",1),this.setState({selectedRowKeys:[]})):a&&(this.hideMessage(),this.hideSavingProgressMessage=rt.a.loading("Prebieha ukladanie...",0))}},{key:"componentWillUnmount",value:function(){this.hideMessage()}},{key:"hideMessage",value:function(){this.hideSavingProgressMessage&&this.hideSavingProgressMessage(),this.hideSavingProgressMessage=null}},{key:"render",value:function(){var e=this.props,t=e.contacts,a=e.ui,n=this.state,r=n.selectedRowKeys,i=n.isConfirmationModalVisible,c={selectedRowKeys:r,onChange:this.onSelectChange},l=r.length>0;return o.a.createElement("div",{className:"fz-list-page"},o.a.createElement("div",{className:"fz-btn-group"},o.a.createElement(nt.a,{type:"primary",icon:"form",size:"large",onClick:this.onCreate},"Prida\u0165"),o.a.createElement(nt.a,{icon:"delete",size:"large",disabled:!l,onClick:this.handleDelete},"Vymaza\u0165")),o.a.createElement("div",{className:"fz-table-wrapper"},o.a.createElement(at.a,{rowKey:"id",className:"fz-table fz-contact-table",dataSource:t,columns:Et,rowSelection:c,loading:a.isFetching})),o.a.createElement(tt.a,{title:"Potvrdenie",visible:i,onOk:this.handleOk,onCancel:this.handleCancel},o.a.createElement("p",null,"Prajete si vymaza\u0165 ozna\u010den\xe9 z\xe1znamy?")))}}]),a}(i.Component),Et=[{title:"N\xe1zov",dataIndex:"entity",key:"entity",render:function(e,t){return o.a.createElement(it.a,{to:"/contacts/".concat(t.id)},e)}},{title:"Meno",dataIndex:"name",key:"name"},{title:"E-mail",dataIndex:"email",key:"email"},{title:"Telef\xf3n",dataIndex:"phoneNr",key:"phoneNr"}],bt=Object(m.b)((function(e){var t=function(e,t){switch(t){case Je:return e;case $e:return e.filter((function(e){return e.completed}));case Qe:return e.filter((function(e){return!e.completed}));default:return e}}(e.contacts,e.visibilityFilter);return{contacts:Object(ue.a)(t),ui:e.ui}}),(function(e){return{onCreate:function(t){e(je(t))},onDelete:function(t){e(function(e){return function(t){return t({type:V,payload:e}),we.deleteContacts(e).then((function(e){t({type:L,payload:e})}),(function(e){throw t({type:B,payload:e}),e}))}}(t))}}}))(yt),Ct=(a(256),a(153)),gt=(a(277),a(151)),kt=(a(71),a(7)),Ot=a(146),St=a.n(Ot),_t=(a(562),a(155)),It=(a(257),a(107)),wt=(a(84),a(29)),Tt=(a(85),a(21)),Nt=(a(73),a(8)),Pt=(a(158),a(45)),zt=(a(72),a(23)),Ft=(a(485),a(156)),jt=a(147),At=a(2),xt=a.n(At),Dt=function(e){Object(C.a)(a,e);var t=Object(g.a)(a);function a(){return Object(E.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return o.a.createElement("span",null,this.props.value)}}]),a}(i.Component),Rt=["children"],Ut=function(e){var t=e.children,a=Object(jt.a)(e,Rt);return o.a.createElement(Nt.a.Item,Object.assign({},a,{className:xt()("fz-invoice-items__row__cell__item",a.className),labelCol:{xs:24,sm:8,prefixCls:"fz-invoice-items__label"},wrapperCol:{xs:24,sm:16,prefixCls:"fz-invoice-items__wrapper"}}),t)},Vt=function(e){var t=e.type,a=e.items,n=e.onItemAdd,r=e.onItemRemove,i=e.getFieldDecorator,c=0;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"fz-invoice-row"},o.a.createElement("h4",{className:"fz-invoice-header"},"Polo\u017eky fakt\xfary")),o.a.createElement("div",{className:"fz-invoice-items"},a.map((function(e,n){var l=a[n]||{},s=l.netPrice,u=void 0===s?0:s,d=l.taxPrice,m=void 0===d?0:d,v=l.grossPrice,p=void 0===v?0:v;return o.a.createElement("div",{key:n,className:"fz-invoice-items__row".concat(0===c++?" fz-invoice-items__row--header":"")},o.a.createElement("div",{className:"fz-invoice-items__row__cell fz-invoice-items__row__cell--delete"},o.a.createElement(Ut,{label:"\xa0",colon:!1},Object.keys(a).length>1?o.a.createElement(kt.a,{className:"fz-dynamic-action-button",type:"minus-circle-o",onClick:function(){return r(n)}}):null)),o.a.createElement("div",{className:"fz-invoice-items__row__cell-group fz-invoice-items__row__cell-group__name"},o.a.createElement("div",{className:"fz-invoice-items__row__cell fz-invoice-items__row__cell--name"},o.a.createElement(Ut,{label:"Polo\u017eka"},i("itemsNames[".concat(n,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Vypl\u0148te n\xe1zov polo\u017eky!"}]})(o.a.createElement(zt.a,null))))),o.a.createElement("div",{className:"fz-invoice-items__row__cell-group"},o.a.createElement("div",{className:"fz-invoice-items__row__cell fz-invoice-items__row__cell--narrow"},o.a.createElement(Ut,{label:"Jednotka"},i("units[".concat(n,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Vypl\u0148te jednotku!"}]})(o.a.createElement(zt.a,null)))),o.a.createElement("div",{className:"fz-invoice-items__row__cell fz-invoice-items__row__cell--narrow"},o.a.createElement(Ut,{label:"Mno\u017estvo"},i("amounts[".concat(n,"]"),{validateTrigger:["onChange"],rules:[{type:"number",min:0,required:!0,whitespace:!0,message:"Vypl\u0148te mno\u017estvo!"}]})(o.a.createElement(Ft.a,{style:{width:"auto"},min:0,decimalSeparator:","})))),o.a.createElement("div",{className:"fz-invoice-items__row__cell fz-invoice-items__row__cell--price"},o.a.createElement(Ut,{label:"Cena za m.j."},i("pricesPU[".concat(n,"]"),{validateTrigger:["onChange"],rules:[{type:"number",required:!0,whitespace:!0,message:"Vypl\u0148te cenu!"}]})(o.a.createElement(Ft.a,{style:{width:"auto"},decimalSeparator:","})))),t===Ee.Taxable?o.a.createElement("div",{className:"fz-invoice-items__row__cell fz-invoice-items__row__cell--narrow"},o.a.createElement(Ut,{label:"DPH %"},i("taxRates[".concat(n,"]"),{validateTrigger:["onChange"],rules:[{type:"number",min:0,max:100,required:!0,whitespace:!0,message:"Vypl\u0148te DPH!"}]})(o.a.createElement(Ft.a,{style:{width:"auto"},min:0,max:100,decimalSeparator:","})))):null),o.a.createElement("div",{className:"fz-invoice-items__row__cell-group fz-invoice-items__row__cell-group__sums"},t===Ee.Taxable?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"fz-invoice-items__row__cell fz-invoice-items__row__cell--sum"},o.a.createElement(Ut,{label:"bez DPH"},o.a.createElement(Dt,{value:ut.format(u)}))),o.a.createElement("div",{className:"fz-invoice-items__row__cell fz-invoice-items__row__cell--sum"},o.a.createElement(Ut,{label:"DPH"},o.a.createElement(Dt,{value:ut.format(m)}))),o.a.createElement("div",{className:"fz-invoice-items__row__cell fz-invoice-items__row__cell--sum"},o.a.createElement(Ut,{label:"s DPH"},o.a.createElement(Dt,{value:ut.format(p)})))):o.a.createElement("div",{className:"fz-invoice-items__row__cell fz-invoice-items__row__cell--sum"},o.a.createElement(Ut,{label:"Suma"},o.a.createElement(Dt,{value:ut.format(u)})))))})),o.a.createElement(wt.a,null,o.a.createElement(Tt.a,{span:16,offset:1},o.a.createElement(Nt.a.Item,Lt,o.a.createElement(nt.a,{type:"dashed",onClick:n,style:{width:"60%"}},o.a.createElement(kt.a,{type:"plus"})," Pridaj polo\u017eku")))),o.a.createElement(wt.a,null,o.a.createElement(Tt.a,null,o.a.createElement("div",{className:"fz-infotip-container fz-infotip"},o.a.createElement(kt.a,{type:"info-circle"}),o.a.createElement("span",{className:"fz-infotip__text ant-form-item"},'Tip: Z\u013eavy je mo\u017en\xe9 zada\u0165 ako polo\u017eky so z\xe1pornou "Cenou za m.j."'))))))},Lt={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:0}}},Bt=function(e){var t=e.netPrice;return o.a.createElement("div",{className:"fz-invoice-sums"},o.a.createElement(wt.a,{className:"fz-invoice-row fz-invoice-row--sum"},o.a.createElement(Tt.a,{span:8,offset:0,className:"fz-invoice-sum"},o.a.createElement(Nt.a.Item,Object.assign({},Mt,{label:"Kone\u010dn\xe1 suma:"}),o.a.createElement(Dt,{value:ut.format(t)})))))},Mt={labelCol:{xs:{span:12,offset:0},sm:{span:12,offset:0},lg:{span:12,offset:0}},wrapperCol:{xs:{span:12,offset:0},sm:{span:12,offset:0},lg:{span:12,offset:0}}},Kt=zt.a.TextArea,Ht=Pt.a.Option,qt={labelCol:{xs:{span:24},sm:{span:8},lg:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16},lg:{span:16}}},Gt={xs:24,sm:16,lg:12},Zt=function(e){Object(C.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSubmit=function(t){e.props.onSubmit(t,e.props.form)},e.handleEntityCreate=function(t){t.preventDefault();var a=!1;t.target instanceof HTMLElement&&("emitent"===t.target.dataset.type&&(a=!0));e.props.onEntityCreate(a)},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props,t=e.items,a=e.netPrice,n=e.grossPrice,r=e.discountPrice,i=e.contacts,c=e.constantSymbols,l=e.isSaving,s=e.onItemAdd,u=e.onItemRemove,d=e.onPdfOpen,m=e.onPdfDownload,v=this.props.form,p=v.getFieldDecorator,f=v.getFieldValue;return o.a.createElement(Nt.a,Object.assign({},qt,{layout:"horizontal",className:"fz-invoice-form",onSubmit:this.handleSubmit}),p("id",{})(o.a.createElement(zt.a,{type:"hidden"})),p("type",{})(o.a.createElement(zt.a,{type:"hidden"})),o.a.createElement(wt.a,{className:"fz-invoice-row"},o.a.createElement(Tt.a,Gt,o.a.createElement(Nt.a.Item,{label:"Odberate\u013e"},p("recipient",{rules:[{required:!0,message:"Vyberte odberate\u013ea!"}]})(o.a.createElement(Pt.a,null,i.map((function(e){return o.a.createElement(Ht,{key:"rcpt_".concat(e.id),value:e.id},e.entity)})))))),o.a.createElement(Tt.a,Gt,o.a.createElement("a",{"data-type":"recipient",style:{lineHeight:"40px",paddingLeft:12},onClick:this.handleEntityCreate},o.a.createElement(kt.a,{type:"plus"}),"\xa0Nov\xfd odberate\u013e"))),o.a.createElement(It.a,null),o.a.createElement(wt.a,{className:"fz-invoice-row"},o.a.createElement(Tt.a,Gt,o.a.createElement(Nt.a.Item,{label:"Dod\xe1vate\u013e"},p("emitent",{rules:[{required:!0,message:"Vyberte dod\xe1vate\u013ea!"}]})(o.a.createElement(Pt.a,null,i.reduce((function(e,t){if(t.isOwn){var a=o.a.createElement(Ht,{key:"emt_".concat(t.id),value:t.id},t.entity);e.push(a)}return e}),[]))))),o.a.createElement(Tt.a,Gt,o.a.createElement("a",{"data-type":"emitent",style:{lineHeight:"40px",paddingLeft:12},onClick:this.handleEntityCreate},o.a.createElement(kt.a,{type:"plus"}),"\xa0Nov\xfd dod\xe1vate\u013e"))),o.a.createElement(It.a,null),o.a.createElement(wt.a,{className:"fz-invoice-row"},o.a.createElement(Tt.a,Gt,o.a.createElement(Nt.a.Item,{label:"Sp\xf4sob \xfahrady"},p("paymentType",{rules:[{required:!0,message:"Ch\xfdbaj\xfaci sp\xf4sob \xfahrady!"}]})(o.a.createElement(Pt.a,null,o.a.createElement(Ht,{value:ye.WireTransfer},"Prevodom"),o.a.createElement(Ht,{value:ye.Card},"Kartou"),o.a.createElement(Ht,{value:ye.Cash},"V hotovosti"),o.a.createElement(Ht,{value:ye.CashOnDelivery},"Dobierka")))),o.a.createElement(Nt.a.Item,{label:"D\xe1tum vystavenia"},p("issueDate",{rules:[{required:!0,message:"Vypl\u0148te d\xe1tum vystavenia!"}]})(o.a.createElement(_t.a,{format:"DD.MM.YYYY"}))),o.a.createElement(Nt.a.Item,{label:"D\xe1tum splatnosti"},p("dueDate",{rules:[{required:!0,message:"Ch\xfdbaj\xfaci d\xe1tum splatnosti!"}]})(o.a.createElement(_t.a,{format:"DD.MM.YYYY"}))),o.a.createElement(Nt.a.Item,{label:"D\xe1tum dodania"},p("deliveryDate",{rules:[{required:!1,message:"Vypl\u0148te d\xe1tum dodania!"}]})(o.a.createElement(_t.a,{format:"DD.MM.YYYY"})))),o.a.createElement(Tt.a,Gt,o.a.createElement(Nt.a.Item,{label:"Variabiln\xfd symbol"},p("variableSymbol",{rules:[{required:!0,message:"Vypl\u0148te variabiln\xfd symbol!"}]})(o.a.createElement(zt.a,null))),o.a.createElement(Nt.a.Item,{label:"Kon\u0161tantn\xfd symbol"},p("constantSymbol",{rules:[{required:!0,message:"Vypl\u0148te kon\u0161tantn\xfd symbol!"}]})(o.a.createElement(Pt.a,null,c.map((function(e){var t=Object(se.a)(e,2),a=t[0],n=t[1];return o.a.createElement(Ht,{key:a,value:a},a," - ",n)}))))),o.a.createElement(Nt.a.Item,{label:"\u010c\xedslo objedn\xe1vky"},p("orderNr",{rules:[{required:!1,message:"Vypl\u0148te \u010d\xedslo objedn\xe1vky!"}]})(o.a.createElement(zt.a,null))))),o.a.createElement(wt.a,{className:"fz-invoice-row"},o.a.createElement(Tt.a,{span:24},o.a.createElement(Nt.a.Item,{label:"Popis"},p("description",{rules:[{required:!1,message:"Vypl\u0148te popis!"}]})(o.a.createElement(zt.a,{placeholder:"Popis objedn\xe1vky"}))))),o.a.createElement(It.a,null),o.a.createElement(Vt,{items:t,type:f("type"),getFieldDecorator:p,onItemAdd:s,onItemRemove:u}),o.a.createElement(Bt,{netPrice:a,grossPrice:n,discountPrice:r,getFieldDecorator:p}),o.a.createElement(wt.a,{className:"fz-invoice-row",type:"flex",justify:"start"},o.a.createElement(Tt.a,{span:24},o.a.createElement(Nt.a.Item,{label:"Text na konci fakt\xfary"},p("finalText",{rules:[{required:!1,message:"Ch\xfdba text!"}]})(o.a.createElement(Kt,{autosize:{minRows:4,maxRows:4}}))))),o.a.createElement(wt.a,{className:"fz-invoice-row"},o.a.createElement(Tt.a,{md:24,span:0,style:{textAlign:"right",margin:15}},o.a.createElement("div",{className:"fz-btn-group"},o.a.createElement(nt.a,{type:"primary",icon:"save",size:"large",onClick:m},"Stiahnu\u0165 PDF"),o.a.createElement(nt.a,{icon:"file-pdf",size:"large",onClick:d},"Zobrazi\u0165 PDF"),o.a.createElement(nt.a,{icon:"save",size:"large",htmlType:"submit",loading:l},"Ulo\u017ei\u0165 Fakt\xfaru"))),o.a.createElement(Tt.a,{xs:24,sm:24,md:0,span:0},o.a.createElement("div",{className:"fz-btn-group"},o.a.createElement(nt.a,{icon:"file-pdf",size:"large",onClick:m},"PDF"),o.a.createElement(nt.a,{type:"primary",icon:"save",size:"large",htmlType:"submit",loading:l},"Ulo\u017ei\u0165")))))}}]),a}(i.Component),Xt=Nt.a.create({name:"invoice",onFieldsChange:function(e,t,a){e.onFieldsChange(t,a)},mapPropsToFields:function(e){var t=e.fields;return 0===Object.keys(t).length?{}:{id:Nt.a.createFormField(t.id),type:Nt.a.createFormField(t.type),recipient:Nt.a.createFormField(t.recipient),emitent:Nt.a.createFormField(t.emitent),paymentType:Nt.a.createFormField(t.paymentType),dueDate:Nt.a.createFormField(t.dueDate),issueDate:Nt.a.createFormField(t.issueDate),deliveryDate:Nt.a.createFormField(t.deliveryDate),paymentDate:Nt.a.createFormField(t.paymentDate),isPayed:Nt.a.createFormField({value:!!t.paymentDate.value}),variableSymbol:Nt.a.createFormField(t.variableSymbol),constantSymbol:Nt.a.createFormField(t.constantSymbol),orderNr:Nt.a.createFormField(t.orderNr),description:Nt.a.createFormField(t.description),finalText:Nt.a.createFormField(t.finalText),itemsNames:t.itemsNames&&t.itemsNames.map((function(e){return Nt.a.createFormField(e)})),pricesPU:t.pricesPU&&t.pricesPU.map((function(e){return Nt.a.createFormField(e)})),units:t.units&&t.units.map((function(e){return Nt.a.createFormField(e)})),amounts:t.amounts&&t.amounts.map((function(e){return Nt.a.createFormField(e)})),taxRates:t.taxRates&&t.taxRates.map((function(e){return Nt.a.createFormField(e)})),grossPrices:t.grossPrices&&t.grossPrices.map((function(e){return Nt.a.createFormField(e)})),taxPrices:t.taxPrices&&t.taxPrices.map((function(e){return Nt.a.createFormField(e)})),netPrices:t.netPrices&&t.netPrices.map((function(e){return Nt.a.createFormField(e)})),discount:Nt.a.createFormField(t.discount),grossPrice:Nt.a.createFormField(t.grossPrice),discountPrice:Nt.a.createFormField(t.discountPrice),netPrice:Nt.a.createFormField(t.netPrice)}},onValuesChange:function(e,t){e.onValuesChange&&e.onValuesChange(t)}})(Zt);var Yt=function(e){Object(C.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).assertUniqueId=function(e,t,a){if(!t)return a();n.props.onInvoiceCheckExists(t).then((function(e){a(!!e||void 0)}))},n.assertUniqueId=function(e,t,a){var n;return function(){var r=this,i=arguments,o=function(){n=null,a||e.apply(r,i)},c=a&&!n;clearTimeout(n),n=setTimeout(o,t),c&&e.apply(r,i)}}(n.assertUniqueId,250,!1),n}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.invoiceId;return o.a.createElement(Nt.a,null,o.a.createElement(Nt.a.Item,{hasFeedback:!0,label:"Nov\xfd identifik\xe1tor"},e("invoiceId",{rules:[{required:!0,message:"Vypl\u0148te id dokladu!"},{validator:this.assertUniqueId,message:"Id dokladu u\u017e bolo pou\u017eit\xe9!"}],initialValue:t})(o.a.createElement(zt.a,null))))}}]),a}(i.Component),Wt=Nt.a.create({name:"change_invoice_id"})(Yt),Jt=(a(202),a(141)),$t=function(){return o.a.createElement("div",null,o.a.createElement(Jt.a,{size:"large"}),o.a.createElement("br",null))},Qt=function(e){var t=Number((100*Math.abs(e)).toPrecision(15));return Math.round(t)/100*Math.sign(e)},ea=function(e){if(e)return dt.format(e).toUpperCase().replace(/[^A-Z0-9\\.]/g,"")},ta=function(e){if(e){var t=e.getFullYear(),a=He(String(e.getMonth()+1),2,"0"),n=He(String(e.getDate()),2,"0");return"".concat(t).concat(a).concat(n)}},aa=function(){function e(){Object(E.a)(this,e)}return Object(b.a)(e,[{key:"mapTaxSummary",value:function(e){if(!Array.isArray(e))return[];var t=ut.format,a=e.reduce((function(e,t){var a=t.taxRate,n=t.netPrice,r=e.get(a)||0;return e.set(a,r+n),e}),new Map),n=Array.from(a.entries()).map((function(e){var t=Object(se.a)(e,2),a=t[0],n=t[1],r=n/100*a;return{taxRate:a,netPrice:n,taxPrice:r,grossPrice:n+r}})).sort((function(e,t){var a=e.taxRate,n=t.taxRate;return a<n?-1:a>n?1:0}));if(n.length>1){var r=n.reduce((function(e,t){return e.netPrice+=t.netPrice,e.taxPrice+=t.taxPrice,e.grossPrice+=t.grossPrice,e}),{taxRate:-1,netPrice:0,taxPrice:0,grossPrice:0});n.push(r)}return n.map((function(e){var a=e.taxRate,n=e.netPrice,r=e.taxPrice,i=e.grossPrice;return{taxRate:-1===a?"Celkom":"".concat(a," %"),netPrice:t(n),taxPrice:t(r),grossPrice:t(i)}}))}},{key:"toInvoiceDefinition",value:function(){var e=Object(ve.a)(me.a.mark((function e(t){var n,r,i,o,c,l,s,u,d;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=st.format,r=ut.format,i=t.emitent,o=void 0===i?new Te:i,c=t.recipient,l=void 0===c?new Te:c,e.next=5,Promise.all([a.e(3),a.e(5)]).then(a.bind(null,705));case 5:return s=e.sent,u=s.createPayBySquareSVG,e.next=9,u(Qt(t.netPrice),"EUR",ta(t.dueDate),t.variableSymbol,t.constantSymbol,"","\xdahrada fakt\xfary ".concat(t.variableSymbol),o.iban,o.swift);case 9:return d=e.sent,e.abrupt("return",{id:t.id,type:t.type,paymentType:Me[t.paymentType]||"",currency:"EUR",dueDate:ea(t.dueDate),issueDate:ea(t.issueDate),deliveryDate:ea(t.deliveryDate),paymentDate:ea(t.paymentDate),variableSymbol:t.variableSymbol,constantSymbol:t.constantSymbol,orderNr:t.orderNr,description:t.description,finalText:t.finalText,discount:t.discount,items:t.items.map((function(e){return Object(le.a)(Object(le.a)({},e),{},{pricePerUnit:"".concat(n(e.pricePerUnit)," ").concat("\u20ac"),grossPrice:r(e.grossPrice),netPrice:r(e.netPrice),taxPrice:r(e.taxPrice)})})),emitent:Object(le.a)(Object(le.a)({},o),{},{iban:mt(o.iban),zipCode:vt(o.zipCode)}),recipient:Object(le.a)(Object(le.a)({},l),{},{zipCode:vt(l.zipCode)}),grossPrice:r(t.grossPrice),netPrice:r(t.netPrice),discountPrice:r(t.discountPrice),taxSummary:this.mapTaxSummary(t.items),payBySquareSVG:d});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function na(e){localStorage.setItem("message",JSON.stringify(e)),localStorage.removeItem("message")}var ra=[["0008","Platby za tovar (okrem platieb pod symbolmi 010x)"],["0028","Platby za dod\xe1vky investi\u010dnej povahy"],["0038","Prostriedky na mzdy"],["0058","Pen\xe1le, poplatky z ome\u0161kania, in\xe9 majetkov\xe9 sankcie, n\xe1hrady \u0161k\xf4d"],["0068","Prevody prostriedkov na mzdy a ostatn\xe9 osobn\xe9 n\xe1klady"],["0078","Tr\u017eby za predan\xfd tovar a poskytnut\xe9 stravovanie"],["0108","Platby za po\u013enohospod\xe1rske v\xfdrobky"],["0138","Zr\xe1\u017eky z miezd"],["0158","Hospod\xe1rsko operat\xedvne v\xfddavky"],["0168","Spl\xe1tky \xfaverov a p\xf4\u017ei\u010diek"],["0178","Tr\u017eby za poskytnut\xe9 slu\u017eby"],["0308","Platby za slu\u017eby"],["0358","Platby ur\u010den\xe9 na v\xfdplaty v hotovosti prostredn\xedctvom p\xf4\u0161t"],["0558","Finan\u010dn\xe9 platby ostatn\xe9"],["0858","Prechodne poskytnut\xe9 p\xf4\u017ei\u010dky"],["0938","D\xe1vky soci\xe1lneho zabezpe\u010denia"],["0968","Ostatn\xe9 prevody medzi \xfa\u010dtami toho ist\xe9ho klienta"],["1018","Pr\xedjmy z podnikania a vlastn\xedctva majetku - vo vz\u0165ahu k \u0160R"],["1118","Administrat\xedvne a in\xe9 poplatky a platby - vo vz\u0165ahu k \u0160R"],["1144","Be\u017en\xe1 z\xe1loha dane"],["1144","Platba be\u017en\xe1, preddavok na da\u0148"],["1148","Be\u017en\xe1 z\xe1loha dane"],["1318","Pr\xedjmy zo spl\xe1c. p\xf4\u017ei\u010d. poskytnut\xfdch zo \u0160R a z predaja \xfa\u010das. majetku \u0161t\xe1tu"],["1344","Do\xfa\u010dtovanie dan\xed za predch\xe1dzaj\xface zda\u0148ovacie obdobie"],["1348","Do\xfa\u010dtovanie dan\xed za predch\xe1dzaj\xface zda\u0148ovacie obdobie"],["1548","Dodato\u010dn\xe9 da\u0148ov\xe9 priznanie"],["1744","Vy\xfa\u010dtovanie dane za posledn\xe9 zda\u0148ovacie obdobie DPFO a DPPO"],["1748","Vy\xfa\u010dtovanie dane za posledn\xe9 zda\u0148ovacie obdobie (DPFO, DPPO)"],["1944","Z\xfa\u010dtovanie rozdielov preddavkov dane z pr\xedjmu zo z\xe1vislej \u010dinnosti, dane vyberanej zr\xe1\u017ekou a zabezpe\u010den\xed dane"],["1948","Z\xfa\u010dt. rozdielov predd. na da\u0148 z pr\xedjmov zo z\xe1v. \u010dinnosti, zr\xe1\u017eky dan\xed"],["2018","Ostatn\xe9 pr\xedjmy vo vz\u0165ahu k \u0160R"],["2058","N\xe1kup cenn\xfdch papierov (akcie, dlhopisy, zmenky)"],["2144","Dodato\u010dne vyruben\xe1 da\u0148"],["2148","Dodato\u010dne vyruben\xe1 da\u0148"],["2558","\xdahrady poistn\xfdch plnen\xed pois\u0165ov\u0148ami"],["2848","Pau\u0161. da\u0148 pod\u013ea \xa715Z.\u010d. 366/1999 Z.z. o dan. z pr\xedjmov"],["3058","Predaj cenn\xfdch papierov"],["3118","Poistn\xe9 a pr\xedspevok zamestn\xe1vate\u013ea do pois\u0165ovn\xed a N\xdaP"],["3148","Pen\xe1le z kontroly"],["3344","Sank\u010dn\xfd \xfarok, pen\xe1le"],["3348","Pen\xe1le zo spr\xe1vy"],["3548","Pen\xe1le vyruben\xe9 da\u0148ov\xfdmi organmi z kontroly"],["3558","Platby poistn\xe9ho pois\u0165ovniam"],["3718","N\xe1jomn\xe9 za pren\xe1jom - vo vz\u0165ahu k \u0160R"],["3748","Pen\xe1le vyruben\xe9 da\u0148ov\xfdmi org\xe1nmi zo spr\xe1vy"],["4058","Vypl\xe1canie v\xfdnosov z cenn. papierov, splatnos\u0165 menovitej hodnoty"],["4948","Vr\xe1tenie dane - nepriame dane"],["5058","Ostatn\xe9 obchody s cenn\xfdmi papiermi"],["5118","Spl\xe1canie \xfarokov a ostatn\xe9 platby s\xfavisiace s \xfavermi - vo vz\u0165ahu k \u0160R"],["5144","Zv\xfd\u0161enie dane"],["5148","Zv\xfd\u0161enie dane"],["5344","Nadmern\xfd odpo\u010det"],["5348","N\xe1rok na odpo\u010det dane"],["5748","Dodato\u010dn\xe9 da\u0148ov\xe9 priznanie"],["5918","Spl\xe1canie dom. istiny, spl\xe1c. v\xfdnosy z cenn\xfdch papierov - vo vz\u0165ahu k \u0160R"],["5944","Zv\xfd\u0161enie dane - da\u0148ov\xe1 in\u0161pekcia"],["5948","Zv\xfd\u0161enie dane - da\u0148ov\xe1 in\u0161pekcia"],["6144","Dodato\u010dn\xe1 platba z da\u0148ovej in\u0161pekcie"],["6148","Dodato\u010dn\xe1 platba z da\u0148ovej in\u0161pekcie"],["6344","Pokuta z kontroly"],["6348","Pokuta z kontroly"],["6544","Pokuta zo spr\xe1vy"],["6548","Pokuta zo spr\xe1vy"],["6744","Pokuty vyruben\xe9 da\u0148ovou in\u0161pekciou"],["6748","Pokuty vyruben\xe9 da\u0148ovou in\u0161pekciou"],["6948","Pokuty vyruben\xe9 da\u0148ov\xfdm org\xe1nom, kt. nie s\xfa pr\xedjmom osobn\xe9ho \xfa\u010dtu \u0160R"],["7144","Sank\u010dn\xfd \xfarok z da\u0148ovej in\u0161pekcie"],["7148","Pen\xe1le z da\u0148ovej in\u0161pekcie"],["7344","\xdarok pri odklade platenia"],["7348","\xdarok pri odklade platenia"],["7544","Exeku\u010dn\xe9 n\xe1klady"],["7548","Exeku\u010dn\xe9 n\xe1klady"],["7748","\xdarok platen\xfd da\u0148ov\xe9mu subjektu za oneskorenie vr\xe1tenia preplatku"],["7944","Blokov\xe9 pokuty vyruben\xe9 da\u0148ov\xfdm \xfaradom"],["7948","Blokov\xe9 pokuty vyruben\xe9 da\u0148ov\xfdm \xfaradom"],["8144","Platba (\xfa\u010dtovan\xe1 s\xfa\u010dasne s predpisom)"],["8148","Platba (\xfa\u010dtovan\xe1 s\xfa\u010dasne s predpisom)"],["8748","Platba na vyrovnanie preplatku"]],ia=(a(496),function(e){Object(C.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(E.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).formRef=void 0,e.changeIdFormRef=void 0,e.state={isGiveCreditModalVisible:!1,isChangeIdModalVisible:!1},e.handleSubmit=function(t,a){t.preventDefault();var n=a.getFieldsValue(),r=rt.a.loading("Uklad\xe1m fakt\xfaru...",0);e.props.onSave(n,e.props.itemKeys).then(r).catch((function(e){r(),rt.a.error(e.message)}))},e.handleItemAdd=function(){e.props.onItemAdd(e.props.invoiceId)},e.handleItemRemove=function(t){e.props.onItemRemove(e.props.invoiceId,t)},e.handleFieldsChange=function(t,a){e.props.onFieldsChange(t,a)},e.handleEntityCreate=function(t){var a=e.formRef.props.form.getFieldsValue();e.props.onEntityCreate(a,e.props.itemKeys,t,e.props.history)},e.showChangeIdModal=function(){e.setState({isChangeIdModalVisible:!0})},e.handleChangeId=function(){e.changeIdFormRef.props.form.validateFields((function(t,a){if(!t){var n=e.props,r=n.itemKeys,i=n.history,o=e.formRef.props.form.getFieldsValue();e.props.onInvoiceChangeId(a.invoiceId,o,r,i),e.setState({isChangeIdModalVisible:!1})}}))},e.handleCancelChangeId=function(){e.changeIdFormRef.props.form.setFieldsValue({invoiceId:e.props.invoiceId}),e.setState({isChangeIdModalVisible:!1})},e.handleCheckInvoiceExists=function(t){return e.props.onInvoiceCheckExists(t)},e.handleBackButton=function(){e.props.history.goBack()},e.makePdfInIframe=function(t){if(document.getElementById("pdfmaker"))na({command:"downloadInvoicePdf",data:t});else{var a=document.createElement("iframe");a.setAttribute("id","pdfmaker"),a.src="".concat(window.location.origin,"/pdf.html"),a.onload=function(){na({command:"downloadInvoicePdf",data:t})},document.body.appendChild(a)}e.setState({isGiveCreditModalVisible:!0})},e.makePdf=function(t){var n=t.action;e.formRef.props.form.validateFieldsAndScroll(function(){var t=Object(ve.a)(me.a.mark((function t(r,i){var o,c,l,s,u,d,m,v,f,h,y;return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=2;break}return t.abrupt("return");case 2:return o=rt.a.loading("Uklad\xe1m fakt\xfaru...",0),p.a.event({category:"Make Pdf",action:"User pressed the PDF button"}),t.prev=4,c=e.props.itemKeys,t.next=8,e.props.onSave(i,c);case 8:return l=t.sent,o(),s=rt.a.loading("Generujem pdf...",0),u=new aa,t.next=14,u.toInvoiceDefinition(l);case 14:if(d=t.sent,!document.documentMode){t.next=21;break}e.makePdfInIframe(d),s(),t.next=39;break;case 21:return t.prev=21,t.next=24,Promise.all([a.e(4),a.e(6)]).then(a.bind(null,704));case 24:return m=t.sent,v=m.PdfMaker,f=new v,t.next=29,f[n](d);case 29:e.setState({isGiveCreditModalVisible:!0}),t.next=38;break;case 32:t.prev=32,t.t0=t.catch(21),h=t.t0.message||t.t0,y=RegExp("window blocked by browser").test(h),p.a.exception({description:"Error while generating pdf ".concat(l.id,": ").concat(h),fatal:!y}),y?h.error("Nie je mo\u017en\xe9 zobrazi\u0165 PDF, preto\u017ee v\xe1\u0161 prehliada\u010d blokuje popup okn\xe1. Povo\u013ete popup okn\xe1 a sk\xfaste znova.",10):h.error("Na\u010d\xedtanie kni\u017enice zlyhalo: ".concat(h));case 38:s();case 39:t.next=45;break;case 41:t.prev=41,t.t1=t.catch(4),o(),rt.a.error(t.t1.message);case 45:case"end":return t.stop()}}),t,null,[[4,41],[21,32]])})));return function(e,a){return t.apply(this,arguments)}}())},e.handlePdfOpen=function(){e.makePdf({action:"openInvoicePdf"})},e.handlePdfDownload=function(){e.makePdf({action:"downloadInvoicePdf"})},e}return Object(b.a)(n,[{key:"componentWillMount",value:function(){this.props.fetchForm(this.props.invoiceId)}},{key:"componentWillReceiveProps",value:function(e){e.invoiceId!==this.props.invoiceId&&this.props.fetchForm(e.invoiceId)}},{key:"render",value:function(){var e=this,t=this.props,a=t.invoiceId,n=t.fields,r=t.items,i=t.netPrice,c=t.grossPrice,l=t.discountPrice,s=t.contacts,u=t.isFetching,d=t.isSaving,m=this.state,v=m.isGiveCreditModalVisible,p=m.isChangeIdModalVisible;return o.a.createElement("div",null,o.a.createElement(tt.a,{title:"Zmena identifik\xe1tora fakt\xfary",visible:p,onOk:this.handleChangeId,onCancel:this.handleCancelChangeId},o.a.createElement(Wt,{wrappedComponentRef:function(t){e.changeIdFormRef=t},invoiceId:a,onInvoiceCheckExists:this.handleCheckInvoiceExists})),o.a.createElement(tt.a,{title:"V\xe1\u0161 n\xe1zor je d\xf4le\u017eit\xfd",visible:v,cancelButtonProps:{style:{display:"none"}},onOk:function(){e.setState({isGiveCreditModalVisible:!1})}},o.a.createElement("p",null,"Ak ste boli spokojn\xfd s vystavenou fakt\xfarou, dajte n\xe1m pros\xedm lajk a zdie\u013eanie na"," ",o.a.createElement("a",{href:"https://www.facebook.com/FakturaZdarma/"},"na\u0161om facebooku"),". Pote\u0161\xed n\xe1s to. \ud83d\ude09"),o.a.createElement("iframe",{src:"https://www.facebook.com/plugins/like.php?href=https%3A%2F%2Fwww.facebook.com%2Ffakturazdarma&width=450&layout=standard&action=like&size=small&share=true&height=35&appId",width:"450",height:"35",style:{border:"none",overflow:"hidden"},scrolling:"no",allowTransparency:!0,allow:"encrypted-media"})),o.a.createElement(St.a,{classNamePrefix:"fz-loading-overlay_",active:u,spinner:o.a.createElement($t,null),text:"Nahr\xe1vam fakt\xfaru...",styles:{overlay:{},content:{},spinner:{}}},o.a.createElement(gt.a,{onBack:this.handleBackButton,title:o.a.createElement("span",null,o.a.createElement("span",null,"Fakt\xfara\xa0",a,"\xa0\xa0"),o.a.createElement(kt.a,{type:"edit",style:{color:"#40a9ff"},onClick:this.showChangeIdModal})),subTitle:""}),o.a.createElement(Xt,{wrappedComponentRef:function(t){e.formRef=t},fields:n,items:r,netPrice:i,grossPrice:c,discountPrice:l,contacts:s,constantSymbols:ra,isSaving:d,onSubmit:this.handleSubmit,onPdfOpen:this.handlePdfOpen,onPdfDownload:this.handlePdfDownload,onItemAdd:this.handleItemAdd,onItemRemove:this.handleItemRemove,onEntityCreate:this.handleEntityCreate,onFieldsChange:this.handleFieldsChange}),o.a.createElement(Ct.a,{className:"fz-back-top"},o.a.createElement("div",{className:"fz-back-top-inner"},o.a.createElement(kt.a,{type:"up"})))))}}]),n}(i.Component)),oa=Object(s.f)(Object(m.b)((function(e,t){var a=t.match.params.id,n=function(e,t){var a=e.invoiceUI,n=a.fields,r=a.itemKeys,i=t.match.params.id;return n.id&&n.id.value===i?{fields:n,itemKeys:r}:{fields:{},itemKeys:[]}}(e,t),r=(new Ke).fromFields(n.fields,n.itemKeys);return Object(le.a)(Object(le.a)(Object(le.a)({},e.invoiceUI),n),{},{invoiceId:a,items:r.items,netPrice:r.netPrice,grossPrice:r.grossPrice,discountPrice:r.discountPrice,contacts:e.contacts})}),(function(e){return{fetchForm:function(t){return e(Ze(t))},onFieldsChange:function(t,a){return e(Ge(t,a))},onItemAdd:function(t){return e((function(e,t){var a=t().invoiceUI.itemKeys;a=[].concat(Object(ue.a)(a),[0===a.length?0:a[a.length-1]+1]),e({type:X,payload:{itemKeys:a}})}))},onItemRemove:function(t,a){return e(function(e,t){return function(e,a){var n=a().invoiceUI,r=n.itemKeys,i=n.fields;if(1===r.length)return!1;["itemsNames","pricesPU","units","amounts","taxRates","itemKeys"].forEach((function(e){i.hasOwnProperty(e)&&delete i[e][t]})),r=r.filter((function(e){return e!==t})),e({type:X,payload:{itemKeys:r,fields:Object(le.a)({},i)}})}}(0,a))},onSave:function(t,a){return e(Ye(t,a))},onInvoiceChangeId:function(t,a,n,r){return e(function(e,t,a,n){return function(r,i){var o=Xe(t,a,i()),c=o.id;return o.id=e,r({type:Y,payload:{}}),we.saveInvoice(o).then((function(e){return n.replace("/invoices/".concat(e.id)),c!==e.id&&r(We([c])),new Ue(e)})).then((function(e){r({type:W,payload:e})})).catch((function(e){throw r({type:J,payload:e}),e}))}}(t,a,n,r))},onInvoiceCheckExists:function(t){return e(function(e){return function(t,a){var n=a().invoices.find((function(t){return t.id===e}));return Promise.resolve(!!n)}}(t))},onEntityCreate:function(t,a,n,r){return e(function(e,t,a,n){return function(r){return r(Ye(e,t,!0)).then((function(){return r(je(n,a))}))}}(t,a,n,r))}}}))(ia)),ca=a(288),la=a.n(ca),sa=(a(157),a(61)),ua={xs:24,sm:16,lg:12},da=function(e){Object(C.a)(a,e);var t=Object(g.a)(a);function a(){return Object(E.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props,t=e.getFieldDecorator,a=e.fieldPrefix,n=void 0===a?"":a,r=e.isOwn;return o.a.createElement(o.a.Fragment,null,o.a.createElement(wt.a,{className:"fz-contact-row"},o.a.createElement(Tt.a,ua,o.a.createElement(Nt.a.Item,{label:"Firma"},t("".concat(n,"entity"),{rules:[{required:!0,message:"Uve\u010fte n\xe1zov firmy!"}]})(o.a.createElement(zt.a,null))),o.a.createElement(Nt.a.Item,{label:"Ulica"},t("".concat(n,"street"),{rules:[{required:!0,message:"Uve\u010fte ulicu!"}]})(o.a.createElement(zt.a,null))),o.a.createElement(Nt.a.Item,{label:"PS\u010c"},t("".concat(n,"zipCode"),{rules:[{required:!0,message:"Uve\u010fte PS\u010c!"}]})(o.a.createElement(zt.a,null))),o.a.createElement(Nt.a.Item,{label:"Mesto"},t("".concat(n,"city"),{rules:[{required:!0,message:"Uve\u010fte mesto!"}]})(o.a.createElement(zt.a,null))),o.a.createElement(Nt.a.Item,{label:"Krajina"},t("".concat(n,"country"),{rules:[{required:!0,message:"Uve\u010fte krajinu!"}]})(o.a.createElement(zt.a,null)))),o.a.createElement(Tt.a,ua,o.a.createElement(Nt.a.Item,{label:"I\u010cO"},t("".concat(n,"legalId"),{rules:[{required:!0,message:"Uve\u010fte I\u010cO!"}]})(o.a.createElement(zt.a,null))),o.a.createElement(Nt.a.Item,{label:"DI\u010c"},t("".concat(n,"taxId"),{rules:[{required:!0,message:"Uve\u010fte DI\u010c!"}]})(o.a.createElement(zt.a,null))),o.a.createElement(Nt.a.Item,{label:"I\u010c DPH",extra:o.a.createElement("span",null,o.a.createElement(kt.a,{type:"info-circle",style:{color:"#40a9ff"}}),"\xa0Ak vypln\xedte I\u010c DPH formul\xe1r fakt\xfary sa automaticky prepne do re\u017eimu DPH.")},t("".concat(n,"taxLegalId"),{rules:[{required:!1,message:"Uve\u010fte I\u010c DPH!"}]})(o.a.createElement(zt.a,null))))),o.a.createElement(wt.a,{className:"fz-contact-row"},o.a.createElement(Tt.a,ua,o.a.createElement(Nt.a.Item,{label:"Moja firma",extra:o.a.createElement("span",null,o.a.createElement(kt.a,{type:"info-circle",style:{color:"#40a9ff"}}),"\xa0Za\u0161krtnite, ak chcete vystavova\u0165 fakt\xfary na t\xfato firmu. \xa0Bankov\xe9 spojenie je povinn\xe9.")},t("isOwn",{rules:[{type:"boolean",required:!1,message:"Ch\xfdbaj\xfaci \xfadaj!"}],valuePropName:"checked"})(o.a.createElement(sa.a,{disabled:r}))))))}}]),a}(i.Component),ma={xs:24,sm:16,lg:12},va=function(e){Object(C.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).validateIBAN=function(){var t=e.props,a=t.getFieldsValue,n=t.fieldPrefix,r=void 0===n?"":n,i=a(),o=i["".concat(r,"iban")];if(!o)return null;var c=lt(o);if(!1===c)return"Pravdepodobne nespr\xe1vny IBAN.";if(1!==c)return"Chyba kontroln\xe9ho s\xfa\u010dtu. Pravdepodobne nespr\xe1vny IBAN.";var l=i["".concat(r,"swift")],s=i["".concat(r,"bankCode")],u=i["".concat(r,"bankAccount")];return l&&o.substring(0,2)!=l.substring(4,6)?"K\xf3d krajiny (SWIFT) sa nezhoduje.":s&&o.substring(4,4+s.length)!=s?"K\xf3d banky sa nezhoduje.":u&&!o.endsWith(u.toUpperCase().replace(/[^A-Z0-9]/g,""))?"\u010c\xedslo \xfa\u010dtu sa nezhoduje.":void 0},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props,t=e.isRequired,a=e.bankList,n=e.fieldPrefix,r=void 0===n?"":n,i=e.getFieldDecorator,c=this.validateIBAN();return o.a.createElement(wt.a,{className:"fz-contact-row"},o.a.createElement(Tt.a,ma,o.a.createElement(Nt.a.Item,{label:"Zoznam b\xe1nk"},i("".concat(r,"bankIndex"),{preserve:!0})(o.a.createElement(Pt.a,null,a.map((function(e,t){var a=Object(se.a)(e,2),n=a[0],r=a[1];return o.a.createElement(Pt.a.Option,{key:r,value:t},r," - ",n)}))))),o.a.createElement(Nt.a.Item,{label:"N\xe1zov banky"},i("".concat(r,"bankName"),{preserve:!0,rules:[{required:t,message:"Uve\u010fte n\xe1zov banky!"}]})(o.a.createElement(zt.a,null))),o.a.createElement(Nt.a.Item,{label:"K\xf3d banky"},i("".concat(r,"bankCode"),{preserve:!0,rules:[{required:t,message:"Uve\u010fte k\xf3d banky!"}]})(o.a.createElement(zt.a,null))),o.a.createElement(Nt.a.Item,{label:"SWIFT"},i("".concat(r,"swift"),{preserve:!0,rules:[{required:t,message:"Uve\u010fte SWIFT!"},{min:8,message:"Minim\xe1lne 8 znakov!"}]})(o.a.createElement(zt.a,null))),o.a.createElement(Nt.a.Item,{hasFeedback:!0,label:"IBAN",help:c,validateStatus:c?"warning":""},i("".concat(r,"iban"),{validateTrigger:"onBlur",preserve:!0,rules:[{required:t,message:"Uve\u010fte IBAN!"}]})(o.a.createElement(zt.a,null))),o.a.createElement(Nt.a.Item,{label:"\u010c\xedslo \xfa\u010dtu"},i("".concat(r,"bankAccount"),{preserve:!0,rules:[{required:t,message:"Uve\u010fte \u010d\xedslo \xfa\u010dtu!"}]})(o.a.createElement(zt.a,null)))))}}]),a}(i.Component),pa={labelCol:{xs:{span:24},sm:{span:8},lg:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16},lg:{span:16}}},fa={xs:24,sm:16,lg:12},ha=function(e){Object(C.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSubmit=function(t){e.props.onSubmit(t,e.props.form)},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.isOwn,n=e.isBankRequired,r=e.isBankExpanded,i=e.isContactExpanded,c=e.isSaving,l=e.bankList,s=e.onToggleBankSection,u=e.onToggleContactSection,d=t.getFieldDecorator;return o.a.createElement(Nt.a,Object.assign({},pa,{layout:"horizontal",className:"fz-contact-form",onSubmit:this.handleSubmit}),d("id",{})(o.a.createElement(zt.a,{type:"hidden"})),o.a.createElement(da,Object.assign({},t,{isOwn:a})),o.a.createElement(wt.a,{className:"fz-contact-row"},o.a.createElement(Tt.a,fa,o.a.createElement("a",{className:"fz-contact-row-expander",onClick:s},"Bankov\xe9 spojenie ",o.a.createElement(kt.a,{type:r?"up":"down"})))),o.a.createElement("div",{className:"fz-contact-row-collapsible fz-contact-row--".concat(a||r?"expanded":"collapsed")},o.a.createElement("h4",{className:"fz-contact-header fz-contact-header--expanded"},"Bankov\xe9 spojenie"),o.a.createElement(va,Object.assign({},t,{isRequired:n,bankList:l}))),o.a.createElement(wt.a,{className:"fz-contact-row"},o.a.createElement(Tt.a,fa,o.a.createElement("a",{className:"fz-contact-row-expander",onClick:u},"Kontaktn\xe1 osoba ",o.a.createElement(kt.a,{type:i?"up":"down"})))),o.a.createElement("div",{className:"fz-contact-row-collapsible fz-contact-row--".concat(i?"expanded":"collapsed")},o.a.createElement("h4",{className:"fz-contact-header fz-contact-header--expanded"},"Kontaktn\xe1 osoba"),o.a.createElement(wt.a,null,o.a.createElement("div",{className:"fz-contact-row fz-contact-row"},o.a.createElement(Tt.a,fa,o.a.createElement(Nt.a.Item,{label:"Meno"},d("name",{preserve:!0,rules:[{required:!1,message:"Uve\u010fte meno!"}]})(o.a.createElement(zt.a,null))),o.a.createElement(Nt.a.Item,{label:"Email"},d("email",{preserve:!0,rules:[{type:"email",message:"Zadan\xfd text nie je platn\xfd email!"}]})(o.a.createElement(zt.a,null))),o.a.createElement(Nt.a.Item,{label:"Tel. \u010d\xedslo"},d("phoneNr",{preserve:!0,rules:[{required:!1,message:"Uve\u010fte tel. \u010d\xedslo!"}]})(o.a.createElement(zt.a,null))))))),o.a.createElement(wt.a,{className:"fz-contact-row"},o.a.createElement(Tt.a,{span:24,style:{textAlign:"right",margin:15}},o.a.createElement("div",{className:"fz-btn-group"},o.a.createElement(nt.a,{type:"primary",icon:"save",size:"large",htmlType:"submit",loading:c},"Ulo\u017ei\u0165")))))}}]),a}(i.Component),ya=Nt.a.create({name:"contact",onFieldsChange:function(e,t,a){e.onFieldsChange(t,a)},mapPropsToFields:function(e){var t=e.fields,a=e.bankList,n=e.isOwn;return 0===Object.keys(t).length?{isOwn:Nt.a.createFormField({value:n})}:{id:Nt.a.createFormField(t.id),entity:Nt.a.createFormField(t.entity),street:Nt.a.createFormField(t.street),zipCode:Nt.a.createFormField(t.zipCode),city:Nt.a.createFormField(t.city),country:Nt.a.createFormField(t.country),legalId:Nt.a.createFormField(t.legalId),taxId:Nt.a.createFormField(t.taxId),taxLegalId:Nt.a.createFormField(t.taxLegalId),bankIndex:Nt.a.createFormField({value:a.find((function(e){var a=Object(se.a)(e,3),n=(a[0],a[1]);a[2];return n===t.bankCode.value}))}),bankName:Nt.a.createFormField(t.bankName),bankCode:Nt.a.createFormField(t.bankCode),swift:Nt.a.createFormField(t.swift),iban:Nt.a.createFormField(t.iban),bankAccount:Nt.a.createFormField(t.bankAccount),name:Nt.a.createFormField(t.name),email:Nt.a.createFormField(t.email),phoneNr:Nt.a.createFormField(t.phoneNr),isOwn:Nt.a.createFormField(n?{value:n}:t.isOwn)}},onValuesChange:function(e,t){e.onValuesChange&&e.onValuesChange(t)}})(ha),Ea=(a(508),function(e){Object(C.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSubmit=function(t,a){t.preventDefault(),a.validateFieldsAndScroll((function(t,a){if(t)return rt.a.error("Formul\xe1r obsahuje chyby!"),!1;console.log("submit",JSON.stringify(a)),e.props.onSave(a,e.props.history).catch((function(e){rt.a.error(e.message)}))}))},e}return Object(b.a)(a,[{key:"componentWillMount",value:function(){this.props.fetchForm(this.props.contactId)}},{key:"componentWillReceiveProps",value:function(e){e.contactId!==this.props.contactId&&this.props.fetchForm(e.contactId)}},{key:"render",value:function(){var e=this,t=this.props,a=t.contactId,n=t.forceOwn,r=t.isSaving,i=t.isFetching,c=t.isBankRequired,l=t.isBankExpanded,s=t.isContactExpanded,u=t.fields,d=t.bankList,m=t.onFieldsChange,v=t.onToggleBankSection,p=t.onToggleContactSection;return o.a.createElement("div",null,o.a.createElement(St.a,{classNamePrefix:"fz-loading-overlay_",active:i,spinner:o.a.createElement($t,null),text:"Nahr\xe1vam kontakt...",styles:{overlay:{},content:{}}},o.a.createElement(gt.a,{onBack:function(){return e.props.history.goBack()},title:"Kontakt #".concat(a),subTitle:""}),o.a.createElement(ya,{fields:u,bankList:d,isOwn:n,isBankRequired:c,isSaving:r,isBankExpanded:l,isContactExpanded:s,onFieldsChange:m,onSubmit:this.handleSubmit,onToggleBankSection:v,onToggleContactSection:p}),o.a.createElement(Ct.a,{className:"fz-back-top"},o.a.createElement("div",{className:"fz-back-top-inner"},o.a.createElement(kt.a,{type:"up"})))))}}]),a}(i.Component)),ba=Object(s.f)(Object(m.b)((function(e,t){var a=e.contactUI,n=e.bankList,r=t.location,i=t.match.params.id,o="true"===la.a.parse(r.search).isOwn,c=function(e,t){var a=e.contactUI,n=t.match.params.id;return a.fields.id&&a.fields.id.value===n?a.fields:{}}(e,t);return Object(le.a)(Object(le.a)({},a),{},{contactId:i,fields:c,bankList:n,forceOwn:o,isBankExpanded:o||c.isOwn&&(c.isOwn.value||a.isBankExpanded),isBankRequired:o||c.isOwn&&c.isOwn.value})}),(function(e){return{fetchForm:function(t){return e(De(t))},onSave:function(t,a){return e(function(e,t){return function(a){return a({type:D,payload:{}}),we.saveContact(new Te(e)).then((function(e){return e=new Te(e),a({type:R,payload:e}),t.length?t.goBack():t.replace("/contacts"),e}),(function(e){throw a({type:U,payload:e}),e}))}}(t,a))},onFieldsChange:function(t,a){return e(xe(t,a))},onToggleBankSection:function(){return e({type:n.CONTACT_FORM_TOGGLE,payload:"bank"})},onToggleContactSection:function(){return e({type:n.CONTACT_FORM_TOGGLE,payload:"contact"})}}}))(Ea)),Ca=(a(564),a(294)),ga=(a(563),a(193)),ka=(a(513),function(e){Object(C.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).showConflicts=function(e){var t=["Kontakt","Fakt\xfara"],a=e.reduce((function(e,a,n){var r=t[n],i=a,c=i.items,l=i.conflicts.map((function(e){var t=c.find((function(t){return t.id===e.id}));return o.a.createElement("tr",{key:t.id,className:"fz-overview-table__row"},o.a.createElement("td",{className:"fz-overview-table__row__cell fz-overview-table__row__cell--center fz-overview-table__row__cell--nowrap"},"Kontakt"===r?e.entity:t.id),o.a.createElement("td",{className:"fz-overview-table__row__cell fz-overview-table__row__cell--center"},t.revision||"0"),o.a.createElement("td",{className:"fz-overview-table__row__cell fz-overview-table__row__cell--center"},e.revision||"0"),o.a.createElement("td",{className:"fz-overview-table__row__cell fz-overview-table__row__cell--right"},o.a.createElement(kt.a,{type:"stop",style:{fontSize:"16px",color:"red"},theme:"outlined"})))}));return l.length>0&&l.unshift(o.a.createElement("tr",{key:r,className:"fz-overview-table__row fz-overview-table__row--group"},o.a.createElement("td",{className:"fz-overview-table__row__cell",colSpan:4},o.a.createElement("strong",null,r)))),e.concat(l)}),[]),n=o.a.createElement("div",null,o.a.createElement("div",{className:"fz-overview-table-wrapper"},o.a.createElement("table",{className:"fz-overview-table"},o.a.createElement("colgroup",null,o.a.createElement("col",{width:"100"}),o.a.createElement("col",{width:"20"}),o.a.createElement("col",{width:"20"}),o.a.createElement("col",{width:"20"})),o.a.createElement("thead",null,o.a.createElement("tr",{className:"fz-overview-table__row fz-overview-table__row--header"},o.a.createElement("th",{className:"fz-overview-table__row__cell"},"Id."),o.a.createElement("th",{className:"fz-overview-table__row__cell"},"AV*"),o.a.createElement("th",{className:"fz-overview-table__row__cell"},"IV**"),o.a.createElement("th",{className:"fz-overview-table__row__cell"}))),o.a.createElement("tbody",null,a))),o.a.createElement("ul",{className:"fz-explanatory-notes"},o.a.createElement("li",null,"* AV - aktu\xe1lna verzia"),o.a.createElement("li",null,"** IV - verzia importovan\xe9ho dokumentu")));tt.a.warning({width:540,title:"Nasledovn\xe9 polo\u017eky boli vynechan\xe9 z importu.",content:n})},e.handleExport=function(){var t=rt.a.loading("Vykon\xe1vam z\xe1lohu...",0);e.props.onArchiveExport().then((function(){t()})).catch((function(e){t(),rt.a.error(e.message)}))},e.handleImport=function(t){var a=rt.a.loading("Obnovujem zo z\xe1lohy...",0);return new Promise((function(e,a){var n=new FileReader;n.onerror=function(e){a(e)},n.onload=function(t){e(n.result)},n.readAsText(t)})).then((function(t){e.props.onArchiveImport(t).then((function(t){a();var n=Object(se.a)(t,2),r=n[0],i=n[1];r.conflicts.length+i.conflicts.length?e.showConflicts(t):rt.a.success("Arch\xedv bol naimportovan\xfd")}))})).catch((function(e){a(),rt.a.error("Import zlyhal")})),!1},e}return Object(b.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(ga.a,{style:{marginBottom:20}},o.a.createElement("p",null,"Archiv\xe1cia datab\xe1zy do s\xfaboru. Odpor\xfa\u010da sa vykon\xe1va\u0165 t\xfato \u010dinnos\u0165 pravidelne."),o.a.createElement("div",null,o.a.createElement(nt.a,{onClick:this.handleExport},o.a.createElement(kt.a,{type:"download"})," Archivuj do s\xfaboru"))),o.a.createElement(ga.a,null,o.a.createElement("p",null,"Import datab\xe1zy z arch\xedvu."),o.a.createElement("p",null,"Existuj\xface kontakty a fakt\xfary bud\xfa zmenen\xe9 len v pr\xedpade ak arch\xedv obsahuje ich nov\u0161iu verziu."),o.a.createElement("div",null,o.a.createElement(Ca.a,{accept:".json",beforeUpload:this.handleImport,showUploadList:!1},o.a.createElement(nt.a,null,o.a.createElement(kt.a,{type:"upload"})," Na\u010d\xedtaj z arch\xedvu")))))}}]),a}(i.Component)),Oa=Object(s.f)(Object(m.b)((function(e){return{ui:e.ui}}),(function(e){return{onArchiveExport:function(){return e((function(e){return e({type:re,payload:{}}),Promise.all([e(Ae()),e(qe())]).then((function(t){var a=Object(se.a)(t,2),n=a[0],r=a[1];e({type:ie,payload:{}});var i=new Blob([JSON.stringify({contacts:n,invoices:r})],{type:"application/json"});et(i,"fz_".concat(Le()().format("YYYY-MM-DD_HH-mm-ss"),".json"))})).catch((function(t){throw e({type:oe,payload:t}),t}))}))},onArchiveImport:function(t){return e(function(e){return function(t){return t({type:te,payload:{}}),new Promise((function(t,a){try{var n=JSON.parse(e);if(!Array.isArray(n.contacts)||!Array.isArray(n.invoices))throw new Error("Neplatn\xfd typ arch\xedvu");t(n)}catch(r){a(r)}})).then((function(e){return Promise.all([we.mergeContacts(e.contacts),we.mergeInvoices(e.invoices)])})).then((function(e){var a=Object(se.a)(e,2),n=a[0],r=a[1];return t({type:ae,payload:{contacts:n.items,invoices:r.items}}),e})).catch((function(e){throw console.log(e),t({type:ne,payload:new Error("Nastala chyba pri importe arch\xedvu!")}),e}))}}(t))}}}))(ka)),Sa=(a(552),k.a.Header),_a=k.a.Content,Ia=k.a.Footer,wa=[{exact:!0,path:"/invoices/:id",component:oa},{exact:!0,path:"/invoices",component:ht},{exact:!0,path:"/contacts/:id",component:ba},{exact:!0,path:"/contacts",component:bt},{exact:!0,path:"/archive",component:Oa}],Ta=[{key:"invoices",name:"Fakt\xfary"},{key:"contacts",name:"Kontakty"},{key:"archive",name:"Arch\xedv"}],Na=function(e){Object(C.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onMenuClicked=function(t){var a=t.key;e.props.history.push("/".concat(a))},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props.location.pathname,t=Ta.find((function(t){return e.includes(t.key)})),a=t&&t.key||"";return o.a.createElement(k.a,{className:"fz-layout"},o.a.createElement(Sa,{className:"fz-layout-header"},o.a.createElement(y.b,{className:"fz-layout-header-menu",theme:"dark",mode:"horizontal",selectedKeys:[a],onClick:this.onMenuClicked},Ta.map((function(e){var t=e.key,a=e.name;return o.a.createElement(y.b.Item,{key:t},a)}))),o.a.createElement("div",{className:"fz-logo"})),o.a.createElement(_a,{className:"fz-layout-content"},o.a.createElement(s.d,null,wa.map((function(e,t){return o.a.createElement(s.b,Object.assign({key:t},e))})))),o.a.createElement(Ia,{className:"fz-layout-footer"},o.a.createElement("div",{className:"fz-footer-brand"},o.a.createElement("span",null,"\xa92021 ",o.a.createElement("a",{href:"https://fakturazdarma.netlify.app/"},"FakturaZdarma.sk"))),o.a.createElement("div",null,o.a.createElement("a",{href:"https://www.facebook.com/FakturaZdarma/"},o.a.createElement("div",{className:"fcb-find-us"})))))}}]),a}(i.Component),Pa=Object(s.f)(Na),za=(a(553),k.a.Content),Fa=(a(554),function(e){Object(C.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSubmit=function(t){t.preventDefault(),e.props.form.validateFields((function(t,a){t||e.props.onLogIn(a.email,a.password,e.props.history)}))},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return o.a.createElement(Nt.a,{onSubmit:this.handleSubmit,className:"fz-login-form"},o.a.createElement(Nt.a.Item,null,e("email",{rules:[{required:!0,message:"Please input your email!"}]})(o.a.createElement(zt.a,{prefix:o.a.createElement(kt.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email"}))),o.a.createElement(Nt.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(o.a.createElement(zt.a,{prefix:o.a.createElement(kt.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),o.a.createElement(Nt.a.Item,null,e("remember",{valuePropName:"checked",initialValue:!0})(o.a.createElement(sa.a,null,"Remember me")),o.a.createElement("a",{className:"fz-login-form-forgot",href:"#/forgot-passwd"},"Forgot password"),o.a.createElement(nt.a,{type:"primary",htmlType:"submit",className:"fz-login-form-button"},"Log in"),"Or ",o.a.createElement("a",{href:"#/register"},"register now!")))}}]),a}(i.Component)),ja=Nt.a.create({name:"normal_login"})(Fa),Aa=(a(555),function(e){Object(C.a)(a,e);var t=Object(g.a)(a);function a(){return Object(E.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"fz-login-page"},o.a.createElement(ja,this.props))}}]),a}(i.Component)),xa=Object(s.f)(Object(m.b)((function(e){return Object(le.a)({},e.login)}),(function(e){return{onLogIn:function(t,a,n){e(function(e,t,a){return function(a){return a({type:O,payload:{}}),we.doLogin(e,t).then((function(){a({type:S,payload:{}}),Ae()})).catch((function(e){throw a({type:_,payload:e}),e}))}}(t,a))}}}))(Aa)),Da=-1,Ra=1,Ua=2,Va={loginState:Ua},La=["component","loginState"],Ba=function(e){Object(C.a)(a,e);var t=Object(g.a)(a);function a(){return Object(E.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props,t=e.component,a=e.loginState,n=Object(jt.a)(e,La);return o.a.createElement(s.b,Object.assign({},n,{render:function(e){return a===Ua?o.a.createElement(t,e):o.a.createElement(s.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}}]),a}(i.Component),Ma=Object(m.b)((function(e){return Object(le.a)({},e.login)}),{})(Ba),Ka={lastError:null,isFetching:!1,isSaving:!1},Ha={fields:{},itemKeys:[],isDraft:!1,isFetching:!1,isSaving:!1},qa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ha,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.INVOICE_FETCH:return Object(le.a)(Object(le.a)({},e),{},{isFetching:!0});case n.INVOICE_FETCH_SUCCESS:case n.INVOICE_FETCH_FAILURE:return Object(le.a)(Object(le.a)({},e),{},{isFetching:!1});case n.INVOICE_SAVE:return Object(le.a)(Object(le.a)({},e),{},{isSaving:!0,isDraft:t.payload.isDraft});case n.INVOICE_SAVE_SUCCESS:case n.INVOICE_SAVE_FAILURE:return Object(le.a)(Object(le.a)({},e),{},{isSaving:!1});case n.INVOICE_FORM_REPLACE:return Object(le.a)(Object(le.a)({},e),t.payload);case n.CONTACT_SAVE_SUCCESS:var a=e.fields,r=t.payload;if(r.isOwn){var i=r.isTaxable?Ee.Taxable:Ee.NonTax;a.type={value:i},a.emitent={value:r.id}}else a.recipient={value:r.id};return Object(le.a)(Object(le.a)({},e),{},{fields:a});default:return e}},Ga={contactId:null,isFetching:!1,isSaving:!1,isBankExpanded:!1,isContactExpanded:!1,fields:{}},Za=function(e,t){switch(t.type){case n.CONTACT_SAVE_SUCCESS:return{};case n.CONTACT_FORM_REPLACE:return t.payload;default:return e}},Xa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ga,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.CONTACT_FETCH:return Object(le.a)(Object(le.a)({},e),{},{isFetching:!0});case n.CONTACT_FETCH_SUCCESS:case n.CONTACT_FETCH_FAILURE:return Object(le.a)(Object(le.a)({},e),{},{isFetching:!1});case n.CONTACT_SAVE:return Object(le.a)(Object(le.a)({},e),{},{isSaving:!0});case n.CONTACT_SAVE_SUCCESS:case n.CONTACT_SAVE_FAILURE:return Object(le.a)(Object(le.a)({},e),{},{isSaving:!1});case n.CONTACT_FORM_TOGGLE:var a=t.payload,r=Object(le.a)({},e);switch(a){case"bank":r.isBankExpanded=!e.isBankExpanded;break;case"contact":r.isContactExpanded=!e.isContactExpanded}return r;case n.CONTACT_FORM_REPLACE:return Object(le.a)({},e);default:return e}},Ya=Object(d.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Va,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.LOG_IN:return{loginState:Ra};case n.LOG_IN_SUCCESS:return{loginState:Ua};case n.LOG_IN_FAILURE:case n.LOG_OUT:return{loginState:Da};default:return e}},invoices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.ARCHIVE_IMPORT_SUCCESS:return t.payload.invoices;case n.INVOICES_DELETE_SUCCESS:case n.INVOICES_FETCH_SUCCESS:return t.payload;case n.INVOICE_SAVE_SUCCESS:var a=Object(ue.a)(e),r=t.payload,i=a.findIndex((function(e){return e.id===r.id}));return i>-1?a[i]=r:a.push(r),a;case n.INVOICE_SAVE_FAILURE:default:return e}},contacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.ARCHIVE_IMPORT_SUCCESS:return t.payload.contacts;case n.CONTACTS_DELETE_SUCCESS:case n.CONTACTS_FETCH_SUCCESS:return t.payload;case n.CONTACT_SAVE_SUCCESS:var a=Object(ue.a)(e),r=t.payload,i=a.findIndex((function(e){return e.id===r.id}));return i>-1?a[i]=r:a.push(r),a;default:return e}},bankList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka,t=arguments.length>1?arguments[1]:void 0,a=t.type;switch(a){case n.ARCHIVE_IMPORT:return Object(le.a)(Object(le.a)({},e),{},{isSaving:!0,lastError:null});case n.ARCHIVE_IMPORT_SUCCESS:return Object(le.a)(Object(le.a)({},e),{},{isSaving:!1});case n.ARCHIVE_IMPORT_FAILURE:return Object(le.a)(Object(le.a)({},e),{},{isSaving:!1,lastError:t.payload});case n.ARCHIVE_EXPORT:return Object(le.a)(Object(le.a)({},e),{},{isFetching:!0,lastError:null});case n.ARCHIVE_EXPORT_SUCCESS:return Object(le.a)(Object(le.a)({},e),{},{isFetching:!1});case n.ARCHIVE_EXPORT_FAILURE:return Object(le.a)(Object(le.a)({},e),{},{isFetching:!1,lastError:t.payload})}switch(!0){case/DELETE$/.test(a):return Object(le.a)(Object(le.a)({},e),{},{isSaving:!0,lastError:null});case/DELETE_SUCCESS$/.test(a):return Object(le.a)(Object(le.a)({},e),{},{isSaving:!1});case/DELETE_FAILURE$/.test(a):return Object(le.a)(Object(le.a)({},e),{},{isSaving:!1,lastError:t.payload});case/FETCH$/.test(a):return Object(le.a)(Object(le.a)({},e),{},{isFetching:!0,lastError:null});case/FETCH_SUCCESS$/.test(a):return Object(le.a)(Object(le.a)({},e),{},{isFetching:!1});case/FETCH_FAILURE$/.test(a):return Object(le.a)(Object(le.a)({},e),{},{isFetching:!1,lastError:t.payload});default:return e}},invoiceUI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ha,t=arguments.length>1?arguments[1]:void 0;return qa(e,t)},contactUI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ga,t=arguments.length>1?arguments[1]:void 0;return Object(le.a)(Object(le.a)({},Xa(e,t)),{},{fields:Za(e.fields,t)})},visibilityFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SET_VISIBILITY_FILTER:return t.filter;default:return e}}}),Wa=[["365.bank (Po\u0161tov\xe1 banka, a.s. od\u0161tepn\xfd z\xe1vod)","6500","POBNSKBA"],["BANCO COFIDIS, S.A., pobo\u010dka zahr. banky","8400",""],["BKS BANK AG, pobo\u010dka zahr. banky","8420","BFKKSKBB"],["\u010ceskoslovensk\xe1 obchodn\xe1 banka, a.s.","7500","CEKOSKBX"],["Citibank Europe plc, pobo\u010dka zahr. banky","8130","CITISKBA"],["COMMERZBANK Aktiengesellschaft, pobo\u010dka zahr. banky","8050","COBASKBX"],["\u010cSOB stavebn\xe1 sporite\u013e\u0148a, a.s.","8170","KBSPSKBX"],["EXIMBANKA SR","8160","EXSKSKBX"],["Fio banka, a.s., pobo\u010dka zahr. banky","8330","FIOZSKBA"],["ING Bank N.V., pobo\u010dka zahr. banky","7300","INGBSKBX"],["J&T BANKA, a.s., pobo\u010dka zahr. banky","8320","JTBPSKBA"],["KDB Bank Europe Ltd, pobo\u010dka zahran. banky","8430","KODBSKBX"],["Komer\u010dn\xed banka, a.s., pobo\u010dka zahr. banky","8100","KOMBSKBA"],["mBank S.A., pobo\u010dka zahr. banky","8360","BREXSKBX"],["N\xe1rodn\xe1 banka Slovenska","0720","NBSBSKBX"],["Oberbank AG, pobo\u010dka zahr. banky v SR","8370","OBKLSKBA"],["OTP banka Slovensko, a.s.","5200","OTPVSKBX"],["Po\u0161tov\xe1 banka, a.s.","6500","POBNSKBA"],["Prima\xa0banka Slovensko, a.s. (DEXIA)","5600","KOMASK2X"],["Privatbanka, a.s.","8120","BSLOSK22"],["Prv\xe1 stavebn\xe1 sporite\u013e\u0148a, a.s.","5900","PRVASKBA"],["Raiffeisen BANK (Tatra banka a.s., od\u0161tepn\xfd z\xe1vod)","1100","TATRSKBX"],["Slovensk\xe1 sporite\u013e\u0148a, a.s.","0900","GIBASKBX"],["Slovensk\xe1 z\xe1ru\u010dn\xe1 a rozvojov\xe1 banka, a.s.","3000","SLZBSKBA"],["\u0160t\xe1tna pokladnica","8180","SPSRSKBA"],["Tatra banka, a.s.","1100","TATRSKBX"],["UniCredit Bank Slovakia, a.s.","1111","UNCRSKBX"],["V\xdaB banka, a.s.","0200","SUBASKBX"],["W\u0171stenrot stavebn\xe1 sporite\u013e\u0148a, a.s.","7930","WUSTSKBA"]];Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(556),a(557);p.a.initialize("UA-199075-6");var Ja=Object(u.b)();Ja.listen((function(e){p.a.set({page:e.pathname}),p.a.pageview(e.pathname)}));var $a=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.d,Qa=Object(d.e)(Ya,{bankList:Wa},$a(Object(d.a)(v.a)));Qa.dispatch(Ae()),Qa.dispatch(qe()),l.a.render(o.a.createElement(m.a,{store:Qa},o.a.createElement(r.a,{locale:h.a},o.a.createElement(s.c,{history:Ja},o.a.createElement(s.d,null,o.a.createElement(s.a,{exact:!0,from:"/",to:"/invoices"}),o.a.createElement(s.b,{exact:!0,path:"/login",component:xa}),wa.map((function(e,t){var a=e.path;return o.a.createElement(Ma,{key:t,path:a,component:Pa})})),o.a.createElement(s.b,{component:function(){return o.a.createElement(k.a,{className:"fz-layout"},o.a.createElement(za,{className:"fz-layout-content"},o.a.createElement("div",{className:"antd-pro-components-exception-index-exception"},o.a.createElement("div",{className:"antd-pro-components-exception-index-imgBlock"},o.a.createElement("div",{className:"antd-pro-components-exception-index-imgEle",style:{backgroundImage:'url("/static/img/undraw_page_not_found_su7k.svg")'}})),o.a.createElement("div",{className:"antd-pro-components-exception-index-content"},o.a.createElement("div",{className:"antd-pro-components-exception-index-desc"},"Prep\xe1\u010dte n\xe1m, ale t\xe1to str\xe1nka neexistuje."),o.a.createElement("div",{className:"antd-pro-components-exception-index-actions"},o.a.createElement(it.a,{to:"/"},o.a.createElement(nt.a,{className:"ant-btn ant-btn-primary"},"Sp\xe4\u0165 na \xfavodn\xfa")))))))}}))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[299,1,2]]]);
//# sourceMappingURL=main.ed91f1d4.chunk.js.map