(this["webpackJsonpfakturazdarma.sk"]=this["webpackJsonpfakturazdarma.sk"]||[]).push([[0],{220:function(e,t,n){"use strict";n.r(t);var a=n(246),i=n.n(a);n.d(t,"DownOutline",(function(){return i.a}));var r=n(247),o=n.n(r);n.d(t,"UpOutline",(function(){return o.a}));var c=n(248),s=n.n(c);n.d(t,"ArrowLeftOutline",(function(){return s.a}));var l=n(249),u=n.n(l);n.d(t,"LeftOutline",(function(){return u.a}));var d=n(250),v=n.n(d);n.d(t,"RightOutline",(function(){return v.a}));var p=n(251),f=n.n(p);n.d(t,"DoubleLeftOutline",(function(){return f.a}));var h=n(252),b=n.n(h);n.d(t,"DoubleRightOutline",(function(){return b.a}));var m=n(253),j=n.n(m);n.d(t,"PlusOutline",(function(){return j.a}));var O=n(254),y=n.n(O);n.d(t,"DownloadOutline",(function(){return y.a}));var C=n(255),g=n.n(C);n.d(t,"UploadOutline",(function(){return g.a}));var x=n(256),k=n.n(x);n.d(t,"EditOutline",(function(){return k.a}));var S=n(257),I=n.n(S);n.d(t,"FilePdfOutline",(function(){return I.a}));var _=n(258),E=n.n(_);n.d(t,"SaveOutline",(function(){return E.a}));var w=n(259),T=n.n(w);n.d(t,"FormOutline",(function(){return T.a}));var N=n(260),z=n.n(N);n.d(t,"DeleteOutline",(function(){return z.a}));var P=n(261),F=n.n(P);n.d(t,"MinusCircleOutline",(function(){return F.a}));var A=n(262),D=n.n(A);n.d(t,"CalendarOutline",(function(){return D.a}));var R=n(263),L=n.n(R);n.d(t,"CloseCircleFill",(function(){return L.a}));var U=n(264),V=n.n(U);n.d(t,"InfoCircleOutline",(function(){return V.a}));var M=n(265),B=n.n(M);n.d(t,"CloseCircleOutline",(function(){return B.a}));var K=n(266),H=n.n(K);n.d(t,"CheckCircleOutline",(function(){return H.a}));var Z=n(267),q=n.n(Z);n.d(t,"CheckCircleFill",(function(){return q.a}));var G=n(268),X=n.n(G);n.d(t,"ExclamationCircleOutline",(function(){return X.a}));var W=n(269),Y=n.n(W);n.d(t,"ExclamationCircleFill",(function(){return Y.a}));var J=n(270),$=n.n(J);n.d(t,"StopOutline",(function(){return $.a}));var Q=n(271),ee=n.n(Q);n.d(t,"LoadingOutline",(function(){return ee.a}))},362:function(e,t,n){},574:function(e,t){},576:function(e,t){},585:function(e,t,n){},586:function(e,t,n){},591:function(e,t,n){},630:function(e,t,n){},631:function(e,t,n){},633:function(e,t,n){},638:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"CONTACT_CREATE",(function(){return x})),n.d(a,"CONTACT_FETCH",(function(){return k})),n.d(a,"CONTACT_FETCH_SUCCESS",(function(){return S})),n.d(a,"CONTACT_FETCH_FAILURE",(function(){return I})),n.d(a,"CONTACTS_FETCH",(function(){return _})),n.d(a,"CONTACTS_FETCH_SUCCESS",(function(){return E})),n.d(a,"CONTACTS_FETCH_FAILURE",(function(){return w})),n.d(a,"CONTACT_FORM_REPLACE",(function(){return T})),n.d(a,"CONTACT_FORM_TOGGLE",(function(){return N})),n.d(a,"CONTACT_SAVE",(function(){return z})),n.d(a,"CONTACT_SAVE_SUCCESS",(function(){return P})),n.d(a,"CONTACT_SAVE_FAILURE",(function(){return F})),n.d(a,"CONTACTS_DELETE",(function(){return A})),n.d(a,"CONTACTS_DELETE_SUCCESS",(function(){return D})),n.d(a,"CONTACTS_DELETE_FAILURE",(function(){return R})),n.d(a,"INVOICE_FETCH",(function(){return L})),n.d(a,"INVOICE_FETCH_SUCCESS",(function(){return U})),n.d(a,"INVOICE_FETCH_FAILURE",(function(){return V})),n.d(a,"INVOICES_FETCH",(function(){return M})),n.d(a,"INVOICES_FETCH_SUCCESS",(function(){return B})),n.d(a,"INVOICES_FETCH_FAILURE",(function(){return K})),n.d(a,"INVOICE_FORM_REPLACE",(function(){return H})),n.d(a,"INVOICE_SAVE",(function(){return Z})),n.d(a,"INVOICE_SAVE_SUCCESS",(function(){return q})),n.d(a,"INVOICE_SAVE_FAILURE",(function(){return G})),n.d(a,"INVOICES_DELETE",(function(){return X})),n.d(a,"INVOICES_DELETE_SUCCESS",(function(){return W})),n.d(a,"INVOICES_DELETE_FAILURE",(function(){return Y})),n.d(a,"ARCHIVE_IMPORT",(function(){return J})),n.d(a,"ARCHIVE_IMPORT_SUCCESS",(function(){return $})),n.d(a,"ARCHIVE_IMPORT_FAILURE",(function(){return Q})),n.d(a,"ARCHIVE_EXPORT",(function(){return ee})),n.d(a,"ARCHIVE_EXPORT_SUCCESS",(function(){return te})),n.d(a,"ARCHIVE_EXPORT_FAILURE",(function(){return ne})),n.d(a,"SET_VISIBILITY_FILTER",(function(){return ae}));n(338);var i=n(136),r=n(0),o=n(11),c=n.n(o),s=n(39),l=n(52),u=n(122),d=n(61),v=n(315),p=n(103),f=n(330),h=n.n(f),b=n(5),m=(n(228),n(76)),j=n(21),O=n(22),y=n(31),C=n(32),g=(n(229),n(84)),x="CONTACT_CREATE",k="CONTACT_FETCH",S="CONTACT_FETCH_SUCCESS",I="CONTACT_FETCH_FAILURE",_="CONTACTS_FETCH",E="CONTACTS_FETCH_SUCCESS",w="CONTACTS_FETCH_FAILURE",T="CONTACT_FORM_UPDATE",N="CONTACT_FORM_TOGGLE",z="CONTACT_SAVE",P="CONTACT_SAVE_SUCCESS",F="CONTACT_SAVE_FAILURE",A="CONTACTS_DELETE",D="CONTACTS_DELETE_SUCCESS",R="CONTACTS_DELETE_FAILURE",L="INVOICE_FETCH",U="INVOICE_FETCH_SUCCESS",V="INVOICE_FETCH_FAILURE",M="INVOICES_FETCH",B="INVOICES_FETCH_SUCCESS",K="INVOICES_FETCH_FAILURE",H="INVOICE_FORM_REPLACE",Z="INVOICE_SAVE",q="INVOICE_SAVE_SUCCESS",G="INVOICE_SAVE_FAILURE",X="INVOICES_DELETE",W="INVOICES_DELETE_SUCCESS",Y="INVOICES_DELETE_FAILURE",J="ARCHIVE_IMPORT",$="ARCHIVE_IMPORT_SUCCESS",Q="ARCHIVE_IMPORT_FAILURE",ee="ARCHIVE_EXPORT",te="ARCHIVE_EXPORT_SUCCESS",ne="ARCHIVE_EXPORT_FAILURE",ae="SET_VISIBILITY_FILTER",ie=n(40),re=n(43),oe=n(55),ce=n.n(oe),se=n(82),le=function(e,t){var n=[];return e.forEach((function(e){var a,i,r,o,c=t.findIndex((function(t){var n=t.id;return e.id===n}));if(-1===c)return t.push(e),!1;var s=t[c];return(null!==(a=s.revision)&&void 0!==a?a:0)>(null!==(i=e.revision)&&void 0!==i?i:0)||new Date(null!==(r=s.updatedAt)&&void 0!==r?r:0)>new Date(null!==(o=e.updatedAt)&&void 0!==o?o:0)?(n.push(e),!1):void(t[c]=e)})),n},ue=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:localStorage;Object(j.a)(this,e),this.storage=t}return Object(O.a)(e,[{key:"saveContact",value:function(t){if(!t||!t.id)return Promise.reject(new Error("Ch\xfdba id. kontaktu!"));var n=this.getContactsSync(),a=n.findIndex((function(e){return e.id===t.id}));return t.updatedAt=new Date,t.revision=a>-1?(n[a].revision||0)+1:1,a>-1?n[a]=t:n.push(t),this.storage.setItem(e.CONTACTS_KEY,JSON.stringify(n)),Promise.resolve(t)}},{key:"mergeContacts",value:function(t){var n=this.getContactsSync(),a=le(t,n);return this.storage.setItem(e.CONTACTS_KEY,JSON.stringify(n)),Promise.resolve({items:n,conflicts:a})}},{key:"fetchContact",value:function(e){return this.fetchContacts().then((function(t){return t.find((function(t){return t.id===e}))}))}},{key:"fetchContacts",value:function(){return Promise.resolve(this.getContactsSync())}},{key:"deleteContacts",value:function(t){var n=this.getContactsSync().filter((function(e){return!t.includes(e.id)}));return this.storage.setItem(e.CONTACTS_KEY,JSON.stringify(n)),Promise.resolve(Object.values(n))}},{key:"saveInvoice",value:function(t){var n;if(!t||!t.id)return Promise.reject(new Error("Ch\xfdba id. fakt\xfary!"));var a=this.getInvoicesSync(),i=a.findIndex((function(e){return e.id===t.id}));return t.updatedAt=new Date,t.revision=i>-1?(null!==(n=a[i].revision)&&void 0!==n?n:0)+1:1,i>-1?a[i]=t:a.push(t),this.storage.setItem(e.INVOICES_KEY,JSON.stringify(a)),Promise.resolve(t)}},{key:"mergeInvoices",value:function(t){var n=this.getInvoicesSync(),a=le(t,n);return this.storage.setItem(e.INVOICES_KEY,JSON.stringify(n)),Promise.resolve({items:n,conflicts:a})}},{key:"fetchInvoice",value:function(e){return this.fetchInvoices().then((function(t){return t.find((function(t){return t.id===e}))}))}},{key:"fetchInvoices",value:function(){return Promise.resolve(this.getInvoicesSync())}},{key:"deleteInvoices",value:function(t){var n=this.getInvoicesSync().filter((function(e){return!t.includes(e.id)}));return this.storage.setItem(e.INVOICES_KEY,JSON.stringify(n)),Promise.resolve(Object.values(n))}},{key:"getInvoicesSync",value:function(){var t=this.storage.getItem(e.INVOICES_KEY);return t?JSON.parse(t):[]}},{key:"getContactsSync",value:function(){var t=this.storage.getItem(e.CONTACTS_KEY);return t?JSON.parse(t):[]}}]),e}();ue.CONTACTS_KEY="contacts",ue.INVOICES_KEY="invoices";var de=function(){function e(){Object(j.a)(this,e)}return Object(O.a)(e,[{key:"getClient",value:function(t){switch(t){case e.LOCAL_STORAGE_CLIENT:return new ue;default:throw new Error("Client type ".concat(t," is not supported"))}}}]),e}();de.LOCAL_STORAGE_CLIENT=1;var ve,pe,fe=function(e){return new Promise((function(t){return setTimeout(t,e)}))},he=function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!!n&&"function"===typeof n.value},be=function(e,t){for(var n=[],a=Object.getPrototypeOf(e);a&&a!==t;)Object.getOwnPropertyNames(a).forEach((function(e){"constructor"!==e&&he(a,e)&&n.push(e)})),a=Object.getPrototypeOf(a);return n},me=function(){function e(){Object(j.a)(this,e),this.client=void 0,this.delay=0,this._skipMethods=[],this.initCallback=null}return Object(O.a)(e,[{key:"setClient",value:function(e){return this.client=e,this}},{key:"setDelay",value:function(e){return this.delay=e,this}},{key:"onInit",value:function(e){return this.initCallback=e,this}},{key:"skipMethods",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return this._skipMethods=e,this}))},{key:"build",value:function(){return new je(this.client,this.delay,this._skipMethods,this.initCallback)}}]),e}(),je=function(){function e(t){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0;Object(j.a)(this,e),this.client=t,this.delayInMillis=a,this.skipMethods=i,this.initCallback=r,n=r?r(this.client):Promise.resolve();var o=this,c=be(t,Object.prototype);c.forEach((function(e){i.some((function(t){return t instanceof RegExp?t.test(e):e===t}))||(o[e]=function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n.then((function(){return fe(a)})).then((function(){return t[e].apply(t,r)}))})}))}return Object(O.a)(e,[{key:"setDelay",value:function(e){var t=this.client;return(new me).setClient(t).setDelay(e).skipMethods(this.skipMethods).build()}}]),e}();!function(e){e[e.WireTransfer=1]="WireTransfer",e[e.Card=2]="Card",e[e.Cash=3]="Cash",e[e.CashOnDelivery=4]="CashOnDelivery"}(ve||(ve={})),function(e){e[e.NonTax=1]="NonTax",e[e.Taxable=2]="Taxable"}(pe||(pe={}));var Oe=[{id:"1",entity:"GP Slovakia",name:"Katar\xedna Slobodov\xe1",email:"invoice@gp.svk",phoneNr:"0970234654",street:"Michalsk\xe1 13",city:"Bratislava",zipCode:"81103",country:"Slovensko",legalId:"45923099",taxId:"1627435979",iban:"SK7548161192967983361238",bankAccount:"1192967983361238",bankName:"Tatra Banka",bankCode:"1100",swift:"TATRSKBX",isOwn:!0},{id:"2",entity:"Etrix Slovakia",name:"Jozef Kov\xe1\u010d",email:"invoice@etrix.svk",phoneNr:"0989447329",street:"Antona Pr\xeddavka 26",city:"Pre\u0161ov",zipCode:"08001",country:"Slovensko",legalId:"25537359",taxId:"0627536219",taxLegalId:"SK379324241",iban:"SK8949968412396661421327",bankAccount:"8412396661421327",bankName:"UniCredit Bank",bankCode:"1111",swift:"UNCRSKBX",isOwn:!0}],ye=[{id:"2021001",type:2,paymentType:ve.WireTransfer,description:"Uk\xe1\u017eka fakt\xfary s DPH",emitent:Oe[1],recipient:Oe[0],items:[{name:"Notebook HP Elite",pricePerUnit:1399,unit:"kus",amount:1,taxRate:20}],variableSymbol:"2021001",constantSymbol:"0008",issueDate:new Date(2021,4,1),dueDate:new Date(2021,4,15),paymentDate:new Date(2021,4,13),finalText:"\u010eakujeme za d\xf4veru."},{id:"2021002",type:1,paymentType:ve.Card,description:"Uk\xe1\u017eka fakt\xfary bez DPH",emitent:Oe[0],recipient:Oe[1],items:[{name:"Eset Smart Security",pricePerUnit:66,unit:"kus",amount:12}],variableSymbol:"2021002",constantSymbol:"0308",issueDate:new Date(2021,4,3),dueDate:new Date(2021,4,18),finalText:"Softv\xe9rov\xe1 licencia je neprenosn\xe1."},{id:"2021003",type:2,description:"Uk\xe1\u017eka fakt\xfary s DPH s uplatnen\xedm z\u013eavy",paymentType:ve.CashOnDelivery,emitent:Oe[1],recipient:Oe[0],items:[{name:"Innovate X-Talon G255",unit:"ks",pricePerUnit:103.92,amount:1,taxRate:20},{name:"Osobn\xe1 z\u013eava",unit:"ks",pricePerUnit:-4.17,amount:1,taxRate:20},{name:"Z\xe1sielkov\u0148a (doru\u010denie na adresu)",unit:"ks",pricePerUnit:2.99,amount:1,taxRate:20},{name:"Z\xe1sielkov\u0148a (doru\u010denie na adresu) z\u013eava",unit:"ks",pricePerUnit:-2.99,amount:1,taxRate:20}],variableSymbol:"2021003",constantSymbol:"0008",issueDate:"2021-07-04T18:14:37.521Z",dueDate:"2021-07-19T18:14:37.521Z",finalText:"Fakt\xfara bola uhraden\xe1 dobierkou.",revision:3,updatedAt:"2021-07-04T18:25:10.796Z"}];var Ce,ge=function(){var e=(new de).getClient(de.LOCAL_STORAGE_CLIENT);return(new me).setClient(e).setDelay(500).skipMethods([/.*Sync/]).onInit(function(){var e=Object(se.a)(ce.a.mark((function e(t){return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchContacts();case 2:if(e.t0=e.sent.length,0!==e.t0){e.next=5;break}t.mergeContacts(Oe);case 5:return e.next=7,t.fetchInvoices();case 7:if(e.t1=e.sent.length,0!==e.t1){e.next=10;break}t.mergeInvoices(ye);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).build()}(),xe=function(){function e(t){Object(j.a)(this,e),this.id=void 0,this.entity="",this.name=void 0,this.street=void 0,this.city=void 0,this.zipCode=void 0,this.country=void 0,this.legalId=void 0,this.taxId=void 0,this.taxLegalId=void 0,this.registeredIn=void 0,this.iban=void 0,this.bankAccount=void 0,this.bankName=void 0,this.bankCode=void 0,this.swift=void 0,this.email=void 0,this.phoneNr=void 0,this.isOwn=!1,this.revision=void 0,this.updatedAt=void 0,Object.assign(this,t)}return Object(O.a)(e,[{key:"isTaxable",get:function(){return!!this.taxLegalId}}]),e}(),ke=n(334),Se=function(e){Object(y.a)(n,e);var t=Object(C.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).name=a.constructor.name,a}return n}(Object(ke.a)(Error)),Ie=function(){function e(){Object(j.a)(this,e)}return Object(O.a)(e,[{key:"toFields",value:function(e){return{id:{value:e.id},entity:{value:e.entity},street:{value:e.street},zipCode:{value:e.zipCode},city:{value:e.city},country:{value:e.country},legalId:{value:e.legalId},taxId:{value:e.taxId},taxLegalId:{value:e.taxLegalId},registeredIn:{value:e.registeredIn},bankName:{value:e.bankName},bankCode:{value:e.bankCode},swift:{value:e.swift},iban:{value:e.iban},bankAccount:{value:e.bankAccount},name:{value:e.name},email:{value:e.email},phoneNr:{value:e.phoneNr},isOwn:{value:!!e.isOwn}}}},{key:"fromFields",value:function(e){for(var t={},n=0,a=Object.entries(e);n<a.length;n++){var i=a[n],r=Object(ie.a)(i,2),o=r[0],c=r[1];null!=c.value&&(t[o]=c.value)}return new xe(t)}}]),e}(),_e=function(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(n,a){return-1===t?a[e].localeCompare(n[e],"en",{numeric:!0}):n[e].localeCompare(a[e],"en",{numeric:!0})}},Ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,a){var i=a().contacts,r=1,o=Object(re.a)(i).sort(_e("-id"));return o[0]&&(r=Number(o[0].id)+1),e.push("/contacts/".concat(r).concat(t?"?isOwn=".concat(t):"")),Promise.resolve(r)}},we=function(){return function(e){return e({type:_,payload:{}}),ge.fetchContacts().then((function(t){return e({type:E,payload:t}),t}),(function(t){throw e({type:w,payload:t}),t}))}},Te=function(e,t){return function(n,a){var i=a().bankList;if(e.bankIndex){var r=Object(ie.a)(i[e.bankIndex.value],3),o=r[0],c=r[1],s=r[2];t=Object(b.a)(Object(b.a)({},t),{},{bankName:{value:o},bankCode:{value:c},swift:{value:s}})}n({type:T,payload:t})}},Ne=function(e){return function(t,n){var a=n().contacts.find((function(t){return t.id===e}));if(!a)return t(function(e){return function(t){return t({type:k,payload:{}}),ge.fetchContact(e).then((function(n){if(!n)throw new Se("Kontakt `".concat(e,"` sa nena\u0161iel!"));return t({type:S,payload:n}),n})).catch((function(e){throw t({type:I,payload:e}),e}))}}(e)).then((function(e){var n=(new Ie).toFields(e);t(Te({},n))}),(function(n){if(n instanceof Se){var a=new xe({id:e,country:"Slovensko"}),i=(new Ie).toFields(a);return t(Te({},i))}throw n}));var i=(new Ie).toFields(a);return t(Te({},i))}},ze=function(){function e(t){Object(j.a)(this,e),this.name="",this.unit="kus",this.pricePerUnit=0,this.amount=0,this.taxRate=20,Object.assign(this,t)}return Object(O.a)(e,[{key:"netPrice",get:function(){return this.pricePerUnit*this.amount}},{key:"grossPrice",get:function(){return this.netPrice+this.taxPrice}},{key:"taxPrice",get:function(){return this.netPrice/100*this.taxRate}}]),e}(),Pe=n(102),Fe="sk-SK",Ae="EUR",De=(Ce={},Object(Pe.a)(Ce,ve.WireTransfer,"Prevodom"),Object(Pe.a)(Ce,ve.Card,"Kartou"),Object(Pe.a)(Ce,ve.Cash,"V hotovosti"),Object(Pe.a)(Ce,ve.CashOnDelivery,"Dobierka"),Ce),Re=function(){function e(t){var n,a,i,r,o,c;Object(j.a)(this,e),this.version=void 0,this.id=void 0,this.type=pe.NonTax,this.description=void 0,this.paymentType=ve.WireTransfer,this.recipient=void 0,this.emitent=void 0,this.items=[],this.discount=0,this.variableSymbol="",this.constantSymbol="0308",this.orderNr=void 0,this.issueDate=void 0,this.dueDate=void 0,this.deliveryDate=void 0,this.paymentDate=void 0,this.finalText=void 0,this.revision=void 0,this.updatedAt=void 0;var s=Date.now();Object.assign(this,t),this.version=null!==(n=null===t||void 0===t?void 0:t.version)&&void 0!==n?n:2,this.issueDate=new Date(null!==(a=null===t||void 0===t?void 0:t.issueDate)&&void 0!==a?a:s),this.dueDate=new Date(null!==(i=null===t||void 0===t?void 0:t.dueDate)&&void 0!==i?i:s+1296e6),this.deliveryDate=(null===t||void 0===t?void 0:t.deliveryDate)?new Date(t.deliveryDate):void 0,this.paymentDate=(null===t||void 0===t?void 0:t.paymentDate)?new Date(t.paymentDate):void 0,this.items=null!==(r=null===t||void 0===t||null===(o=t.items)||void 0===o?void 0:o.map((function(e){return new ze(e)})))&&void 0!==r?r:[],this.discount=null!==(c=null===t||void 0===t?void 0:t.discount)&&void 0!==c?c:0}return Object(O.a)(e,[{key:"grossPrice",get:function(){if(this.type===pe.NonTax)return this.items.reduce((function(e,t){return e+t.netPrice}),0);if(this.type===pe.Taxable){var e=this.items.reduce((function(e,t){var n,a=t.taxRate,i=t.netPrice;return e[a]=(null!==(n=e[a])&&void 0!==n?n:0)+i,e}),{});return Object.entries(e).reduce((function(e,t){var n=Object(ie.a)(t,2),a=n[0],i=n[1];return e+=i+i/100*Number(a)}),0)}return Number.NaN}},{key:"discountPrice",get:function(){return-this.grossPrice/100*this.discount}},{key:"netPrice",get:function(){return this.grossPrice+this.discountPrice}}]),e}(),Le=n(120),Ue=n(19),Ve=n.n(Ue),Me=function(e){return e instanceof Date},Be=function(){function e(){Object(j.a)(this,e)}return Object(O.a)(e,[{key:"toItemFields",value:function(e){var t,n=[],a=[],i=[],r=[],o=[],c=0,s=Object(Le.a)(e);try{for(s.s();!(t=s.n()).done;){var l=t.value;n[c]={value:l.name},a[c]={value:l.pricePerUnit},i[c]={value:l.unit},r[c]={value:l.amount},o[c]={value:l.taxRate},c++}}catch(u){s.e(u)}finally{s.f()}return{itemsNames:n,pricesPU:a,units:i,amounts:r,taxRates:o}}},{key:"toFields",value:function(e){var t=e.recipient,n=e.emitent,a=e.items;return Object(b.a)({id:{value:e.id},type:{value:e.type},recipient:{value:null===t||void 0===t?void 0:t.entity},emitent:{value:null===n||void 0===n?void 0:n.entity},paymentType:{value:e.paymentType},dueDate:{value:Me(e.dueDate)?Ve()(e.dueDate):null},issueDate:{value:Me(e.issueDate)?Ve()(e.issueDate):null},deliveryDate:{value:Me(e.deliveryDate)?Ve()(e.deliveryDate):null},paymentDate:{value:Me(e.paymentDate)?Ve()(e.paymentDate):null},variableSymbol:{value:e.variableSymbol||e.id},constantSymbol:{value:e.constantSymbol},orderNr:{value:e.orderNr},description:{value:null!=e.description?e.description:"Fakturujeme V\xe1m za dodan\xfd tovar alebo slu\u017eby:"},finalText:{value:null!=e.finalText?e.finalText:"Tovar zost\xe1va a\u017e do \xfapln\xe9ho uhradenia majetkom dod\xe1vate\u013ea. Pri oneskorenej \xfahrade V\xe1m budeme \xfa\u010dtova\u0165 pen\xe1le vo v\xfd\u0161ke 0,05% za ka\u017ed\xfd za\u010dat\xfd de\u0148 ome\u0161kania."},discount:{value:e.discount}},this.toItemFields(a))}},{key:"toInvoiceItems",value:function(e,t){var n,a=e.itemsNames,i=void 0===a?[]:a,r=e.pricesPU,o=void 0===r?[]:r,c=e.units,s=void 0===c?[]:c,l=e.amounts,u=void 0===l?[]:l,d=e.taxRates,v=void 0===d?[]:d,p=[],f=Object(Le.a)(t);try{for(f.s();!(n=f.n()).done;){var h,b,m,j,O,y=n.value;p[y]=new ze({name:null===(h=i[y])||void 0===h?void 0:h.value,unit:null===(b=s[y])||void 0===b?void 0:b.value,pricePerUnit:null===(m=o[y])||void 0===m?void 0:m.value,amount:null===(j=u[y])||void 0===j?void 0:j.value,taxRate:null===(O=v[y])||void 0===O?void 0:O.value})}}catch(C){f.e(C)}finally{f.f()}return p}},{key:"fromFields",value:function(e,t){var n=e.id,a=void 0===n?{}:n,i=e.type,r=void 0===i?{}:i,o=e.paymentType,c=void 0===o?{}:o,s=e.dueDate,l=void 0===s?{}:s,u=e.issueDate,d=void 0===u?{}:u,v=e.deliveryDate,p=void 0===v?{}:v,f=e.paymentDate,h=void 0===f?{}:f,b=e.variableSymbol,m=void 0===b?{}:b,j=e.constantSymbol,O=void 0===j?{}:j,y=e.orderNr,C=void 0===y?{}:y,g=e.description,x=void 0===g?{}:g,k=e.finalText,S=void 0===k?{}:k,I=e.discount,_=void 0===I?{}:I;return new Re({id:a.value,type:Number(r.value),paymentType:c.value,dueDate:null!=l.value?l.value.toDate():void 0,issueDate:null!=d.value?d.value.toDate():void 0,deliveryDate:null!=p.value?p.value.toDate():void 0,paymentDate:null!=h.value?h.value.toDate():void 0,variableSymbol:m.value,constantSymbol:O.value,orderNr:C.value,description:x.value,finalText:S.value,discount:_.value,items:this.toInvoiceItems(e,t)})}},{key:"fromValues",value:function(e,t){var n,a,i,r,o=e.itemsNames,c=e.pricesPU,s=e.units,l=e.amounts,u=e.taxRates,d=t.map((function(e){var t;return new ze({name:o[e],unit:s[e],pricePerUnit:c[e],amount:l[e],taxRate:null!==(t=u&&u[e])&&void 0!==t?t:0})}));return new Re({id:e.id,type:Number(e.type),paymentType:e.paymentType,dueDate:null===(n=e.dueDate)||void 0===n?void 0:n.toDate(),issueDate:null===(a=e.issueDate)||void 0===a?void 0:a.toDate(),deliveryDate:null===(i=e.deliveryDate)||void 0===i?void 0:i.toDate(),paymentDate:null===(r=e.paymentDate)||void 0===r?void 0:r.toDate(),variableSymbol:e.variableSymbol,constantSymbol:e.constantSymbol,orderNr:e.orderNr,description:e.description,finalText:e.finalText,discount:e.discount,items:d})}}]),e}();function Ke(e,t,n){return Array(t-String(e).length+1).join(null!==n&&void 0!==n?n:"0")+e}var He=function(){return function(e){return e({type:M,payload:{}}),ge.fetchInvoices().then((function(t){return e({type:B,payload:t}),t}),(function(t){throw e({type:K,payload:t}),t}))}},Ze=function(e,t,n){return function(a,i){var r={fields:t};if(e.emitent){var o=i().contacts.find((function(t){return e.emitent.value===t.id}));o&&(r.fields.type={value:new xe(o).isTaxable?pe.Taxable:pe.NonTax})}n&&(r.itemKeys=n),a({type:H,payload:r})}},qe=function(e){return function(t,n){var a=n(),i=a.invoices,r=a.invoiceUI,o=r.fields;r.isDraft&&o.id&&o.id.value===e?console.log("Skip form fetch"):Promise.resolve(i.find((function(t){return t.id===e}))).then((function(n){return n||t(function(e){return function(t){return t({type:L,payload:{}}),ge.fetchInvoice(e).then((function(n){if(!n)throw new Se("Fakt\xfara `".concat(e,"` sa nena\u0161la!"));return t({type:U,payload:n}),n})).catch((function(e){throw t({type:V,payload:e}),e}))}}(e)).catch((function(t){if(t instanceof Se)return{id:e};throw t}))})).then((function(e){e=new Re(e);var n,a=(new Be).toFields(e),i=(n=Math.max(1,e.items.length),Array.from({length:Math.max(0,n)},(function(e,t){return t})));return t(Ze({},a,i))}))}},Ge=function(e,t,n){var a=n.contacts,i=n.invoices,r=(new Be).fromValues(e,t),o=a.find((function(t){return e.emitent===t.id})),c=a.find((function(t){return e.recipient===t.id}));if(!o||!c){var s,l,u=i.find((function(e){return e.id===r.id}));if(u)o=null!==(s=o)&&void 0!==s?s:u.emitent,c=null!==(l=c)&&void 0!==l?l:u.recipient}return new Re(Object(b.a)(Object(b.a)({},r),{},{emitent:o,recipient:c}))},Xe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(a,i){var r=Ge(e,t,i());return a({type:Z,payload:{isDraft:n}}),ge.saveInvoice(r).then((function(e){return e=new Re(e),a({type:q,payload:e}),e}),(function(e){throw a({type:G,payload:e}),e}))}},We=function(e){return function(t){return t({type:X,payload:e}),ge.deleteInvoices(e).then((function(e){t({type:W,payload:e})}),(function(e){throw t({type:Y,payload:e}),e}))}},Ye="SHOW_ALL",Je="SHOW_COMPLETED",$e="SHOW_ACTIVE",Qe=function(){var e=document.createElement("a");return e.style.display="none",document.body.appendChild(e),function(t,n){var a=window.URL.createObjectURL(t);e.href=a,e.download=n,e.click(),window.URL.revokeObjectURL(a)}}(),et=(n(141),n(74)),tt=(n(313),n(173)),nt=(n(68),n(25)),at=(n(123),n(37)),it=n(60),rt=n(219),ot=n.n(rt);function ct(e){var t=String(e).toUpperCase().replace(/[^A-Z0-9]/g,""),n=t.match(/^([A-Z]{2})(\d{2})([A-Z\d]+)$/);return!(!n||t.length!=={AD:24,AE:23,AT:20,AZ:28,BA:20,BE:16,BG:22,BH:22,BR:29,CH:21,CR:21,CY:28,CZ:24,DE:22,DK:18,DO:28,EE:20,ES:24,FI:18,FO:18,FR:27,GB:22,GI:23,GL:18,GR:27,GT:28,HR:21,HU:28,IE:22,IL:23,IS:26,IT:27,JO:30,KW:30,KZ:20,LB:28,LI:21,LT:20,LU:20,LV:21,MC:27,MD:24,ME:22,MK:19,MR:27,MT:31,MU:30,NL:18,NO:15,PK:24,PL:28,PS:29,PT:25,QA:29,RO:24,RS:22,SA:24,SE:24,SI:19,SK:24,SM:27,TN:24,TR:26}[n[1]])&&function(e){for(var t=parseInt(e.slice(0,2)),n=2;n<e.length;n+=7){var a=String(t)+e.substring(n,n+7);t=parseInt(a,10)%97}return t}((n[3]+n[1]+n[2]).replace(/[A-Z]/g,(function(e){return String(e.charCodeAt(0)-55)})))}var st=new Intl.NumberFormat(Fe),lt=new Intl.NumberFormat(Fe,{style:"currency",currency:Ae}),ut=Intl.DateTimeFormat(Fe),dt=function(e){if(1===ct(e)){var t=new ot.a("UUAA AAAA AAAA AAAA AAAA AAAA").process(e),n=t.result;return t.valid?n:e}return e},vt=function(e){if("string"!==typeof e)return e;var t=e.toUpperCase().replace(/[^A-Z0-9]/g,"");if(5!==t.length)return e;var n=new ot.a("000 00").process(t),a=n.result;return n.valid?a:e},pt=(n(362),n(2)),ft=function(e){Object(y.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).hideSavingProgressMessage=null,e.state={isConfirmationModalVisible:!1,selectedRowKeys:[]},e.onSelectChange=function(t){e.setState({selectedRowKeys:t})},e.handleDelete=function(){e.setState({isConfirmationModalVisible:!0})},e.handleOk=function(){var t=e.state.selectedRowKeys;e.props.onDelete(t),e.setState({isConfirmationModalVisible:!1})},e.handleCancel=function(){e.setState({isConfirmationModalVisible:!1})},e.handleCreateNewInvoice=function(){e.props.onCreate(e.props.history)},e}return Object(O.a)(n,[{key:"UNSAFE_componentWillUpdate",value:function(e){var t=this.props.ui.isSaving,n=e.ui.isSaving;!n&&t?(this.hideMessage(),at.a.success("Zmeny boli ulo\u017een\xe9",1),this.setState({selectedRowKeys:[]})):n&&(this.hideMessage(),this.hideSavingProgressMessage=at.a.loading("Prebieha ukladanie...",0))}},{key:"componentWillUnmount",value:function(){this.hideMessage()}},{key:"hideMessage",value:function(){this.hideSavingProgressMessage&&this.hideSavingProgressMessage(),this.hideSavingProgressMessage=null}},{key:"render",value:function(){var e=this.props,t=e.invoices,n=e.ui,a=this.state,i=a.selectedRowKeys,r=a.isConfirmationModalVisible,o={selectedRowKeys:i,onChange:this.onSelectChange},c=i.length>0;return Object(pt.jsxs)("div",{className:"fz-list-page",children:[Object(pt.jsxs)("div",{className:"fz-btn-group",children:[Object(pt.jsx)(nt.a,{type:"primary",icon:"form",size:"large",onClick:this.handleCreateNewInvoice,children:"Vystavi\u0165"}),Object(pt.jsx)(nt.a,{icon:"delete",size:"large",disabled:!c,onClick:this.handleDelete,children:"Vymaza\u0165"})]}),Object(pt.jsx)("div",{className:"fz-table-wrapper",children:Object(pt.jsx)(tt.a,{className:"fz-table fz-invoice-table",rowKey:"id",dataSource:t,columns:ht,rowSelection:o,loading:n.isFetching})}),Object(pt.jsx)(et.a,{title:"Potvrdenie",visible:r,onOk:this.handleOk,onCancel:this.handleCancel,children:Object(pt.jsx)("p",{children:"Prajete si vymaza\u0165 ozna\u010den\xe9 z\xe1znamy?"})})]})}}]),n}(r.Component),ht=[{title:"Id. dokladu",dataIndex:"id",key:"id",render:function(e){return Object(pt.jsx)(it.a,{to:"/invoices/".concat(e),children:e})}},{title:"Popis",className:"fz-invoice-table__item fz-invoice-table__item--wide",dataIndex:"description",key:"description"},{title:"Odberate\u013e",className:"fz-invoice-table__item fz-invoice-table__item--wide",dataIndex:"recipient.entity",key:"recipient"},{title:"Suma",dataIndex:"netPrice",key:"netPrice",render:function(e){return lt.format(e)}},{title:"D\xe1tum vystavenia",dataIndex:"issueDate",key:"issueDate",render:function(e){return ut.format(new Date(e))}},{title:"Splatnos\u0165",dataIndex:"dueDate",key:"dueDate",render:function(e){return ut.format(new Date(e))}}],bt=Object(s.g)(Object(d.b)((function(e){return{invoices:function(e,t){switch(t){case Ye:return e;case Je:return e.filter((function(e){return e.completed}));case $e:return e.filter((function(e){return!e.completed}));default:return e}}(e.invoices,e.visibilityFilter).map((function(e){return new Re(e)})).sort((function(e,t){return t.issueDate.getTime()-e.issueDate.getTime()})),ui:e.ui}}),(function(e){return{onCreate:function(t){e(function(e){return function(t,n){var a=n().invoices,i=(new Date).getFullYear(),r=String(i),o=a.reduce((function(e,t){var n=Object(ie.a)(e,2),a=n[0],i=n[1],o=t.id;if(o&&o.startsWith(r)){i++;var c=parseInt(o.slice(r.length),10);c>a&&(a=c)}return[a,i]}),[0,0]),c=String(Math.max.apply(Math,Object(re.a)(o))+1);c.length<3&&(c=Ke(c,3)),e.push("/invoices/".concat(i).concat(c))}}(t))},onDelete:function(t){e(We(t))}}}))(ft)),mt=function(e){Object(y.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).hideSavingProgressMessage=null,e.state={isConfirmationModalVisible:!1,selectedRowKeys:[]},e.onSelectChange=function(t){e.setState({selectedRowKeys:t})},e.onCreate=function(){e.props.onCreate(e.props.history)},e.handleDelete=function(){e.setState({isConfirmationModalVisible:!0})},e.handleOk=function(){var t=e.state.selectedRowKeys;e.props.onDelete(t),e.setState({isConfirmationModalVisible:!1})},e.handleCancel=function(){e.setState({isConfirmationModalVisible:!1})},e}return Object(O.a)(n,[{key:"UNSAFE_componentWillUpdate",value:function(e){var t=this.props.ui.isSaving,n=e.ui.isSaving;!n&&t?(this.hideMessage(),at.a.success("Zmeny boli ulo\u017een\xe9",1),this.setState({selectedRowKeys:[]})):n&&(this.hideMessage(),this.hideSavingProgressMessage=at.a.loading("Prebieha ukladanie...",0))}},{key:"componentWillUnmount",value:function(){this.hideMessage()}},{key:"hideMessage",value:function(){this.hideSavingProgressMessage&&this.hideSavingProgressMessage(),this.hideSavingProgressMessage=null}},{key:"render",value:function(){var e=this.props,t=e.contacts,n=e.ui,a=this.state,i=a.selectedRowKeys,r=a.isConfirmationModalVisible,o={selectedRowKeys:i,onChange:this.onSelectChange},c=i.length>0;return Object(pt.jsxs)("div",{className:"fz-list-page",children:[Object(pt.jsxs)("div",{className:"fz-btn-group",children:[Object(pt.jsx)(nt.a,{type:"primary",icon:"form",size:"large",onClick:this.onCreate,children:"Prida\u0165"}),Object(pt.jsx)(nt.a,{icon:"delete",size:"large",disabled:!c,onClick:this.handleDelete,children:"Vymaza\u0165"})]}),Object(pt.jsx)("div",{className:"fz-table-wrapper",children:Object(pt.jsx)(tt.a,{rowKey:"id",className:"fz-table fz-contact-table",dataSource:t,columns:jt,rowSelection:o,loading:n.isFetching})}),Object(pt.jsx)(et.a,{title:"Potvrdenie",visible:r,onOk:this.handleOk,onCancel:this.handleCancel,children:Object(pt.jsx)("p",{children:"Prajete si vymaza\u0165 ozna\u010den\xe9 z\xe1znamy?"})})]})}}]),n}(r.Component),jt=[{title:"N\xe1zov",dataIndex:"entity",key:"entity",render:function(e,t){return Object(pt.jsx)(it.a,{to:"/contacts/".concat(t.id),children:e})}},{title:"Meno",dataIndex:"name",key:"name"},{title:"E-mail",dataIndex:"email",key:"email"},{title:"Telef\xf3n",dataIndex:"phoneNr",key:"phoneNr"}],Ot=Object(d.b)((function(e){var t=function(e,t){switch(t){case Ye:return e;case Je:return e.filter((function(e){return e.completed}));case $e:return e.filter((function(e){return!e.completed}));default:return e}}(e.contacts,e.visibilityFilter);return{contacts:Object(re.a)(t),ui:e.ui}}),(function(e){return{onCreate:function(t){e(Ee(t))},onDelete:function(t){e(function(e){return function(t){return t({type:A,payload:e}),ge.deleteContacts(e).then((function(e){t({type:D,payload:e})}),(function(e){throw t({type:R,payload:e}),e}))}}(t))}}}))(mt),yt=(n(290),n(172)),Ct=(n(314),n(174)),gt=(n(90),n(7)),xt=n(169),kt=n.n(xt),St=(n(639),n(179)),It=(n(517),n(138)),_t=(n(91),n(29)),Et=(n(92),n(23)),wt=(n(93),n(10)),Tt=(n(183),n(51)),Nt=(n(80),n(26)),zt=(n(521),n(180)),Pt=n(335),Ft=n(13),At=n.n(Ft),Dt=(n(523),n(332)),Rt={marginRight:5,color:"#40a9ff"},Lt=function(e){var t=e.children;return Object(pt.jsxs)("span",{children:[Object(pt.jsx)(gt.a,{type:"info-circle",style:Rt}),Object(pt.jsx)(Dt.a.Text,{children:t})]})},Ut=function(e){Object(y.a)(n,e);var t=Object(C.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){return Object(pt.jsx)("span",{children:this.props.value})}}]),n}(r.Component),Vt=["children"],Mt=function(e){var t=e.children,n=Object(Pt.a)(e,Vt);return Object(pt.jsx)(wt.a.Item,Object(b.a)(Object(b.a)({},n),{},{className:At()("fz-invoice-items__row__cell__item",n.className),labelCol:{xs:24,sm:8,prefixCls:"fz-invoice-items__label"},wrapperCol:{xs:24,sm:16,prefixCls:"fz-invoice-items__wrapper"},children:t}))},Bt=function(e){var t=e.type,n=e.items,a=e.onItemAdd,i=e.onItemRemove,r=e.getFieldDecorator,o=0;return Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("div",{className:"fz-invoice-row",children:Object(pt.jsx)("h4",{className:"fz-invoice-header",children:"Polo\u017eky fakt\xfary"})}),Object(pt.jsxs)("div",{className:"fz-invoice-items",children:[n.map((function(e,a){var c=n[a]||{},s=c.netPrice,l=void 0===s?0:s,u=c.taxPrice,d=void 0===u?0:u,v=c.grossPrice,p=void 0===v?0:v;return Object(pt.jsxs)("div",{className:"fz-invoice-items__row".concat(0===o++?" fz-invoice-items__row--header":""),children:[Object(pt.jsx)("div",{className:"fz-invoice-items__row__cell fz-invoice-items__row__cell--delete",children:Object(pt.jsx)(Mt,{label:"\xa0",colon:!1,children:Object.keys(n).length>1?Object(pt.jsx)(gt.a,{className:"fz-dynamic-action-button",type:"minus-circle-o",onClick:function(){return i(a)}}):null})}),Object(pt.jsx)("div",{className:"fz-invoice-items__row__cell-group fz-invoice-items__row__cell-group__name",children:Object(pt.jsx)("div",{className:"fz-invoice-items__row__cell fz-invoice-items__row__cell--name",children:Object(pt.jsx)(Mt,{label:"Polo\u017eka",children:r("itemsNames[".concat(a,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Vypl\u0148te n\xe1zov polo\u017eky!"}]})(Object(pt.jsx)(Nt.a,{}))})})}),Object(pt.jsxs)("div",{className:"fz-invoice-items__row__cell-group",children:[Object(pt.jsx)("div",{className:"fz-invoice-items__row__cell fz-invoice-items__row__cell--narrow",children:Object(pt.jsx)(Mt,{label:"Jednotka",children:r("units[".concat(a,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Vypl\u0148te jednotku!"}]})(Object(pt.jsx)(Nt.a,{}))})}),Object(pt.jsx)("div",{className:"fz-invoice-items__row__cell fz-invoice-items__row__cell--narrow",children:Object(pt.jsx)(Mt,{label:"Mno\u017estvo",children:r("amounts[".concat(a,"]"),{validateTrigger:["onChange"],rules:[{type:"number",min:0,required:!0,whitespace:!0,message:"Vypl\u0148te mno\u017estvo!"}]})(Object(pt.jsx)(zt.a,{style:{width:"auto"},min:0,decimalSeparator:","}))})}),Object(pt.jsx)("div",{className:"fz-invoice-items__row__cell fz-invoice-items__row__cell--price",children:Object(pt.jsx)(Mt,{label:"Cena za m.j.",children:r("pricesPU[".concat(a,"]"),{validateTrigger:["onChange"],rules:[{type:"number",required:!0,whitespace:!0,message:"Vypl\u0148te cenu!"}]})(Object(pt.jsx)(zt.a,{style:{width:"auto"},decimalSeparator:","}))})}),t===pe.Taxable?Object(pt.jsx)("div",{className:"fz-invoice-items__row__cell fz-invoice-items__row__cell--narrow",children:Object(pt.jsx)(Mt,{label:"DPH %",children:r("taxRates[".concat(a,"]"),{validateTrigger:["onChange"],rules:[{type:"number",min:0,max:100,required:!0,whitespace:!0,message:"Vypl\u0148te DPH!"}]})(Object(pt.jsx)(zt.a,{style:{width:"auto"},min:0,max:100,decimalSeparator:","}))})}):null]}),Object(pt.jsx)("div",{className:"fz-invoice-items__row__cell-group fz-invoice-items__row__cell-group__sums",children:t===pe.Taxable?Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("div",{className:"fz-invoice-items__row__cell fz-invoice-items__row__cell--sum",children:Object(pt.jsx)(Mt,{label:"bez DPH",children:Object(pt.jsx)(Ut,{value:lt.format(l)})})}),Object(pt.jsx)("div",{className:"fz-invoice-items__row__cell fz-invoice-items__row__cell--sum",children:Object(pt.jsx)(Mt,{label:"DPH",children:Object(pt.jsx)(Ut,{value:lt.format(d)})})}),Object(pt.jsx)("div",{className:"fz-invoice-items__row__cell fz-invoice-items__row__cell--sum",children:Object(pt.jsx)(Mt,{label:"s DPH",children:Object(pt.jsx)(Ut,{value:lt.format(p)})})})]}):Object(pt.jsx)("div",{className:"fz-invoice-items__row__cell fz-invoice-items__row__cell--sum",children:Object(pt.jsx)(Mt,{label:"Suma",children:Object(pt.jsx)(Ut,{value:lt.format(l)})})})})]},a)})),Object(pt.jsx)(_t.a,{children:Object(pt.jsx)(Et.a,{span:16,offset:1,children:Object(pt.jsx)(wt.a.Item,Object(b.a)(Object(b.a)({},Kt),{},{children:Object(pt.jsxs)(nt.a,{type:"dashed",onClick:a,style:{width:"60%"},children:[Object(pt.jsx)(gt.a,{type:"plus"})," Pridaj polo\u017eku"]})}))})}),Object(pt.jsx)(_t.a,{children:Object(pt.jsx)(Et.a,{children:Object(pt.jsx)("div",{className:"fz-infotip-container",children:Object(pt.jsx)(Lt,{children:'Z\u013eavy je mo\u017en\xe9 zada\u0165 ako polo\u017eky so z\xe1pornou "Cenou za m.j."'})})})})]})]})},Kt={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:0}}},Ht=function(e){var t=e.netPrice;return Object(pt.jsx)("div",{className:"fz-invoice-sums",children:Object(pt.jsx)(_t.a,{className:"fz-invoice-row fz-invoice-row--sum",children:Object(pt.jsx)(Et.a,{span:8,offset:0,className:"fz-invoice-sum",children:Object(pt.jsx)(wt.a.Item,Object(b.a)(Object(b.a)({},Zt),{},{label:"Spolu na \xfahradu:",children:Object(pt.jsx)(Ut,{value:lt.format(t)})}))})})})},Zt={labelCol:{xs:{span:12,offset:0},sm:{span:12,offset:0},lg:{span:12,offset:0}},wrapperCol:{xs:{span:12,offset:0},sm:{span:12,offset:0},lg:{span:12,offset:0}}},qt=Nt.a.TextArea,Gt=Tt.a.Option,Xt="DD.MM.YYYY",Wt={labelCol:{xs:{span:24},sm:{span:8},lg:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16},lg:{span:16}}},Yt={xs:24,sm:16,lg:12},Jt=function(e){Object(y.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).handleSubmit=function(t){e.props.onSubmit(t,e.props.form)},e.handleEntityCreate=function(t){t.preventDefault();var n=!1;t.target instanceof HTMLElement&&("emitent"===t.target.dataset.type&&(n=!0));e.props.onEntityCreate(n)},e}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.netPrice,a=e.grossPrice,i=e.discountPrice,r=e.contacts,o=e.constantSymbols,c=e.isSaving,s=e.onItemAdd,l=e.onItemRemove,u=e.onPdfOpen,d=e.onPdfDownload,v=this.props.form,p=v.getFieldDecorator,f=v.getFieldValue;return Object(pt.jsxs)(wt.a,Object(b.a)(Object(b.a)({},Wt),{},{layout:"horizontal",className:"fz-invoice-form",onSubmit:this.handleSubmit,children:[p("id",{})(Object(pt.jsx)(Nt.a,{type:"hidden"})),p("type",{})(Object(pt.jsx)(Nt.a,{type:"hidden"})),Object(pt.jsxs)(_t.a,{className:"fz-invoice-row",children:[Object(pt.jsx)(Et.a,Object(b.a)(Object(b.a)({},Yt),{},{children:Object(pt.jsx)(wt.a.Item,{label:"Odberate\u013e",children:p("recipient",{rules:[{required:!0,message:"Vyberte odberate\u013ea!"}]})(Object(pt.jsx)(Tt.a,{children:r.map((function(e){return Object(pt.jsx)(Gt,{value:e.id,children:e.entity},"rcpt_".concat(e.id))}))}))})})),Object(pt.jsx)(Et.a,Object(b.a)(Object(b.a)({},Yt),{},{children:Object(pt.jsxs)("a",{"data-type":"recipient",style:{lineHeight:"40px",paddingLeft:12},onClick:this.handleEntityCreate,children:[Object(pt.jsx)(gt.a,{type:"plus"}),"\xa0Nov\xfd odberate\u013e"]})}))]}),Object(pt.jsx)(It.a,{}),Object(pt.jsxs)(_t.a,{className:"fz-invoice-row",children:[Object(pt.jsx)(Et.a,Object(b.a)(Object(b.a)({},Yt),{},{children:Object(pt.jsx)(wt.a.Item,{label:"Dod\xe1vate\u013e",children:p("emitent",{rules:[{required:!0,message:"Vyberte dod\xe1vate\u013ea!"}]})(Object(pt.jsx)(Tt.a,{children:r.reduce((function(e,t){if(t.isOwn){var n=Object(pt.jsx)(Gt,{value:t.id,children:t.entity},"emt_".concat(t.id));e.push(n)}return e}),[])}))})})),Object(pt.jsx)(Et.a,Object(b.a)(Object(b.a)({},Yt),{},{children:Object(pt.jsxs)("a",{"data-type":"emitent",style:{lineHeight:"40px",paddingLeft:12},onClick:this.handleEntityCreate,children:[Object(pt.jsx)(gt.a,{type:"plus"}),"\xa0Nov\xfd dod\xe1vate\u013e"]})}))]}),Object(pt.jsx)(It.a,{}),Object(pt.jsxs)(_t.a,{className:"fz-invoice-row",children:[Object(pt.jsxs)(Et.a,Object(b.a)(Object(b.a)({},Yt),{},{children:[Object(pt.jsx)(wt.a.Item,{label:"Sp\xf4sob \xfahrady",children:p("paymentType",{rules:[{required:!0,message:"Ch\xfdbaj\xfaci sp\xf4sob \xfahrady!"}]})(Object(pt.jsxs)(Tt.a,{children:[Object(pt.jsx)(Gt,{value:ve.WireTransfer,children:"Prevodom"}),Object(pt.jsx)(Gt,{value:ve.Card,children:"Kartou"}),Object(pt.jsx)(Gt,{value:ve.Cash,children:"V hotovosti"}),Object(pt.jsx)(Gt,{value:ve.CashOnDelivery,children:"Dobierka"})]}))}),Object(pt.jsx)(wt.a.Item,{label:"D\xe1tum vystavenia",children:p("issueDate",{rules:[{required:!0,message:"Vypl\u0148te d\xe1tum vystavenia!"}]})(Object(pt.jsx)(St.a,{format:Xt}))}),Object(pt.jsx)(wt.a.Item,{label:"D\xe1tum splatnosti",children:p("dueDate",{rules:[{required:!0,message:"Ch\xfdbaj\xfaci d\xe1tum splatnosti!"}]})(Object(pt.jsx)(St.a,{format:Xt}))}),Object(pt.jsx)(wt.a.Item,{label:"D\xe1tum dodania",children:p("deliveryDate",{rules:[{required:!1,message:"Vypl\u0148te d\xe1tum dodania!"}]})(Object(pt.jsx)(St.a,{format:Xt}))})]})),Object(pt.jsxs)(Et.a,Object(b.a)(Object(b.a)({},Yt),{},{children:[Object(pt.jsx)(wt.a.Item,{label:"Variabiln\xfd symbol",children:p("variableSymbol",{rules:[{required:!0,message:"Vypl\u0148te variabiln\xfd symbol!"}]})(Object(pt.jsx)(Nt.a,{}))}),Object(pt.jsx)(wt.a.Item,{label:"Kon\u0161tantn\xfd symbol",children:p("constantSymbol",{rules:[{required:!0,message:"Vypl\u0148te kon\u0161tantn\xfd symbol!"}]})(Object(pt.jsx)(Tt.a,{children:o.map((function(e){var t=Object(ie.a)(e,2),n=t[0],a=t[1];return Object(pt.jsxs)(Gt,{value:n,children:[n," - ",a]},n)}))}))}),Object(pt.jsx)(wt.a.Item,{label:"\u010c\xedslo objedn\xe1vky",children:p("orderNr",{rules:[{required:!1,message:"Vypl\u0148te \u010d\xedslo objedn\xe1vky!"}]})(Object(pt.jsx)(Nt.a,{}))})]}))]}),Object(pt.jsx)(_t.a,{className:"fz-invoice-row",children:Object(pt.jsx)(Et.a,{span:24,children:Object(pt.jsx)(wt.a.Item,{label:"Popis",children:p("description",{rules:[{required:!1,message:"Vypl\u0148te popis!"}]})(Object(pt.jsx)(Nt.a,{placeholder:"Popis objedn\xe1vky"}))})})}),Object(pt.jsx)(It.a,{}),Object(pt.jsx)(Bt,{items:t,type:f("type"),getFieldDecorator:p,onItemAdd:s,onItemRemove:l}),Object(pt.jsx)(It.a,{}),Object(pt.jsx)(Ht,{netPrice:n,grossPrice:a,discountPrice:i}),Object(pt.jsx)(_t.a,{className:"fz-invoice-row",type:"flex",justify:"start",children:Object(pt.jsx)(Et.a,{span:24,children:Object(pt.jsx)(wt.a.Item,{label:"Text na konci fakt\xfary",children:p("finalText",{rules:[{required:!1,message:"Ch\xfdba text!"}]})(Object(pt.jsx)(qt,{autosize:{minRows:4,maxRows:4}}))})})}),Object(pt.jsxs)(_t.a,{className:"fz-invoice-row",children:[Object(pt.jsx)(Et.a,{md:24,span:0,style:{textAlign:"right",margin:15},children:Object(pt.jsxs)("div",{className:"fz-btn-group",children:[Object(pt.jsx)(nt.a,{type:"primary",icon:"save",size:"large",onClick:d,children:"Stiahnu\u0165 PDF"}),Object(pt.jsx)(nt.a,{icon:"file-pdf",size:"large",onClick:u,children:"Zobrazi\u0165 PDF"}),Object(pt.jsx)(nt.a,{icon:"save",size:"large",htmlType:"submit",loading:c,children:"Ulo\u017ei\u0165 Fakt\xfaru"})]})}),Object(pt.jsx)(Et.a,{xs:24,sm:24,md:0,span:0,children:Object(pt.jsxs)("div",{className:"fz-btn-group",children:[Object(pt.jsx)(nt.a,{icon:"file-pdf",size:"large",onClick:d,children:"PDF"}),Object(pt.jsx)(nt.a,{type:"primary",icon:"save",size:"large",htmlType:"submit",loading:c,children:"Ulo\u017ei\u0165"})]})})]})]}))}}]),n}(r.Component),$t=wt.a.create({name:"invoice",onFieldsChange:function(e,t,n){e.onFieldsChange(t,n)},mapPropsToFields:function(e){var t=e.fields;return 0===Object.keys(t).length?{}:{id:wt.a.createFormField(t.id),type:wt.a.createFormField(t.type),recipient:wt.a.createFormField(t.recipient),emitent:wt.a.createFormField(t.emitent),paymentType:wt.a.createFormField(t.paymentType),dueDate:wt.a.createFormField(t.dueDate),issueDate:wt.a.createFormField(t.issueDate),deliveryDate:wt.a.createFormField(t.deliveryDate),paymentDate:wt.a.createFormField(t.paymentDate),isPayed:wt.a.createFormField({value:!!t.paymentDate.value}),variableSymbol:wt.a.createFormField(t.variableSymbol),constantSymbol:wt.a.createFormField(t.constantSymbol),orderNr:wt.a.createFormField(t.orderNr),description:wt.a.createFormField(t.description),finalText:wt.a.createFormField(t.finalText),itemsNames:t.itemsNames&&t.itemsNames.map((function(e){return wt.a.createFormField(e)})),pricesPU:t.pricesPU&&t.pricesPU.map((function(e){return wt.a.createFormField(e)})),units:t.units&&t.units.map((function(e){return wt.a.createFormField(e)})),amounts:t.amounts&&t.amounts.map((function(e){return wt.a.createFormField(e)})),taxRates:t.taxRates&&t.taxRates.map((function(e){return wt.a.createFormField(e)})),grossPrices:t.grossPrices&&t.grossPrices.map((function(e){return wt.a.createFormField(e)})),taxPrices:t.taxPrices&&t.taxPrices.map((function(e){return wt.a.createFormField(e)})),netPrices:t.netPrices&&t.netPrices.map((function(e){return wt.a.createFormField(e)})),discount:wt.a.createFormField(t.discount),grossPrice:wt.a.createFormField(t.grossPrice),discountPrice:wt.a.createFormField(t.discountPrice),netPrice:wt.a.createFormField(t.netPrice)}},onValuesChange:function(e,t){e.onValuesChange&&e.onValuesChange(t)}})(Jt);var Qt=function(e){Object(y.a)(n,e);var t=Object(C.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).assertUniqueId=function(e,t,n){if(!t)return n();a.props.onInvoiceCheckExists(t).then((function(e){n(!!e||void 0)}))},a.assertUniqueId=function(e,t,n){var a;return function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];var c=this,s=function(){if(a=null,!n)return e.apply(c,r)},l=n&&!a;if(a&&clearTimeout(a),a=setTimeout(s,t),l)return e.apply(c,r)}}(a.assertUniqueId,250,!1),a}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.invoiceId;return Object(pt.jsx)(wt.a,{children:Object(pt.jsx)(wt.a.Item,{hasFeedback:!0,label:"Nov\xfd identifik\xe1tor",children:e("invoiceId",{rules:[{required:!0,message:"Vypl\u0148te id dokladu!"},{validator:this.assertUniqueId,message:"Id dokladu u\u017e bolo pou\u017eit\xe9!"}],initialValue:t})(Object(pt.jsx)(Nt.a,{}))})})}}]),n}(r.Component),en=wt.a.create({name:"change_invoice_id"})(Qt),tn=(n(233),n(164)),nn=function(){return Object(pt.jsxs)("div",{children:[Object(pt.jsx)(tn.a,{size:"large"}),Object(pt.jsx)("br",{})]})},an={init:4294967295,xorOut:4294967295,refOut:!0,refIn:!0,table:new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117])};var rn=n(333);function on(e,t,n,a){if("undefined"!==typeof e)for(var i=e.length;t>i;)e=a?e+n:n+e,i++;return e}function cn(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[],n=e.length,a=0,i=n;a<i;a++){var r=void 0,o=e[a],c=encodeURIComponent(o).replaceAll("%","");r="\t"!==o&&c!==o?c:Number(e.charCodeAt(a)).toString(16),t.push(on(r,2,0))}return t.join("")}function sn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return parseInt(e,2).toString(10)}function ln(e){var t=e.toString(16);return t.length%2>0&&(t="0"+t),t}function un(e){return parseInt(e,16)}function dn(e){return function(){return parseInt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",16).toString(2)}(ln(e))}function vn(e){return new Uint8Array(e.match(/.{1,2}/g).map((function(e){return parseInt(e,16)})))}function pn(e,t){var n=e.trim();return t-3<=0?"":n.length>=t?"".concat(n.slice(0,t-3),"..."):n}function fn(e){return["","1","1",e.amount,e.currency,e.dueDate,e.variableSymbol,e.constantSymbol,e.specificSymbol,"",e.note,"1",e.iban,e.swiftCode,"0","0"].join("\t")}function hn(e,t,n,a,i,r,o,c,s){var l,u,d={amount:e,currency:t,dueDate:n,variableSymbol:a,constantSymbol:i,specificSymbol:r,note:o,iban:c,swiftCode:s},v=fn(Object(b.a)(Object(b.a)({},d),{},{note:""})),p=Math.min(124,Math.max(0,550-v.length));v=function(e){for(var t=[],n=e.length-2;n>=0;)t.push(e.substr(n,2)),n-=2;return t.join("")}(ln(function(e){var t=an.xorOut,n=an.table,a=an.init;if(an.refOut){var i,r=Object(Le.a)(e);try{for(r.s();!(i=r.n()).done;)a=n[255&(i.value^a)]^a>>8&16777215}catch(s){r.e(s)}finally{r.f()}}else{var o,c=Object(Le.a)(e);try{for(c.s();!(o=c.n()).done;)a=n[255&(a>>24^o.value)]^a<<8}catch(s){c.e(s)}finally{c.f()}}return(a^t)>>>0}(vn(cn(v=fn(Object(b.a)(Object(b.a)({},d),{},{note:pn(o,p)})))))))+cn(v),l=(u=Object(rn.a)(vn(v)),Object(re.a)(new Uint8Array(u)).map((function(e){return e.toString(16).padStart(2,"0")})).join("")).slice(26),l=vn(l);var f,h=(v=["0","0"].concat(Object(re.a)(function(e,t){var n=on(ln(e),t,0,!0);return String(n).match(/[\dA-F]{2}/gi).map(un)}(v.length/2,4)),Object(re.a)(new Uint8Array(l)))).map((function(e){return on(dn(e),8,0)})).join(""),m=h.length,j=m%5;j>0&&(h+=on("",f=5-j,0),m+=f),m/=5,v=new Array(m);for(var O=0;O<m;O+=1){var y=h.substr(5*O,5);v[O]="0123456789ABCDEFGHIJKLMNOPQRSTUV"[sn(y)]}return v.join("")}var bn=n(323),mn=n(324);function jn(e){var t=new bn.QRCodeSVG(e);return new mn.a({width:26}).process(t.toString()).then((function(e){var t=new DOMParser,n=new XMLSerializer,a=t.parseFromString(e,"image/svg+xml"),i=a.documentElement;i.setAttribute("x",3.2),i.setAttribute("y",3);var r=n.serializeToString(a);return'\n<svg width="100%" height="100%" viewBox="0 0 33 37" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:2;">\n    <g transform="matrix(1,0,0,1,-3.71936,-3.88956)">\n        <g transform="matrix(1,0,0,1,2.1803,0.389917)">\n            <g transform="matrix(2.5,0,0,2.5,8.52781,38.3885)">\n                <path d="M0.073,-0L0.073,-0.716L0.305,-0.716C0.393,-0.716 0.45,-0.712 0.477,-0.705C0.518,-0.694 0.552,-0.671 0.58,-0.635C0.607,-0.599 0.621,-0.553 0.621,-0.496C0.621,-0.452 0.613,-0.415 0.597,-0.385C0.581,-0.355 0.561,-0.331 0.536,-0.314C0.512,-0.297 0.487,-0.286 0.461,-0.28C0.427,-0.273 0.377,-0.27 0.312,-0.27L0.217,-0.27L0.217,-0L0.073,-0ZM0.217,-0.595L0.217,-0.392L0.296,-0.392C0.353,-0.392 0.391,-0.395 0.411,-0.403C0.43,-0.41 0.445,-0.422 0.456,-0.438C0.467,-0.454 0.472,-0.472 0.472,-0.494C0.472,-0.52 0.465,-0.541 0.449,-0.558C0.434,-0.575 0.415,-0.586 0.391,-0.59C0.374,-0.593 0.339,-0.595 0.287,-0.595L0.217,-0.595Z" style="fill:rgb(111,164,215);fill-rule:nonzero;"/>\n            </g>\n            <g transform="matrix(2.5,0,0,2.5,10.0097,38.3885)">\n                <path d="M0.718,-0L0.561,-0L0.499,-0.163L0.212,-0.163L0.153,-0L0,-0L0.279,-0.716L0.432,-0.716L0.718,-0ZM0.452,-0.283L0.354,-0.549L0.257,-0.283L0.452,-0.283Z" style="fill:rgb(111,164,215);fill-rule:nonzero;"/>\n            </g>\n            <g transform="matrix(2.5,0,0,2.5,11.5857,38.3885)">\n                <path d="M0.261,-0L0.261,-0.301L-0.001,-0.716L0.168,-0.716L0.336,-0.433L0.501,-0.716L0.668,-0.716L0.405,-0.3L0.405,-0L0.261,-0Z" style="fill:rgb(111,164,215);fill-rule:nonzero;"/>\n            </g>\n            <g transform="matrix(2.5,0,0,2.5,13.9026,38.3885)">\n                <path d="M0.066,-0L0.066,-0.716L0.203,-0.716L0.203,-0.458C0.245,-0.506 0.296,-0.53 0.354,-0.53C0.417,-0.53 0.469,-0.507 0.51,-0.462C0.552,-0.416 0.572,-0.35 0.572,-0.265C0.572,-0.176 0.551,-0.108 0.509,-0.06C0.467,-0.012 0.416,0.012 0.355,0.012C0.326,0.012 0.297,0.004 0.268,-0.01C0.239,-0.025 0.214,-0.047 0.193,-0.076L0.193,-0L0.066,-0ZM0.202,-0.271C0.202,-0.217 0.211,-0.177 0.228,-0.151C0.251,-0.115 0.283,-0.097 0.322,-0.097C0.353,-0.097 0.378,-0.11 0.4,-0.135C0.421,-0.161 0.432,-0.202 0.432,-0.258C0.432,-0.317 0.421,-0.36 0.399,-0.386C0.378,-0.412 0.35,-0.425 0.317,-0.425C0.284,-0.425 0.257,-0.413 0.235,-0.387C0.213,-0.361 0.202,-0.323 0.202,-0.271Z" style="fill:rgb(173,174,179);fill-rule:nonzero;"/>\n            </g>\n            <g transform="matrix(2.5,0,0,2.5,15.4297,38.3885)">\n                <path d="M0.007,-0.519L0.153,-0.519L0.277,-0.15L0.398,-0.519L0.54,-0.519L0.357,-0.02L0.324,0.071C0.312,0.101 0.301,0.124 0.29,0.14C0.279,0.156 0.266,0.169 0.252,0.179C0.238,0.189 0.221,0.197 0.2,0.202C0.179,0.208 0.156,0.21 0.13,0.21C0.104,0.21 0.078,0.208 0.052,0.202L0.04,0.095C0.062,0.099 0.081,0.101 0.098,0.101C0.13,0.101 0.154,0.092 0.169,0.073C0.184,0.054 0.196,0.03 0.204,0.001L0.007,-0.519Z" style="fill:rgb(173,174,179);fill-rule:nonzero;"/>\n            </g>\n            <g transform="matrix(2.5,0,0,2.5,17.5146,38.3885)">\n                <path d="M0.023,-0.148L0.161,-0.169C0.167,-0.142 0.179,-0.122 0.197,-0.108C0.215,-0.094 0.24,-0.087 0.272,-0.087C0.307,-0.087 0.334,-0.094 0.352,-0.107C0.364,-0.116 0.37,-0.128 0.37,-0.144C0.37,-0.154 0.367,-0.163 0.36,-0.169C0.354,-0.176 0.338,-0.182 0.314,-0.188C0.204,-0.212 0.134,-0.234 0.104,-0.254C0.063,-0.282 0.042,-0.321 0.042,-0.371C0.042,-0.416 0.06,-0.454 0.096,-0.484C0.131,-0.515 0.186,-0.53 0.261,-0.53C0.332,-0.53 0.384,-0.519 0.419,-0.496C0.453,-0.472 0.477,-0.438 0.49,-0.393L0.361,-0.369C0.355,-0.389 0.345,-0.405 0.329,-0.416C0.314,-0.426 0.292,-0.432 0.263,-0.432C0.227,-0.432 0.201,-0.427 0.186,-0.417C0.175,-0.409 0.17,-0.4 0.17,-0.389C0.17,-0.379 0.174,-0.371 0.184,-0.364C0.196,-0.355 0.239,-0.342 0.312,-0.325C0.385,-0.309 0.436,-0.288 0.465,-0.264C0.493,-0.24 0.508,-0.206 0.508,-0.162C0.508,-0.115 0.488,-0.074 0.448,-0.04C0.409,-0.005 0.35,0.012 0.272,0.012C0.201,0.012 0.145,-0.003 0.104,-0.031C0.063,-0.06 0.036,-0.099 0.023,-0.148Z" style="fill:rgb(173,174,179);fill-rule:nonzero;"/>\n            </g>\n            <g transform="matrix(2.5,0,0,2.5,18.905,38.3885)">\n                <path d="M0.411,0.197L0.411,-0.063C0.393,-0.04 0.37,-0.022 0.344,-0.009C0.317,0.005 0.288,0.012 0.257,0.012C0.198,0.012 0.15,-0.01 0.112,-0.055C0.067,-0.106 0.044,-0.177 0.044,-0.265C0.044,-0.348 0.066,-0.413 0.108,-0.46C0.15,-0.507 0.202,-0.53 0.265,-0.53C0.299,-0.53 0.329,-0.523 0.354,-0.508C0.379,-0.494 0.402,-0.472 0.421,-0.442L0.421,-0.519L0.548,-0.519L0.548,0.197L0.411,0.197ZM0.415,-0.266C0.415,-0.319 0.404,-0.358 0.383,-0.384C0.361,-0.41 0.334,-0.423 0.301,-0.423C0.268,-0.423 0.24,-0.41 0.218,-0.383C0.196,-0.357 0.185,-0.315 0.185,-0.258C0.185,-0.201 0.195,-0.16 0.217,-0.135C0.238,-0.109 0.265,-0.097 0.296,-0.097C0.328,-0.097 0.356,-0.111 0.379,-0.139C0.403,-0.167 0.415,-0.21 0.415,-0.266Z" style="fill:rgb(173,174,179);fill-rule:nonzero;"/>\n            </g>\n            <g transform="matrix(2.5,0,0,2.5,20.4321,38.3885)">\n                <path d="M0.413,-0L0.413,-0.078C0.394,-0.05 0.369,-0.028 0.339,-0.012C0.308,0.004 0.275,0.012 0.241,0.012C0.206,0.012 0.175,0.004 0.147,-0.011C0.12,-0.027 0.1,-0.048 0.087,-0.076C0.075,-0.103 0.069,-0.142 0.069,-0.19L0.069,-0.519L0.206,-0.519L0.206,-0.28C0.206,-0.207 0.209,-0.163 0.214,-0.146C0.219,-0.13 0.228,-0.117 0.241,-0.107C0.255,-0.098 0.271,-0.093 0.292,-0.093C0.315,-0.093 0.336,-0.099 0.355,-0.112C0.374,-0.125 0.386,-0.141 0.393,-0.16C0.4,-0.179 0.403,-0.226 0.403,-0.3L0.403,-0.519L0.541,-0.519L0.541,-0L0.413,-0Z" style="fill:rgb(173,174,179);fill-rule:nonzero;"/>\n            </g>\n            <g transform="matrix(2.5,0,0,2.5,21.9592,38.3885)">\n                <path d="M0.174,-0.36L0.05,-0.383C0.064,-0.433 0.088,-0.47 0.122,-0.494C0.156,-0.518 0.207,-0.53 0.274,-0.53C0.336,-0.53 0.381,-0.523 0.411,-0.509C0.441,-0.494 0.462,-0.476 0.474,-0.453C0.487,-0.431 0.493,-0.39 0.493,-0.331L0.491,-0.17C0.491,-0.125 0.493,-0.091 0.498,-0.07C0.502,-0.048 0.51,-0.025 0.522,-0L0.387,-0C0.383,-0.009 0.379,-0.023 0.374,-0.041C0.371,-0.049 0.37,-0.054 0.369,-0.057C0.345,-0.034 0.32,-0.017 0.293,-0.005C0.267,0.006 0.238,0.012 0.208,0.012C0.155,0.012 0.113,-0.003 0.082,-0.032C0.051,-0.061 0.036,-0.097 0.036,-0.142C0.036,-0.171 0.043,-0.197 0.057,-0.22C0.071,-0.243 0.09,-0.26 0.115,-0.273C0.141,-0.285 0.177,-0.296 0.225,-0.305C0.289,-0.317 0.333,-0.328 0.358,-0.338L0.358,-0.352C0.358,-0.378 0.351,-0.397 0.338,-0.408C0.325,-0.42 0.301,-0.425 0.265,-0.425C0.24,-0.425 0.221,-0.42 0.208,-0.411C0.194,-0.401 0.183,-0.384 0.174,-0.36ZM0.358,-0.249C0.34,-0.243 0.313,-0.236 0.274,-0.228C0.236,-0.22 0.211,-0.212 0.2,-0.204C0.182,-0.191 0.173,-0.175 0.173,-0.156C0.173,-0.137 0.18,-0.12 0.194,-0.106C0.209,-0.092 0.227,-0.085 0.249,-0.085C0.274,-0.085 0.297,-0.093 0.32,-0.109C0.336,-0.122 0.347,-0.137 0.353,-0.155C0.356,-0.167 0.358,-0.189 0.358,-0.222L0.358,-0.249Z" style="fill:rgb(173,174,179);fill-rule:nonzero;"/>\n            </g>\n            <g transform="matrix(2.5,0,0,2.5,23.3496,38.3885)">\n                <path d="M0.203,-0L0.066,-0L0.066,-0.519L0.193,-0.519L0.193,-0.445C0.215,-0.48 0.235,-0.503 0.252,-0.514C0.27,-0.525 0.289,-0.53 0.312,-0.53C0.343,-0.53 0.373,-0.522 0.402,-0.504L0.359,-0.385C0.336,-0.4 0.315,-0.407 0.295,-0.407C0.276,-0.407 0.259,-0.402 0.246,-0.391C0.233,-0.381 0.222,-0.362 0.215,-0.334C0.207,-0.306 0.203,-0.248 0.203,-0.16L0.203,-0Z" style="fill:rgb(173,174,179);fill-rule:nonzero;"/>\n            </g>\n            <g transform="matrix(2.5,0,0,2.5,24.3225,38.3885)">\n                <path d="M0.372,-0.165L0.509,-0.142C0.491,-0.092 0.463,-0.054 0.426,-0.028C0.388,-0.001 0.34,0.012 0.283,0.012C0.193,0.012 0.126,-0.018 0.083,-0.077C0.049,-0.124 0.032,-0.183 0.032,-0.255C0.032,-0.341 0.054,-0.409 0.099,-0.457C0.144,-0.506 0.201,-0.53 0.27,-0.53C0.347,-0.53 0.408,-0.505 0.452,-0.454C0.497,-0.403 0.518,-0.325 0.516,-0.22L0.172,-0.22C0.173,-0.179 0.184,-0.147 0.206,-0.125C0.227,-0.102 0.253,-0.091 0.285,-0.091C0.306,-0.091 0.324,-0.097 0.339,-0.108C0.354,-0.12 0.365,-0.139 0.372,-0.165ZM0.38,-0.304C0.379,-0.343 0.369,-0.374 0.349,-0.394C0.33,-0.415 0.306,-0.425 0.278,-0.425C0.248,-0.425 0.223,-0.414 0.204,-0.393C0.184,-0.371 0.174,-0.341 0.175,-0.304L0.38,-0.304Z" style="fill:rgb(173,174,179);fill-rule:nonzero;"/>\n            </g>\n        </g>\n        <g transform="matrix(0.0687681,0,0,0.0687681,9.16666,9.40286)">\n            <g transform="matrix(1.01632,0,0,0.968849,-8.55376,14.2918)">\n                <path d="M385.855,392.153C385.855,381.595 377.683,373.023 367.618,373.023L326.748,373.023C316.683,373.023 308.511,381.595 308.511,392.153L308.511,430.414C308.511,440.972 316.683,449.544 326.748,449.544L367.618,449.544C377.683,449.544 385.855,440.972 385.855,430.414L385.855,392.153Z" style="fill:rgb(111,164,215);"/>\n            </g>\n            <g transform="matrix(0.957412,-0.118686,0.156775,1.26466,-10.3325,32.2935)">\n                <g transform="matrix(1,0,0,1,1.71205,-2.7779)">\n                    <path d="M346.109,322.625C346.109,321.201 344.584,320.046 342.702,320.046C331.993,320.046 299.084,320.046 288.375,320.046C286.493,320.046 284.968,321.201 284.968,322.625C284.968,327.934 284.968,340.033 284.968,345.342C284.968,346.767 286.493,347.921 288.375,347.921C299.084,347.921 331.993,347.921 342.702,347.921C344.584,347.921 346.109,346.767 346.109,345.342C346.109,340.033 346.109,327.934 346.109,322.625ZM342.655,332.95L288.81,332.95L288.761,344.262L342.606,344.262L342.655,332.95ZM342.666,323.421L288.821,323.421L288.891,327.116L342.736,327.116L342.666,323.421Z" style="fill:white;"/>\n                </g>\n                <g transform="matrix(1.02386,1.25237e-17,0,1,-7.57338,-0.797991)">\n                    <rect x="294.36" y="333.433" width="25.759" height="2.288" style="fill:white;"/>\n                </g>\n                <g transform="matrix(1.02386,1.25237e-17,0,1,-7.57338,3.20201)">\n                    <rect x="294.36" y="333.433" width="25.759" height="2.288" style="fill:white;"/>\n                </g>\n            </g>\n        </g>\n        <g transform="matrix(1.29161,0,0,1.29161,-1.45399,-1.42586)">\n            <path d="M28.441,27.002L28.441,5.077C28.441,5.028 28.421,4.98 28.386,4.945C28.351,4.909 28.303,4.89 28.253,4.89C26.151,4.89 7.07,4.89 4.967,4.89C4.918,4.89 4.87,4.909 4.835,4.945C4.799,4.98 4.78,5.028 4.78,5.077L4.78,28.363C4.78,28.467 4.863,28.551 4.967,28.551C6.854,28.555 22.352,28.585 22.352,28.585" style="fill:none;stroke:rgb(111,164,215);stroke-width:0.39px;"/>\n        </g>\n    </g>\n    '.concat(r,"\n</svg>")}))}var On=function(e){var t=Number((100*Math.abs(e)).toPrecision(15));return Math.round(t)/100*Math.sign(e)},yn=function(e){if(e)return ut.format(e).toUpperCase().replace(/[^A-Z0-9\\.]/g,"")},Cn=function(e){if(e){var t=e.getFullYear(),n=Ke(String(e.getMonth()+1),2,"0"),a=Ke(String(e.getDate()),2,"0");return"".concat(t).concat(n).concat(a)}},gn=function(){function e(){Object(j.a)(this,e)}return Object(O.a)(e,[{key:"mapTaxSummary",value:function(e){if(!Array.isArray(e))return[];var t=lt.format,n=e.reduce((function(e,t){var n,a=t.taxRate,i=t.netPrice,r=null!==(n=e.get(a))&&void 0!==n?n:0;return e.set(a,r+i),e}),new Map),a=Array.from(n.entries()).map((function(e){var t=Object(ie.a)(e,2),n=t[0],a=t[1],i=a/100*n;return{taxRate:n,netPrice:a,taxPrice:i,grossPrice:a+i}})).sort((function(e,t){var n=e.taxRate,a=t.taxRate;return n<a?-1:n>a?1:0}));if(a.length>1){var i=a.reduce((function(e,t){return e.netPrice+=t.netPrice,e.taxPrice+=t.taxPrice,e.grossPrice+=t.grossPrice,e}),{taxRate:-1,netPrice:0,taxPrice:0,grossPrice:0});a.push(i)}return a.map((function(e){var n=e.taxRate,a=e.netPrice,i=e.taxPrice,r=e.grossPrice;return{taxRate:-1===n?"Celkom":"".concat(n," %"),netPrice:t(a),taxPrice:t(i),grossPrice:t(r)}}))}},{key:"toPayBySquareSVG",value:function(){var e=Object(se.a)(ce.a.mark((function e(t){var n,a,i;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.emitent,a=void 0===n?new xe:n,e.next=3,hn(On(t.netPrice),Ae,Cn(t.dueDate),t.variableSymbol,t.constantSymbol,"","\xdahrada fakt\xfary ".concat(t.variableSymbol),a.iban,a.swift);case 3:return i=e.sent,e.abrupt("return",jn(i));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"toInvoiceDefinition",value:function(){var e=Object(se.a)(ce.a.mark((function e(t){var n,a,i,r,o,c,s;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=st.format,a=lt.format,i=t.emitent,r=void 0===i?new xe:i,o=t.recipient,c=void 0===o?new xe:o,e.next=5,this.toPayBySquareSVG(t);case 5:return s=e.sent,e.abrupt("return",{id:t.id,type:t.type,paymentType:De[t.paymentType]||"",currency:Ae,dueDate:yn(t.dueDate),issueDate:yn(t.issueDate),deliveryDate:yn(t.deliveryDate),paymentDate:yn(t.paymentDate),variableSymbol:t.variableSymbol,constantSymbol:t.constantSymbol,orderNr:t.orderNr,description:t.description,finalText:t.finalText,discount:t.discount,items:t.items.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{pricePerUnit:"".concat(n(e.pricePerUnit)," ").concat("\u20ac"),grossPrice:a(e.grossPrice),netPrice:a(e.netPrice),taxPrice:a(e.taxPrice)})})),emitent:Object(b.a)(Object(b.a)({},r),{},{iban:dt(r.iban),zipCode:vt(r.zipCode)}),recipient:Object(b.a)(Object(b.a)({},c),{},{zipCode:vt(c.zipCode)}),grossPrice:a(t.grossPrice),netPrice:a(t.netPrice),discountPrice:a(t.discountPrice),taxSummary:this.mapTaxSummary(t.items),payBySquareSVG:s});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function xn(e){localStorage.setItem("message",JSON.stringify(e)),localStorage.removeItem("message")}var kn=[["0008","Platby za tovar (okrem platieb pod symbolmi 010x)"],["0028","Platby za dod\xe1vky investi\u010dnej povahy"],["0038","Prostriedky na mzdy"],["0058","Pen\xe1le, poplatky z ome\u0161kania, in\xe9 majetkov\xe9 sankcie, n\xe1hrady \u0161k\xf4d"],["0068","Prevody prostriedkov na mzdy a ostatn\xe9 osobn\xe9 n\xe1klady"],["0078","Tr\u017eby za predan\xfd tovar a poskytnut\xe9 stravovanie"],["0108","Platby za po\u013enohospod\xe1rske v\xfdrobky"],["0138","Zr\xe1\u017eky z miezd"],["0158","Hospod\xe1rsko operat\xedvne v\xfddavky"],["0168","Spl\xe1tky \xfaverov a p\xf4\u017ei\u010diek"],["0178","Tr\u017eby za poskytnut\xe9 slu\u017eby"],["0308","Platby za slu\u017eby"],["0358","Platby ur\u010den\xe9 na v\xfdplaty v hotovosti prostredn\xedctvom p\xf4\u0161t"],["0558","Finan\u010dn\xe9 platby ostatn\xe9"],["0858","Prechodne poskytnut\xe9 p\xf4\u017ei\u010dky"],["0938","D\xe1vky soci\xe1lneho zabezpe\u010denia"],["0968","Ostatn\xe9 prevody medzi \xfa\u010dtami toho ist\xe9ho klienta"],["1018","Pr\xedjmy z podnikania a vlastn\xedctva majetku - vo vz\u0165ahu k \u0160R"],["1118","Administrat\xedvne a in\xe9 poplatky a platby - vo vz\u0165ahu k \u0160R"],["1144","Be\u017en\xe1 z\xe1loha dane"],["1144","Platba be\u017en\xe1, preddavok na da\u0148"],["1148","Be\u017en\xe1 z\xe1loha dane"],["1318","Pr\xedjmy zo spl\xe1c. p\xf4\u017ei\u010d. poskytnut\xfdch zo \u0160R a z predaja \xfa\u010das. majetku \u0161t\xe1tu"],["1344","Do\xfa\u010dtovanie dan\xed za predch\xe1dzaj\xface zda\u0148ovacie obdobie"],["1348","Do\xfa\u010dtovanie dan\xed za predch\xe1dzaj\xface zda\u0148ovacie obdobie"],["1548","Dodato\u010dn\xe9 da\u0148ov\xe9 priznanie"],["1744","Vy\xfa\u010dtovanie dane za posledn\xe9 zda\u0148ovacie obdobie DPFO a DPPO"],["1748","Vy\xfa\u010dtovanie dane za posledn\xe9 zda\u0148ovacie obdobie (DPFO, DPPO)"],["1944","Z\xfa\u010dtovanie rozdielov preddavkov dane z pr\xedjmu zo z\xe1vislej \u010dinnosti, dane vyberanej zr\xe1\u017ekou a zabezpe\u010den\xed dane"],["1948","Z\xfa\u010dt. rozdielov predd. na da\u0148 z pr\xedjmov zo z\xe1v. \u010dinnosti, zr\xe1\u017eky dan\xed"],["2018","Ostatn\xe9 pr\xedjmy vo vz\u0165ahu k \u0160R"],["2058","N\xe1kup cenn\xfdch papierov (akcie, dlhopisy, zmenky)"],["2144","Dodato\u010dne vyruben\xe1 da\u0148"],["2148","Dodato\u010dne vyruben\xe1 da\u0148"],["2558","\xdahrady poistn\xfdch plnen\xed pois\u0165ov\u0148ami"],["2848","Pau\u0161. da\u0148 pod\u013ea \xa715Z.\u010d. 366/1999 Z.z. o dan. z pr\xedjmov"],["3058","Predaj cenn\xfdch papierov"],["3118","Poistn\xe9 a pr\xedspevok zamestn\xe1vate\u013ea do pois\u0165ovn\xed a N\xdaP"],["3148","Pen\xe1le z kontroly"],["3344","Sank\u010dn\xfd \xfarok, pen\xe1le"],["3348","Pen\xe1le zo spr\xe1vy"],["3548","Pen\xe1le vyruben\xe9 da\u0148ov\xfdmi organmi z kontroly"],["3558","Platby poistn\xe9ho pois\u0165ovniam"],["3718","N\xe1jomn\xe9 za pren\xe1jom - vo vz\u0165ahu k \u0160R"],["3748","Pen\xe1le vyruben\xe9 da\u0148ov\xfdmi org\xe1nmi zo spr\xe1vy"],["4058","Vypl\xe1canie v\xfdnosov z cenn. papierov, splatnos\u0165 menovitej hodnoty"],["4948","Vr\xe1tenie dane - nepriame dane"],["5058","Ostatn\xe9 obchody s cenn\xfdmi papiermi"],["5118","Spl\xe1canie \xfarokov a ostatn\xe9 platby s\xfavisiace s \xfavermi - vo vz\u0165ahu k \u0160R"],["5144","Zv\xfd\u0161enie dane"],["5148","Zv\xfd\u0161enie dane"],["5344","Nadmern\xfd odpo\u010det"],["5348","N\xe1rok na odpo\u010det dane"],["5748","Dodato\u010dn\xe9 da\u0148ov\xe9 priznanie"],["5918","Spl\xe1canie dom. istiny, spl\xe1c. v\xfdnosy z cenn\xfdch papierov - vo vz\u0165ahu k \u0160R"],["5944","Zv\xfd\u0161enie dane - da\u0148ov\xe1 in\u0161pekcia"],["5948","Zv\xfd\u0161enie dane - da\u0148ov\xe1 in\u0161pekcia"],["6144","Dodato\u010dn\xe1 platba z da\u0148ovej in\u0161pekcie"],["6148","Dodato\u010dn\xe1 platba z da\u0148ovej in\u0161pekcie"],["6344","Pokuta z kontroly"],["6348","Pokuta z kontroly"],["6544","Pokuta zo spr\xe1vy"],["6548","Pokuta zo spr\xe1vy"],["6744","Pokuty vyruben\xe9 da\u0148ovou in\u0161pekciou"],["6748","Pokuty vyruben\xe9 da\u0148ovou in\u0161pekciou"],["6948","Pokuty vyruben\xe9 da\u0148ov\xfdm org\xe1nom, kt. nie s\xfa pr\xedjmom osobn\xe9ho \xfa\u010dtu \u0160R"],["7144","Sank\u010dn\xfd \xfarok z da\u0148ovej in\u0161pekcie"],["7148","Pen\xe1le z da\u0148ovej in\u0161pekcie"],["7344","\xdarok pri odklade platenia"],["7348","\xdarok pri odklade platenia"],["7544","Exeku\u010dn\xe9 n\xe1klady"],["7548","Exeku\u010dn\xe9 n\xe1klady"],["7748","\xdarok platen\xfd da\u0148ov\xe9mu subjektu za oneskorenie vr\xe1tenia preplatku"],["7944","Blokov\xe9 pokuty vyruben\xe9 da\u0148ov\xfdm \xfaradom"],["7948","Blokov\xe9 pokuty vyruben\xe9 da\u0148ov\xfdm \xfaradom"],["8144","Platba (\xfa\u010dtovan\xe1 s\xfa\u010dasne s predpisom)"],["8148","Platba (\xfa\u010dtovan\xe1 s\xfa\u010dasne s predpisom)"],["8748","Platba na vyrovnanie preplatku"]],Sn=(n(585),function(e){Object(y.a)(a,e);var t=Object(C.a)(a);function a(){var e;Object(j.a)(this,a);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).formRef=void 0,e.changeIdFormRef=void 0,e.state={isGiveCreditModalVisible:!1,isChangeIdModalVisible:!1},e.handleSubmit=function(){var t=Object(se.a)(ce.a.mark((function t(n,a){var i,r;return ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),i=a.getFieldsValue(),r=at.a.loading("Uklad\xe1m fakt\xfaru...",0),t.prev=3,t.next=6,e.props.onSave(i,e.props.itemKeys);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),at.a.error(t.t0.message);case 11:return t.prev=11,r(),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[3,8,11,14]])})));return function(e,n){return t.apply(this,arguments)}}(),e.handleItemAdd=function(){e.props.onItemAdd(e.props.invoiceId)},e.handleItemRemove=function(t){e.props.onItemRemove(e.props.invoiceId,t)},e.handleFieldsChange=function(t,n){e.props.onFieldsChange(t,n)},e.handleEntityCreate=function(t){var n=e.formRef.props.form.getFieldsValue();e.props.onEntityCreate(n,e.props.itemKeys,t,e.props.history)},e.showChangeIdModal=function(){e.setState({isChangeIdModalVisible:!0})},e.handleChangeId=function(){e.changeIdFormRef.props.form.validateFields((function(t,n){if(!t){var a=e.props,i=a.itemKeys,r=a.history,o=e.formRef.props.form.getFieldsValue();e.props.onInvoiceChangeId(n.invoiceId,o,i,r),e.setState({isChangeIdModalVisible:!1})}}))},e.handleCancelChangeId=function(){e.changeIdFormRef.props.form.setFieldsValue({invoiceId:e.props.invoiceId}),e.setState({isChangeIdModalVisible:!1})},e.handleCheckInvoiceExists=function(t){return e.props.onInvoiceCheckExists(t)},e.handleBackButton=function(){e.props.history.goBack()},e.makePdfInIframe=function(t){if(document.getElementById("pdfmaker"))xn({command:"downloadInvoicePdf",data:t});else{var n=document.createElement("iframe");n.setAttribute("id","pdfmaker"),n.src="".concat(window.location.origin,"/pdf.html"),n.onload=function(){xn({command:"downloadInvoicePdf",data:t})},document.body.appendChild(n)}e.setState({isGiveCreditModalVisible:!0})},e.makePdf=function(t){var a=t.action;e.formRef.props.form.validateFieldsAndScroll(function(){var t=Object(se.a)(ce.a.mark((function t(i,r){var o,c,s,l,u,d,v,f,h,b,m,j;return ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=2;break}return t.abrupt("return");case 2:return o=at.a.loading("Uklad\xe1m fakt\xfaru...",0),p.a.event({category:"Make Pdf",action:"User pressed the PDF button"}),t.prev=4,c=e.props.itemKeys,t.next=8,e.props.onSave(r,c);case 8:return s=t.sent,o(),l=at.a.loading("Generujem pdf...",0),u=new gn,t.next=14,u.toInvoiceDefinition(s);case 14:if(d=t.sent,!document.documentMode){t.next=21;break}e.makePdfInIframe(d),l(),t.next=39;break;case 21:return t.prev=21,t.next=24,Promise.all([n.e(3),n.e(4)]).then(n.bind(null,694));case 24:return v=t.sent,f=v.PdfMaker,h=new f,t.next=29,h[a](d);case 29:e.setState({isGiveCreditModalVisible:!0}),t.next=38;break;case 32:t.prev=32,t.t0=t.catch(21),m=null!==(b=t.t0.message)&&void 0!==b?b:t.t0,j=RegExp("window blocked by browser").test(m),p.a.exception({description:"Error while generating pdf ".concat(s.id,": ").concat(m),fatal:!j}),j?at.a.error("Nie je mo\u017en\xe9 zobrazi\u0165 PDF, preto\u017ee v\xe1\u0161 prehliada\u010d blokuje popup okn\xe1. Povo\u013ete popup okn\xe1 a sk\xfaste znova.",10):at.a.error("Na\u010d\xedtanie kni\u017enice zlyhalo: ".concat(m));case 38:l();case 39:t.next=45;break;case 41:t.prev=41,t.t1=t.catch(4),o(),at.a.error(t.t1.message);case 45:case"end":return t.stop()}}),t,null,[[4,41],[21,32]])})));return function(e,n){return t.apply(this,arguments)}}())},e.handlePdfOpen=function(){e.makePdf({action:"openInvoicePdf"})},e.handlePdfDownload=function(){e.makePdf({action:"downloadInvoicePdf"})},e}return Object(O.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props.fetchForm(this.props.invoiceId)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.invoiceId!==this.props.invoiceId&&this.props.fetchForm(e.invoiceId)}},{key:"render",value:function(){var e=this,t=this.props,n=t.invoiceId,a=t.fields,i=t.items,r=t.netPrice,o=t.grossPrice,c=t.discountPrice,s=t.contacts,l=t.isFetching,u=t.isSaving,d=this.state,v=d.isGiveCreditModalVisible,p=d.isChangeIdModalVisible;return Object(pt.jsxs)("div",{className:"fz-layout-page",children:[Object(pt.jsx)(et.a,{title:"Zmena identifik\xe1tora fakt\xfary",visible:p,onOk:this.handleChangeId,onCancel:this.handleCancelChangeId,children:Object(pt.jsx)(en,{wrappedComponentRef:function(t){e.changeIdFormRef=t},invoiceId:n,onInvoiceCheckExists:this.handleCheckInvoiceExists})}),Object(pt.jsxs)(et.a,{title:"V\xe1\u0161 n\xe1zor je d\xf4le\u017eit\xfd",visible:v,cancelButtonProps:{style:{display:"none"}},onOk:function(){e.setState({isGiveCreditModalVisible:!1})},children:[Object(pt.jsxs)("p",{children:["Ak ste boli spokojn\xfd s vystavenou fakt\xfarou, dajte n\xe1m pros\xedm lajk a zdie\u013eanie na"," ",Object(pt.jsx)("a",{href:"https://www.facebook.com/FakturaZdarma/",children:"na\u0161om facebooku"}),". Pote\u0161\xed n\xe1s to. \ud83d\ude09"]}),Object(pt.jsx)("iframe",{src:"https://www.facebook.com/plugins/like.php?href=https%3A%2F%2Fwww.facebook.com%2Ffakturazdarma&width=450&layout=standard&action=like&size=small&share=true&height=35&appId",width:"450",height:"35",style:{border:"none",overflow:"hidden"},scrolling:"no",allowTransparency:!0,allow:"encrypted-media"})]}),Object(pt.jsxs)(kt.a,{classNamePrefix:"fz-loading-overlay_",active:l,spinner:Object(pt.jsx)(nn,{}),text:"Nahr\xe1vam fakt\xfaru...",styles:{overlay:{},content:{},spinner:{}},children:[Object(pt.jsx)(Ct.a,{onBack:this.handleBackButton,title:Object(pt.jsxs)("span",{children:[Object(pt.jsxs)("span",{children:["Fakt\xfara\xa0",n,"\xa0\xa0"]}),Object(pt.jsx)(gt.a,{type:"edit",style:{color:"#40a9ff"},onClick:this.showChangeIdModal})]}),subTitle:""}),Object(pt.jsx)($t,{wrappedComponentRef:function(t){e.formRef=t},fields:a,items:i,netPrice:r,grossPrice:o,discountPrice:c,contacts:s,constantSymbols:kn,isSaving:u,onSubmit:this.handleSubmit,onPdfOpen:this.handlePdfOpen,onPdfDownload:this.handlePdfDownload,onItemAdd:this.handleItemAdd,onItemRemove:this.handleItemRemove,onEntityCreate:this.handleEntityCreate,onFieldsChange:this.handleFieldsChange}),Object(pt.jsx)(yt.a,{className:"fz-back-top",children:Object(pt.jsx)("div",{className:"fz-back-top-inner",children:Object(pt.jsx)(gt.a,{type:"up"})})})]})]})}}]),a}(r.Component)),In=Object(s.g)(Object(d.b)((function(e,t){var n=t.match.params.id,a=function(e,t){var n=e.invoiceUI,a=n.fields,i=n.itemKeys,r=t.match.params.id;return a.id&&a.id.value===r?{fields:a,itemKeys:i}:{fields:{},itemKeys:[]}}(e,t),i=(new Be).fromFields(a.fields,a.itemKeys);return Object(b.a)(Object(b.a)(Object(b.a)({},e.invoiceUI),a),{},{invoiceId:n,items:i.items,netPrice:i.netPrice,grossPrice:i.grossPrice,discountPrice:i.discountPrice,contacts:e.contacts})}),(function(e){return{fetchForm:function(t){return e(qe(t))},onFieldsChange:function(t,n){return e(Ze(t,n))},onItemAdd:function(t){return e((function(e,t){var n=t().invoiceUI.itemKeys;n=[].concat(Object(re.a)(n),[0===n.length?0:n[n.length-1]+1]),e({type:H,payload:{itemKeys:n}})}))},onItemRemove:function(t,n){return e(function(e,t){return function(e,n){var a=n().invoiceUI,i=a.itemKeys,r=a.fields;if(1===i.length)return!1;["itemsNames","pricesPU","units","amounts","taxRates","itemKeys"].forEach((function(e){r.hasOwnProperty(e)&&delete r[e][t]})),i=i.filter((function(e){return e!==t})),e({type:H,payload:{itemKeys:i,fields:Object(b.a)({},r)}})}}(0,n))},onSave:function(t,n){return e(Xe(t,n))},onInvoiceChangeId:function(t,n,a,i){return e(function(e,t,n,a){return function(i,r){var o=Ge(t,n,r()),c=o.id;return o.id=e,i({type:Z,payload:{}}),ge.saveInvoice(o).then((function(e){return a.replace("/invoices/".concat(e.id)),c!==e.id&&i(We([c])),new Re(e)})).then((function(e){i({type:q,payload:e})})).catch((function(e){throw i({type:G,payload:e}),e}))}}(t,n,a,i))},onInvoiceCheckExists:function(t){return e(function(e){return function(t,n){var a=n().invoices.find((function(t){return t.id===e}));return Promise.resolve(!!a)}}(t))},onEntityCreate:function(t,n,a,i){return e(function(e,t,n,a){return function(i){return i(Xe(e,t,!0)).then((function(){return i(Ee(a,n))}))}}(t,n,a,i))}}}))(Sn)),_n=n(327),En=n.n(_n),wn=(n(231),n(81)),Tn={xs:24,sm:16,lg:12},Nn=function(e){Object(y.a)(n,e);var t=Object(C.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.getFieldDecorator,n=e.fieldPrefix,a=void 0===n?"":n,i=e.isOwn;return Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsxs)(_t.a,{className:"fz-contact-row",children:[Object(pt.jsxs)(Et.a,Object(b.a)(Object(b.a)({},Tn),{},{children:[Object(pt.jsx)(wt.a.Item,{label:"Firma",children:t("".concat(a,"entity"),{rules:[{required:!0,message:"Uve\u010fte n\xe1zov firmy!"}]})(Object(pt.jsx)(Nt.a,{}))}),Object(pt.jsx)(wt.a.Item,{label:"Ulica",children:t("".concat(a,"street"),{rules:[{required:!0,message:"Uve\u010fte ulicu!"}]})(Object(pt.jsx)(Nt.a,{}))}),Object(pt.jsx)(wt.a.Item,{label:"PS\u010c",children:t("".concat(a,"zipCode"),{rules:[{required:!0,message:"Uve\u010fte PS\u010c!"}]})(Object(pt.jsx)(Nt.a,{}))}),Object(pt.jsx)(wt.a.Item,{label:"Mesto",children:t("".concat(a,"city"),{rules:[{required:!0,message:"Uve\u010fte mesto!"}]})(Object(pt.jsx)(Nt.a,{}))}),Object(pt.jsx)(wt.a.Item,{label:"Krajina",children:t("".concat(a,"country"),{rules:[{required:!0,message:"Uve\u010fte krajinu!"}]})(Object(pt.jsx)(Nt.a,{}))})]})),Object(pt.jsxs)(Et.a,Object(b.a)(Object(b.a)({},Tn),{},{children:[Object(pt.jsx)(wt.a.Item,{label:"I\u010cO",children:t("".concat(a,"legalId"),{rules:[{required:!0,message:"Uve\u010fte I\u010cO!"}]})(Object(pt.jsx)(Nt.a,{}))}),Object(pt.jsx)(wt.a.Item,{label:"DI\u010c",children:t("".concat(a,"taxId"),{rules:[{required:!0,message:"Uve\u010fte DI\u010c!"}]})(Object(pt.jsx)(Nt.a,{}))}),Object(pt.jsx)(wt.a.Item,{label:"I\u010c DPH",extra:Object(pt.jsx)(Lt,{children:"Ak vypln\xedte I\u010c DPH formul\xe1r fakt\xfary sa automaticky prepne do re\u017eimu DPH."}),children:t("".concat(a,"taxLegalId"),{rules:[{required:!1,message:"Uve\u010fte I\u010c DPH!"}]})(Object(pt.jsx)(Nt.a,{}))}),Object(pt.jsx)(wt.a.Item,{label:"Z\xe1pis v registry",children:t("".concat(a,"registeredIn"))(Object(pt.jsx)(Nt.a,{placeholder:"Zap\xedsan\xfd v \u017dR Okresn\xe9ho \xfaradu \u017dilina, \u010d. 106-238"}))})]}))]}),Object(pt.jsx)(_t.a,{className:"fz-contact-row",children:Object(pt.jsx)(Et.a,Object(b.a)(Object(b.a)({},Tn),{},{children:Object(pt.jsx)(wt.a.Item,{label:"Moja firma",extra:Object(pt.jsx)(Lt,{children:"Za\u0161krtnite, ak chcete vystavova\u0165 fakt\xfary na t\xfato firmu. \xa0Bankov\xe9 spojenie je povinn\xe9."}),children:t("isOwn",{rules:[{type:"boolean",required:!1,message:"Ch\xfdbaj\xfaci \xfadaj!"}],valuePropName:"checked"})(Object(pt.jsx)(wn.a,{disabled:i}))})}))})]})}}]),n}(r.Component),zn={xs:24,sm:16,lg:12},Pn=function(e){Object(y.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).validateIBAN=function(){var t=e.props,n=t.getFieldsValue,a=t.fieldPrefix,i=void 0===a?"":a,r=n(),o=r["".concat(i,"iban")];if(!o)return null;var c=ct(o);if(!1===c)return"Pravdepodobne nespr\xe1vny IBAN.";if(1!==c)return"Chyba kontroln\xe9ho s\xfa\u010dtu. Pravdepodobne nespr\xe1vny IBAN.";var s=r["".concat(i,"swift")],l=r["".concat(i,"bankCode")],u=r["".concat(i,"bankAccount")];return s&&o.substring(0,2)!=s.substring(4,6)?"K\xf3d krajiny (SWIFT) sa nezhoduje.":l&&o.substring(4,4+l.length)!=l?"K\xf3d banky sa nezhoduje.":u&&!o.endsWith(u.toUpperCase().replace(/[^A-Z0-9]/g,""))?"\u010c\xedslo \xfa\u010dtu sa nezhoduje.":void 0},e}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isRequired,n=e.bankList,a=e.fieldPrefix,i=void 0===a?"":a,r=e.getFieldDecorator,o=this.validateIBAN();return Object(pt.jsx)(_t.a,{className:"fz-contact-row",children:Object(pt.jsxs)(Et.a,Object(b.a)(Object(b.a)({},zn),{},{children:[Object(pt.jsx)(wt.a.Item,{label:"Zoznam b\xe1nk",children:r("".concat(i,"bankIndex"),{preserve:!0})(Object(pt.jsx)(Tt.a,{children:n.map((function(e,t){var n=Object(ie.a)(e,2),a=n[0],i=n[1];return Object(pt.jsxs)(Tt.a.Option,{value:t,children:[i," - ",a]},i)}))}))}),Object(pt.jsx)(wt.a.Item,{label:"N\xe1zov banky",children:r("".concat(i,"bankName"),{preserve:!0,rules:[{required:t,message:"Uve\u010fte n\xe1zov banky!"}]})(Object(pt.jsx)(Nt.a,{}))}),Object(pt.jsx)(wt.a.Item,{label:"K\xf3d banky",children:r("".concat(i,"bankCode"),{preserve:!0,rules:[{required:t,message:"Uve\u010fte k\xf3d banky!"}]})(Object(pt.jsx)(Nt.a,{}))}),Object(pt.jsx)(wt.a.Item,{label:"SWIFT",children:r("".concat(i,"swift"),{preserve:!0,rules:[{required:t,message:"Uve\u010fte SWIFT!"},{min:8,message:"Minim\xe1lne 8 znakov!"}]})(Object(pt.jsx)(Nt.a,{}))}),Object(pt.jsx)(wt.a.Item,{hasFeedback:!0,label:"IBAN",help:o,validateStatus:o?"warning":"",children:r("".concat(i,"iban"),{validateTrigger:"onBlur",preserve:!0,rules:[{required:t,message:"Uve\u010fte IBAN!"}]})(Object(pt.jsx)(Nt.a,{}))}),Object(pt.jsx)(wt.a.Item,{label:"\u010c\xedslo \xfa\u010dtu",children:r("".concat(i,"bankAccount"),{preserve:!0,rules:[{required:t,message:"Uve\u010fte \u010d\xedslo \xfa\u010dtu!"}]})(Object(pt.jsx)(Nt.a,{}))})]}))})}}]),n}(r.Component),Fn={labelCol:{xs:{span:24},sm:{span:8},lg:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16},lg:{span:16}}},An={xs:24,sm:16,lg:12},Dn=function(e){Object(y.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).handleSubmit=function(t){e.props.onSubmit(t,e.props.form)},e}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.form,n=e.isOwn,a=e.isBankRequired,i=e.isBankExpanded,r=e.isContactExpanded,o=e.isSaving,c=e.bankList,s=e.onToggleBankSection,l=e.onToggleContactSection,u=t.getFieldDecorator;return Object(pt.jsxs)(wt.a,Object(b.a)(Object(b.a)({},Fn),{},{layout:"horizontal",className:"fz-contact-form",onSubmit:this.handleSubmit,children:[u("id",{})(Object(pt.jsx)(Nt.a,{type:"hidden"})),Object(pt.jsx)(Nn,Object(b.a)(Object(b.a)({},t),{},{isOwn:n})),Object(pt.jsx)(_t.a,{className:"fz-contact-row",children:Object(pt.jsx)(Et.a,Object(b.a)(Object(b.a)({},An),{},{children:Object(pt.jsxs)("a",{className:"fz-contact-row-expander",onClick:s,children:["Bankov\xe9 spojenie"," ",Object(pt.jsx)(gt.a,{type:i?"up":"down"})]})}))}),Object(pt.jsxs)("div",{className:"fz-contact-row-collapsible fz-contact-row--".concat(n||i?"expanded":"collapsed"),children:[Object(pt.jsx)("h4",{className:"fz-contact-header fz-contact-header--expanded",children:"Bankov\xe9 spojenie"}),Object(pt.jsx)(Pn,Object(b.a)(Object(b.a)({},t),{},{isRequired:a,bankList:c}))]}),Object(pt.jsx)(_t.a,{className:"fz-contact-row",children:Object(pt.jsx)(Et.a,Object(b.a)(Object(b.a)({},An),{},{children:Object(pt.jsxs)("a",{className:"fz-contact-row-expander",onClick:l,children:["Kontaktn\xe1 osoba"," ",Object(pt.jsx)(gt.a,{type:r?"up":"down"})]})}))}),Object(pt.jsxs)("div",{className:"fz-contact-row-collapsible fz-contact-row--".concat(r?"expanded":"collapsed"),children:[Object(pt.jsx)("h4",{className:"fz-contact-header fz-contact-header--expanded",children:"Kontaktn\xe1 osoba"}),Object(pt.jsx)(_t.a,{children:Object(pt.jsx)("div",{className:"fz-contact-row fz-contact-row",children:Object(pt.jsxs)(Et.a,Object(b.a)(Object(b.a)({},An),{},{children:[Object(pt.jsx)(wt.a.Item,{label:"Meno",children:u("name",{preserve:!0,rules:[{required:!1,message:"Uve\u010fte meno!"}]})(Object(pt.jsx)(Nt.a,{}))}),Object(pt.jsx)(wt.a.Item,{label:"Email",children:u("email",{preserve:!0,rules:[{type:"email",message:"Zadan\xfd text nie je platn\xfd email!"}]})(Object(pt.jsx)(Nt.a,{}))}),Object(pt.jsx)(wt.a.Item,{label:"Tel. \u010d\xedslo",children:u("phoneNr",{preserve:!0,rules:[{required:!1,message:"Uve\u010fte tel. \u010d\xedslo!"}]})(Object(pt.jsx)(Nt.a,{}))})]}))})})]}),Object(pt.jsx)(_t.a,{className:"fz-contact-row",children:Object(pt.jsx)(Et.a,{span:24,style:{textAlign:"right",margin:15},children:Object(pt.jsx)("div",{className:"fz-btn-group",children:Object(pt.jsx)(nt.a,{type:"primary",icon:"save",size:"large",htmlType:"submit",loading:o,children:"Ulo\u017ei\u0165"})})})})]}))}}]),n}(r.Component),Rn=wt.a.create({name:"contact",onFieldsChange:function(e,t,n){e.onFieldsChange(t,n)},mapPropsToFields:function(e){var t=e.fields,n=e.bankList,a=e.isOwn;return 0===Object.keys(t).length?{isOwn:wt.a.createFormField({value:a})}:{id:wt.a.createFormField(t.id),entity:wt.a.createFormField(t.entity),street:wt.a.createFormField(t.street),zipCode:wt.a.createFormField(t.zipCode),city:wt.a.createFormField(t.city),country:wt.a.createFormField(t.country),legalId:wt.a.createFormField(t.legalId),taxId:wt.a.createFormField(t.taxId),taxLegalId:wt.a.createFormField(t.taxLegalId),registeredIn:wt.a.createFormField(t.registeredIn),bankIndex:wt.a.createFormField({value:n.find((function(e){var n=Object(ie.a)(e,3),a=(n[0],n[1]);n[2];return a===t.bankCode.value}))}),bankName:wt.a.createFormField(t.bankName),bankCode:wt.a.createFormField(t.bankCode),swift:wt.a.createFormField(t.swift),iban:wt.a.createFormField(t.iban),bankAccount:wt.a.createFormField(t.bankAccount),name:wt.a.createFormField(t.name),email:wt.a.createFormField(t.email),phoneNr:wt.a.createFormField(t.phoneNr),isOwn:wt.a.createFormField(a?{value:a}:t.isOwn)}},onValuesChange:function(e,t){e.onValuesChange&&e.onValuesChange(t)}})(Dn),Ln=(n(586),function(e){Object(y.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).handleSubmit=function(t,n){t.preventDefault(),n.validateFieldsAndScroll((function(t,n){if(t)return at.a.error("Formul\xe1r obsahuje chyby!"),!1;console.log("submit",JSON.stringify(n)),e.props.onSave(n,e.props.history).catch((function(e){at.a.error(e.message)}))}))},e}return Object(O.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.props.fetchForm(this.props.contactId)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.contactId!==this.props.contactId&&this.props.fetchForm(e.contactId)}},{key:"render",value:function(){var e=this,t=this.props,n=t.contactId,a=t.forceOwn,i=t.isSaving,r=t.isFetching,o=t.isBankRequired,c=t.isBankExpanded,s=t.isContactExpanded,l=t.fields,u=t.bankList,d=t.onFieldsChange,v=t.onToggleBankSection,p=t.onToggleContactSection;return Object(pt.jsx)("div",{className:"fz-layout-page",children:Object(pt.jsxs)(kt.a,{classNamePrefix:"fz-loading-overlay_",active:r,spinner:Object(pt.jsx)(nn,{}),text:"Nahr\xe1vam kontakt...",styles:{overlay:{},content:{}},children:[Object(pt.jsx)(Ct.a,{onBack:function(){return e.props.history.goBack()},title:"Kontakt #".concat(n),subTitle:""}),Object(pt.jsx)(Rn,{fields:l,bankList:u,isOwn:a,isBankRequired:o,isSaving:i,isBankExpanded:c,isContactExpanded:s,onFieldsChange:d,onSubmit:this.handleSubmit,onToggleBankSection:v,onToggleContactSection:p}),Object(pt.jsx)(yt.a,{className:"fz-back-top",children:Object(pt.jsx)("div",{className:"fz-back-top-inner",children:Object(pt.jsx)(gt.a,{type:"up"})})})]})})}}]),n}(r.Component)),Un=Object(s.g)(Object(d.b)((function(e,t){var n=e.contactUI,a=e.bankList,i=t.location,r=t.match.params.id,o="true"===En.a.parse(i.search).isOwn,c=function(e,t){var n=e.contactUI,a=t.match.params.id;return n.fields.id&&n.fields.id.value===a?n.fields:{}}(e,t);return Object(b.a)(Object(b.a)({},n),{},{contactId:r,fields:c,bankList:a,forceOwn:o,isBankExpanded:o||c.isOwn&&(c.isOwn.value||n.isBankExpanded),isBankRequired:o||c.isOwn&&c.isOwn.value})}),(function(e){return{fetchForm:function(t){return e(Ne(t))},onSave:function(t,n){return e(function(e,t){return function(n){return n({type:z,payload:{}}),ge.saveContact(new xe(e)).then((function(e){return e=new xe(e),n({type:P,payload:e}),t.length?t.goBack():t.replace("/contacts"),e}),(function(e){throw n({type:F,payload:e}),e}))}}(t,n))},onFieldsChange:function(t,n){return e(Te(t,n))},onToggleBankSection:function(){return e({type:a.CONTACT_FORM_TOGGLE,payload:"bank"})},onToggleContactSection:function(){return e({type:a.CONTACT_FORM_TOGGLE,payload:"contact"})}}}))(Ln)),Vn=(n(640),n(331)),Mn=(n(641),n(226)),Bn=(n(591),function(e){Object(y.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).showConflicts=function(e){var t=["Kontakt","Fakt\xfara"],n=e.reduce((function(e,n,a){var i=t[a],r=n,o=r.items,c=r.conflicts.map((function(e){var t,n,a=o.find((function(t){return t.id===e.id}));return Object(pt.jsxs)("tr",{className:"fz-overview-table__row",children:[Object(pt.jsx)("td",{className:"fz-overview-table__row__cell fz-overview-table__row__cell--center fz-overview-table__row__cell--nowrap",children:"Kontakt"===i?e.entity:a.id}),Object(pt.jsx)("td",{className:"fz-overview-table__row__cell fz-overview-table__row__cell--center",children:null!==(t=a.revision)&&void 0!==t?t:"0"}),Object(pt.jsx)("td",{className:"fz-overview-table__row__cell fz-overview-table__row__cell--center",children:null!==(n=e.revision)&&void 0!==n?n:"0"}),Object(pt.jsx)("td",{className:"fz-overview-table__row__cell fz-overview-table__row__cell--right",children:Object(pt.jsx)(gt.a,{type:"stop",style:{fontSize:"16px",color:"red"},theme:"outlined"})})]},a.id)}));return c.length>0&&c.unshift(Object(pt.jsx)("tr",{className:"fz-overview-table__row fz-overview-table__row--group",children:Object(pt.jsx)("td",{className:"fz-overview-table__row__cell",colSpan:4,children:Object(pt.jsx)("strong",{children:i})})},i)),e.concat(c)}),[]),a=Object(pt.jsxs)("div",{children:[Object(pt.jsx)("div",{className:"fz-overview-table-wrapper",children:Object(pt.jsxs)("table",{className:"fz-overview-table",children:[Object(pt.jsxs)("colgroup",{children:[Object(pt.jsx)("col",{width:"100"}),Object(pt.jsx)("col",{width:"20"}),Object(pt.jsx)("col",{width:"20"}),Object(pt.jsx)("col",{width:"20"})]}),Object(pt.jsx)("thead",{children:Object(pt.jsxs)("tr",{className:"fz-overview-table__row fz-overview-table__row--header",children:[Object(pt.jsx)("th",{className:"fz-overview-table__row__cell",children:"Id."}),Object(pt.jsx)("th",{className:"fz-overview-table__row__cell",children:"AV*"}),Object(pt.jsx)("th",{className:"fz-overview-table__row__cell",children:"IV**"}),Object(pt.jsx)("th",{className:"fz-overview-table__row__cell"})]})}),Object(pt.jsx)("tbody",{children:n})]})}),Object(pt.jsxs)("ul",{className:"fz-explanatory-notes",children:[Object(pt.jsx)("li",{children:"* AV - aktu\xe1lna verzia"}),Object(pt.jsx)("li",{children:"** IV - verzia importovan\xe9ho dokumentu"})]})]});et.a.warning({width:540,title:"Nasledovn\xe9 polo\u017eky boli vynechan\xe9 z importu.",content:a})},e.handleExport=function(){var t=at.a.loading("Vykon\xe1vam z\xe1lohu...",0);e.props.onArchiveExport().then((function(){t()})).catch((function(e){t(),at.a.error(e.message)}))},e.handleImport=function(t){var n=at.a.loading("Obnovujem zo z\xe1lohy...",0);return new Promise((function(e,n){var a=new FileReader;a.onerror=function(e){n(e)},a.onload=function(t){e(a.result)},a.readAsText(t)})).then((function(t){e.props.onArchiveImport(t).then((function(t){n();var a=Object(ie.a)(t,2),i=a[0],r=a[1];i.conflicts.length+r.conflicts.length?e.showConflicts(t):at.a.success("Arch\xedv bol naimportovan\xfd")}))})).catch((function(e){n(),at.a.error("Import zlyhal")})),!1},e}return Object(O.a)(n,[{key:"render",value:function(){return Object(pt.jsxs)("div",{children:[Object(pt.jsxs)(Mn.a,{style:{marginBottom:20},children:[Object(pt.jsx)("p",{children:"Archiv\xe1cia datab\xe1zy do s\xfaboru. Odpor\xfa\u010da sa vykon\xe1va\u0165 t\xfato \u010dinnos\u0165 pravidelne."}),Object(pt.jsx)("div",{children:Object(pt.jsxs)(nt.a,{onClick:this.handleExport,children:[Object(pt.jsx)(gt.a,{type:"download"})," Archivuj do s\xfaboru"]})})]}),Object(pt.jsxs)(Mn.a,{children:[Object(pt.jsx)("p",{children:"Import datab\xe1zy z arch\xedvu."}),Object(pt.jsx)("p",{children:"Existuj\xface kontakty a fakt\xfary bud\xfa zmenen\xe9 len v pr\xedpade ak arch\xedv obsahuje ich nov\u0161iu verziu."}),Object(pt.jsx)("div",{children:Object(pt.jsx)(Vn.a,{accept:".json",beforeUpload:this.handleImport,showUploadList:!1,children:Object(pt.jsxs)(nt.a,{children:[Object(pt.jsx)(gt.a,{type:"upload"})," Na\u010d\xedtaj z arch\xedvu"]})})})]})]})}}]),n}(r.Component)),Kn=Object(s.g)(Object(d.b)((function(e){return{ui:e.ui}}),(function(e){return{onArchiveExport:function(){return e((function(e){return e({type:ee,payload:{}}),Promise.all([e(we()),e(He())]).then((function(t){var n=Object(ie.a)(t,2),a=n[0],i=n[1];e({type:te,payload:{}});var r=new Blob([JSON.stringify({contacts:a,invoices:i})],{type:"application/json"});Qe(r,"fz_".concat(Ve()().format("YYYY-MM-DD_HH-mm-ss"),".json"))})).catch((function(t){throw e({type:ne,payload:t}),t}))}))},onArchiveImport:function(t){return e(function(e){return function(t){return t({type:J,payload:{}}),new Promise((function(t,n){try{var a=JSON.parse(e);if(!Array.isArray(a.contacts)||!Array.isArray(a.invoices))throw new Error("Neplatn\xfd typ arch\xedvu");t(a)}catch(i){n(i)}})).then((function(e){return Promise.all([ge.mergeContacts(e.contacts),ge.mergeInvoices(e.invoices)])})).then((function(e){var n=Object(ie.a)(e,2),a=n[0],i=n[1];return t({type:$,payload:{contacts:a.items,invoices:i.items}}),e})).catch((function(e){throw console.log(e),t({type:Q,payload:new Error("Nastala chyba pri importe arch\xedvu!")}),e}))}}(t))}}}))(Bn)),Hn=(n(630),g.a.Header),Zn=g.a.Content,qn=g.a.Footer,Gn=[{exact:!0,path:"/invoices/:id",component:In},{exact:!0,path:"/invoices",component:bt},{exact:!0,path:"/contacts/:id",component:Un},{exact:!0,path:"/contacts",component:Ot},{exact:!0,path:"/archive",component:Kn}],Xn=[{key:"invoices",name:"Fakt\xfary"},{key:"contacts",name:"Kontakty"},{key:"archive",name:"Arch\xedv"}],Wn=function(e){Object(y.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).onMenuClicked=function(t){var n=t.key;e.props.history.push("/".concat(n))},e}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props.location.pathname,t=Xn.find((function(t){return e.includes(t.key)})),n=t&&t.key||"";return Object(pt.jsxs)(g.a,{className:"fz-layout",children:[Object(pt.jsxs)(Hn,{className:"fz-layout-header",children:[Object(pt.jsx)(m.a,{className:"fz-layout-header-menu",theme:"dark",mode:"horizontal",selectedKeys:[n],onClick:this.onMenuClicked,children:Xn.map((function(e){var t=e.key,n=e.name;return Object(pt.jsx)(m.a.Item,{children:n},t)}))}),Object(pt.jsx)("div",{className:"fz-logo"})]}),Object(pt.jsx)(Zn,{className:"fz-layout-content",children:Object(pt.jsx)(s.d,{children:Gn.map((function(e,t){return Object(pt.jsx)(s.b,Object(b.a)({},e),t)}))})}),Object(pt.jsxs)(qn,{className:"fz-layout-footer",children:[Object(pt.jsx)("div",{className:"fz-footer-brand",children:Object(pt.jsxs)("span",{children:["\xa92021"," ",Object(pt.jsx)("a",{href:"https://fakturazdarma.netlify.app/",children:"FakturaZdarma.sk"})]})}),Object(pt.jsx)("div",{children:Object(pt.jsx)("a",{href:"https://www.facebook.com/FakturaZdarma/",children:Object(pt.jsx)("div",{className:"fcb-find-us"})})})]})]})}}]),n}(r.Component),Yn=Object(s.g)(Wn),Jn=(n(631),g.a.Content),$n={lastError:null,isFetching:!1,isSaving:!1},Qn={fields:{},itemKeys:[],isDraft:!1,isFetching:!1,isSaving:!1},ea=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.INVOICE_FETCH:return Object(b.a)(Object(b.a)({},e),{},{isFetching:!0});case a.INVOICE_FETCH_SUCCESS:case a.INVOICE_FETCH_FAILURE:return Object(b.a)(Object(b.a)({},e),{},{isFetching:!1});case a.INVOICE_SAVE:return Object(b.a)(Object(b.a)({},e),{},{isSaving:!0,isDraft:t.payload.isDraft});case a.INVOICE_SAVE_SUCCESS:case a.INVOICE_SAVE_FAILURE:return Object(b.a)(Object(b.a)({},e),{},{isSaving:!1});case a.INVOICE_FORM_REPLACE:return Object(b.a)(Object(b.a)({},e),t.payload);case a.CONTACT_SAVE_SUCCESS:var n=e.fields,i=t.payload;if(i.isOwn){var r=i.isTaxable?pe.Taxable:pe.NonTax;n.type={value:r},n.emitent={value:i.id}}else n.recipient={value:i.id};return Object(b.a)(Object(b.a)({},e),{},{fields:n});default:return e}},ta={contactId:null,isFetching:!1,isSaving:!1,isBankExpanded:!1,isContactExpanded:!1,fields:{}},na=function(e,t){switch(t.type){case a.CONTACT_SAVE_SUCCESS:return{};case a.CONTACT_FORM_REPLACE:return t.payload;default:return e}},aa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ta,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.CONTACT_FETCH:return Object(b.a)(Object(b.a)({},e),{},{isFetching:!0});case a.CONTACT_FETCH_SUCCESS:case a.CONTACT_FETCH_FAILURE:return Object(b.a)(Object(b.a)({},e),{},{isFetching:!1});case a.CONTACT_SAVE:return Object(b.a)(Object(b.a)({},e),{},{isSaving:!0});case a.CONTACT_SAVE_SUCCESS:case a.CONTACT_SAVE_FAILURE:return Object(b.a)(Object(b.a)({},e),{},{isSaving:!1});case a.CONTACT_FORM_TOGGLE:var n=t.payload,i=Object(b.a)({},e);switch(n){case"bank":i.isBankExpanded=!e.isBankExpanded;break;case"contact":i.isContactExpanded=!e.isContactExpanded}return i;case a.CONTACT_FORM_REPLACE:return Object(b.a)({},e);default:return e}},ia=Object(u.b)({invoices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.ARCHIVE_IMPORT_SUCCESS:return t.payload.invoices;case a.INVOICES_DELETE_SUCCESS:case a.INVOICES_FETCH_SUCCESS:return t.payload;case a.INVOICE_SAVE_SUCCESS:var n=Object(re.a)(e),i=t.payload,r=n.findIndex((function(e){return e.id===i.id}));return r>-1?n[r]=i:n.push(i),n;case a.INVOICE_SAVE_FAILURE:default:return e}},contacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.ARCHIVE_IMPORT_SUCCESS:return t.payload.contacts;case a.CONTACTS_DELETE_SUCCESS:case a.CONTACTS_FETCH_SUCCESS:return t.payload;case a.CONTACT_SAVE_SUCCESS:var n=Object(re.a)(e),i=t.payload,r=n.findIndex((function(e){return e.id===i.id}));return r>-1?n[r]=i:n.push(i),n;default:return e}},bankList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$n,t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case a.ARCHIVE_IMPORT:return Object(b.a)(Object(b.a)({},e),{},{isSaving:!0,lastError:null});case a.ARCHIVE_IMPORT_SUCCESS:return Object(b.a)(Object(b.a)({},e),{},{isSaving:!1});case a.ARCHIVE_IMPORT_FAILURE:return Object(b.a)(Object(b.a)({},e),{},{isSaving:!1,lastError:t.payload});case a.ARCHIVE_EXPORT:return Object(b.a)(Object(b.a)({},e),{},{isFetching:!0,lastError:null});case a.ARCHIVE_EXPORT_SUCCESS:return Object(b.a)(Object(b.a)({},e),{},{isFetching:!1});case a.ARCHIVE_EXPORT_FAILURE:return Object(b.a)(Object(b.a)({},e),{},{isFetching:!1,lastError:t.payload})}switch(!0){case/DELETE$/.test(n):return Object(b.a)(Object(b.a)({},e),{},{isSaving:!0,lastError:null});case/DELETE_SUCCESS$/.test(n):return Object(b.a)(Object(b.a)({},e),{},{isSaving:!1});case/DELETE_FAILURE$/.test(n):return Object(b.a)(Object(b.a)({},e),{},{isSaving:!1,lastError:t.payload});case/FETCH$/.test(n):return Object(b.a)(Object(b.a)({},e),{},{isFetching:!0,lastError:null});case/FETCH_SUCCESS$/.test(n):return Object(b.a)(Object(b.a)({},e),{},{isFetching:!1});case/FETCH_FAILURE$/.test(n):return Object(b.a)(Object(b.a)({},e),{},{isFetching:!1,lastError:t.payload});default:return e}},invoiceUI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qn,t=arguments.length>1?arguments[1]:void 0;return ea(e,t)},contactUI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ta,t=arguments.length>1?arguments[1]:void 0;return Object(b.a)(Object(b.a)({},aa(e,t)),{},{fields:na(e.fields,t)})}}),ra=[["365.bank (Po\u0161tov\xe1 banka, a.s. od\u0161tepn\xfd z\xe1vod)","6500","POBNSKBA"],["BANCO COFIDIS, S.A., pobo\u010dka zahr. banky","8400",""],["BKS BANK AG, pobo\u010dka zahr. banky","8420","BFKKSKBB"],["\u010ceskoslovensk\xe1 obchodn\xe1 banka, a.s.","7500","CEKOSKBX"],["Citibank Europe plc, pobo\u010dka zahr. banky","8130","CITISKBA"],["COMMERZBANK Aktiengesellschaft, pobo\u010dka zahr. banky","8050","COBASKBX"],["\u010cSOB stavebn\xe1 sporite\u013e\u0148a, a.s.","8170","KBSPSKBX"],["EXIMBANKA SR","8160","EXSKSKBX"],["Fio banka, a.s., pobo\u010dka zahr. banky","8330","FIOZSKBA"],["ING Bank N.V., pobo\u010dka zahr. banky","7300","INGBSKBX"],["J&T BANKA, a.s., pobo\u010dka zahr. banky","8320","JTBPSKBA"],["KDB Bank Europe Ltd, pobo\u010dka zahran. banky","8430","KODBSKBX"],["Komer\u010dn\xed banka, a.s., pobo\u010dka zahr. banky","8100","KOMBSKBA"],["mBank S.A., pobo\u010dka zahr. banky","8360","BREXSKBX"],["N\xe1rodn\xe1 banka Slovenska","0720","NBSBSKBX"],["Oberbank AG, pobo\u010dka zahr. banky v SR","8370","OBKLSKBA"],["OTP banka Slovensko, a.s.","5200","OTPVSKBX"],["Po\u0161tov\xe1 banka, a.s.","6500","POBNSKBA"],["Prima\xa0banka Slovensko, a.s. (DEXIA)","5600","KOMASK2X"],["Privatbanka, a.s.","8120","BSLOSK22"],["Prv\xe1 stavebn\xe1 sporite\u013e\u0148a, a.s.","5900","PRVASKBA"],["Raiffeisen BANK (Tatra banka a.s., od\u0161tepn\xfd z\xe1vod)","1100","TATRSKBX"],["Slovensk\xe1 sporite\u013e\u0148a, a.s.","0900","GIBASKBX"],["Slovensk\xe1 z\xe1ru\u010dn\xe1 a rozvojov\xe1 banka, a.s.","3000","SLZBSKBA"],["\u0160t\xe1tna pokladnica","8180","SPSRSKBA"],["Tatra banka, a.s.","1100","TATRSKBX"],["UniCredit Bank Slovakia, a.s.","1111","UNCRSKBX"],["V\xdaB banka, a.s.","0200","SUBASKBX"],["W\u0171stenrot stavebn\xe1 sporite\u013e\u0148a, a.s.","7930","WUSTSKBA"]];Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(632),n(633);p.a.initialize("UA-199075-6");var oa=Object(l.b)();oa.listen((function(e){p.a.set({page:e.pathname}),p.a.pageview(e.pathname)}));var ca=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c,sa=Object(u.d)(ia,{bankList:ra},ca(Object(u.a)(v.a)));sa.dispatch(we()),sa.dispatch(He()),c.a.render(Object(pt.jsx)(d.a,{store:sa,children:Object(pt.jsx)(i.b,{locale:h.a,children:Object(pt.jsx)(s.c,{history:oa,children:Object(pt.jsxs)(s.d,{children:[Object(pt.jsx)(s.a,{exact:!0,from:"/",to:"/invoices"}),Gn.map((function(e,t){var n=e.path;return Object(pt.jsx)(s.b,{path:n,component:Yn},t)})),Object(pt.jsx)(s.b,{component:function(){return Object(pt.jsx)(g.a,{className:"fz-layout",children:Object(pt.jsx)(Jn,{className:"fz-layout-content",children:Object(pt.jsxs)("div",{className:"antd-pro-components-exception-index-exception",children:[Object(pt.jsx)("div",{className:"antd-pro-components-exception-index-imgBlock",children:Object(pt.jsx)("div",{className:"antd-pro-components-exception-index-imgEle",style:{backgroundImage:'url("/static/img/undraw_page_not_found_su7k.svg")'}})}),Object(pt.jsxs)("div",{className:"antd-pro-components-exception-index-content",children:[Object(pt.jsx)("div",{className:"antd-pro-components-exception-index-desc",children:"Prep\xe1\u010dte n\xe1m, ale t\xe1to str\xe1nka neexistuje."}),Object(pt.jsx)("div",{className:"antd-pro-components-exception-index-actions",children:Object(pt.jsx)(it.a,{to:"/",children:Object(pt.jsx)(nt.a,{className:"ant-btn ant-btn-primary",children:"Sp\xe4\u0165 na \xfavodn\xfa"})})})]})]})})})}})]})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[638,1,2]]]);
//# sourceMappingURL=main.466be54b.chunk.js.map